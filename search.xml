<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å®ç°24å°æ—¶æ— äººç›´æ’­æµ-ä¸€çœ‹å°±ä¼š</title>
    <url>/looking/3766f053.html</url>
    <content><![CDATA[<h1 id="24å°æ—¶æ— äººç›´æ’­æµ"><a href="#24å°æ—¶æ— äººç›´æ’­æµ" class="headerlink" title="24å°æ—¶æ— äººç›´æ’­æµ"></a>24å°æ—¶æ— äººç›´æ’­æµ</h1><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>è·å–ç›´æ’­å¹³å°çš„æœåŠ¡å™¨åœ°å€å’Œä¸²æµå¯†é’¥ï¼ˆå¦‚Bç«™ï¼‰</li>
<li>ä¸€å°æœåŠ¡å™¨</li>
<li>ä¼šç‚¹linuxå‘½ä»¤</li>
</ul>
<h2 id="è·å–ç›´æ’­å¹³å°çš„æœåŠ¡å™¨åœ°å€å’Œä¸²æµå¯†é’¥ï¼šå¦‚ä¸‹å›¾"><a href="#è·å–ç›´æ’­å¹³å°çš„æœåŠ¡å™¨åœ°å€å’Œä¸²æµå¯†é’¥ï¼šå¦‚ä¸‹å›¾" class="headerlink" title="è·å–ç›´æ’­å¹³å°çš„æœåŠ¡å™¨åœ°å€å’Œä¸²æµå¯†é’¥ï¼šå¦‚ä¸‹å›¾"></a>è·å–ç›´æ’­å¹³å°çš„æœåŠ¡å™¨åœ°å€å’Œä¸²æµå¯†é’¥ï¼šå¦‚ä¸‹å›¾</h2><p><img src="/img/local/25.png" alt="Bilibili"></p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><ol>
<li>å®‰è£…çª—å£ç®¡ç†å·¥å…·<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yum -y install screen</span><br></pre></td></tr></tbody></table></figure></li>
<li>åˆ›å»ºffmpegç›®å½•<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /root/lighhouse/ffmpeg</span><br></pre></td></tr></tbody></table></figure></li>
<li>å»åˆ°ç›®å½•ä¸‹<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/lighhouse</span><br></pre></td></tr></tbody></table></figure></li>
<li>å¼€ä¸ªæ–°çª—å£<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">screen -S stream	<span class="comment">#çª—å£åä¸ºstream</span></span><br></pre></td></tr></tbody></table></figure>
5ã€ç¼–è¾‘è„šæœ¬ï¼š<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">vim stream.sh</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<p>#è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"><span class="comment">#=================================================================#</span></span><br><span class="line"><span class="comment">#   System Required: CentOS7 X86_64                               #</span></span><br><span class="line"><span class="comment">#   Description: FFmpeg Stream Media Server                       #</span></span><br><span class="line"><span class="comment">#   Author: LALA                                    #</span></span><br><span class="line"><span class="comment">#   Website: https://www.lala.im                                  #</span></span><br><span class="line"><span class="comment">#=================================================================#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢œè‰²é€‰æ‹©</span></span><br><span class="line">red=<span class="string">'\033[0;31m'</span></span><br><span class="line">green=<span class="string">'\033[0;32m'</span></span><br><span class="line">yellow=<span class="string">'\033[0;33m'</span></span><br><span class="line">font=<span class="string">"\033[0m"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">ffmpeg_install</span></span>(){</span><br><span class="line"><span class="comment"># å®‰è£…FFMPEG</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"ä½ çš„æœºå™¨å†…æ˜¯å¦å·²ç»å®‰è£…è¿‡FFmpeg4.x?å®‰è£…FFmpegæ‰èƒ½æ­£å¸¸æ¨æµ,æ˜¯å¦ç°åœ¨å®‰è£…FFmpeg?(yes/no):"</span> Choose</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$Choose</span> = <span class="string">"yes"</span> ];<span class="keyword">then</span></span><br><span class="line">    yum -y install wget</span><br><span class="line">    wget --no-check-certificate https://www.johnvansickle.com/ffmpeg/old-releases/ffmpeg-4.0.3-64bit-static.tar.xz</span><br><span class="line">    tar -xJf ffmpeg-4.0.3-64bit-static.tar.xz</span><br><span class="line">    <span class="built_in">cd</span> ffmpeg-4.0.3-64bit-static</span><br><span class="line">    <span class="built_in">mv</span> ffmpeg /usr/bin &amp;&amp; <span class="built_in">mv</span> ffprobe /usr/bin &amp;&amp; <span class="built_in">mv</span> qt-faststart /usr/bin &amp;&amp; <span class="built_in">mv</span> ffmpeg-10bit /usr/bin</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$Choose</span> = <span class="string">"no"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${yellow}</span> ä½ é€‰æ‹©ä¸å®‰è£…FFmpeg,è¯·ç¡®å®šä½ çš„æœºå™¨å†…å·²ç»è‡ªè¡Œå®‰è£…è¿‡FFmpeg,å¦åˆ™ç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œ! <span class="variable">${font}</span>"</span></span><br><span class="line">    <span class="built_in">sleep</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">stream_start</span></span>(){</span><br><span class="line"><span class="comment"># å®šä¹‰æ¨æµåœ°å€å’Œæ¨æµç </span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¾“å…¥ä½ çš„æ¨æµåœ°å€å’Œæ¨æµç (rtmpåè®®):"</span> rtmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„åœ°å€æ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$rtmp</span> =~ <span class="string">"rtmp://"</span> ]];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${green}</span> æ¨æµåœ°å€è¾“å…¥æ­£ç¡®,ç¨‹åºå°†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ. <span class="variable">${font}</span>"</span></span><br><span class="line">  	<span class="built_in">sleep</span> 2</span><br><span class="line">    <span class="keyword">else</span>  </span><br><span class="line">  	<span class="built_in">echo</span> -e <span class="string">"<span class="variable">${red}</span> ä½ è¾“å…¥çš„åœ°å€ä¸åˆæ³•,è¯·é‡æ–°è¿è¡Œç¨‹åºå¹¶è¾“å…¥! <span class="variable">${font}</span>"</span></span><br><span class="line">  	<span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰è§†é¢‘å­˜æ”¾ç›®å½•</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¾“å…¥ä½ çš„è§†é¢‘å­˜æ”¾ç›®å½• (æ ¼å¼ä»…æ”¯æŒmp4,å¹¶ä¸”è¦ç»å¯¹è·¯å¾„,ä¾‹å¦‚/opt/video):"</span> folder</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­æ˜¯å¦éœ€è¦æ·»åŠ æ°´å°</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"æ˜¯å¦éœ€è¦ä¸ºè§†é¢‘æ·»åŠ æ°´å°?æ°´å°ä½ç½®é»˜è®¤åœ¨å³ä¸Šæ–¹,éœ€è¦è¾ƒå¥½CPUæ”¯æŒ(yes/no):"</span> watermark</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$watermark</span> = <span class="string">"yes"</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"è¾“å…¥ä½ çš„æ°´å°å›¾ç‰‡å­˜æ”¾ç»å¯¹è·¯å¾„,ä¾‹å¦‚/opt/image/watermark.jpg (æ ¼å¼æ”¯æŒjpg/png/bmp):"</span> image</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${yellow}</span> æ·»åŠ æ°´å°å®Œæˆ,ç¨‹åºå°†å¼€å§‹æ¨æµ. <span class="variable">${font}</span>"</span></span><br><span class="line">    <span class="comment"># å¾ªç¯</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">cd</span> <span class="variable">$folder</span></span><br><span class="line">        <span class="keyword">for</span> video <span class="keyword">in</span> $(<span class="built_in">ls</span> *.mp4)	<span class="comment">#è§†é¢‘ç±»å‹</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        <span class="comment">#192k</span></span><br><span class="line">        ffmpeg -re -i <span class="string">"<span class="variable">$video</span>"</span> -i <span class="string">"<span class="variable">$image</span>"</span> -filter_complex overlay=W-w-5:5 -c:v libx264 -c:a aac -b:a 192k -strict -2 -f flv <span class="variable">${rtmp}</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$watermark</span> = <span class="string">"no"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${yellow}</span> ä½ é€‰æ‹©ä¸æ·»åŠ æ°´å°,ç¨‹åºå°†å¼€å§‹æ¨æµ. <span class="variable">${font}</span>"</span></span><br><span class="line">    <span class="comment"># å¾ªç¯</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">cd</span> <span class="variable">$folder</span></span><br><span class="line">        <span class="comment">#for video in $(ls *.mp4)</span></span><br><span class="line">        <span class="comment">#do</span></span><br><span class="line">        <span class="comment">#ffmpeg -re -i "$video" -c:v copy -c:a aac -b:a 192k -strict -2 -f flv ${rtmp}</span></span><br><span class="line">        <span class="comment">#done</span></span><br><span class="line">        video=$(find ./ -<span class="built_in">type</span> f | <span class="built_in">shuf</span> -n 1)</span><br><span class="line">        <span class="comment">#-presetè¿™æ˜¯æŒ‡å®šç¼–ç é€Ÿåº¦å’Œè´¨é‡çš„é¢„è®¾ã€‚ultrafast æ˜¯é€Ÿåº¦æœ€å¿«çš„é¢„è®¾ï¼Œä½†ç¼–ç è´¨é‡å¯èƒ½ä¼šç¨å¾®é™ä½ã€‚</span></span><br><span class="line">        <span class="comment">#-g 60ï¼šè®¾ç½®å…³é”®å¸§é—´éš”ä¸º 60 å¸§ã€‚å…³é”®å¸§æ˜¯è§†é¢‘å¸§çš„ä¸€ä¸ªç‰¹æ®Šç±»å‹ï¼Œç”¨äºä¿æŒè§†é¢‘çš„å®Œæ•´æ€§ï¼Œé€šå¸¸è®¾ç½®å…³é”®å¸§é—´éš”å¯ä»¥å½±å“è§†é¢‘çš„å‹ç¼©æ•ˆç‡å’Œè´¨é‡ã€‚</span></span><br><span class="line">        <span class="comment">#-vcodecï¼šç¼–ç å™¨ - libx264ï¼š264çš„ç¼–ç å™¨</span></span><br><span class="line">        <span class="comment">#-b:v 1500kï¼šè®¾ç½®è§†é¢‘æ¯”ç‰¹ç‡ä¸º 1500 kbpsï¼Œå³è§†é¢‘çš„ç ç‡ã€‚</span></span><br><span class="line">        ffmpeg -re -i <span class="string">"<span class="variable">$video</span>"</span> -preset ultrafast -vcodec libx264 -g 60 -b:v 1500k -c:a aac -b:a 128k -strict -2 -f flv <span class="variable">${rtmp}</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢æ¨æµ</span></span><br><span class="line"><span class="function"><span class="title">stream_stop</span></span>(){</span><br><span class="line">    screen -S stream -X quit</span><br><span class="line">    killall ffmpeg</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹èœå•è®¾ç½®</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"<span class="variable">${yellow}</span> CentOS7 X86_64 FFmpegæ— äººå€¼å®ˆå¾ªç¯æ¨æµ For LALA.IM <span class="variable">${font}</span>"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"<span class="variable">${red}</span> è¯·ç¡®å®šæ­¤è„šæœ¬ç›®å‰æ˜¯åœ¨screençª—å£å†…è¿è¡Œçš„! <span class="variable">${font}</span>"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"<span class="variable">${green}</span> 1.å®‰è£…FFmpeg (æœºå™¨è¦å®‰è£…FFmpegæ‰èƒ½æ­£å¸¸æ¨æµ) <span class="variable">${font}</span>"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"<span class="variable">${green}</span> 2.å¼€å§‹æ— äººå€¼å®ˆå¾ªç¯æ¨æµ <span class="variable">${font}</span>"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"<span class="variable">${green}</span> 3.åœæ­¢æ¨æµ <span class="variable">${font}</span>"</span></span><br><span class="line"><span class="function"><span class="title">start_menu</span></span>(){</span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥æ•°å­—(1-3),é€‰æ‹©ä½ è¦è¿›è¡Œçš„æ“ä½œ:"</span> num</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$num</span>"</span> <span class="keyword">in</span></span><br><span class="line">        1)</span><br><span class="line">        ffmpeg_install</span><br><span class="line">        ;;</span><br><span class="line">        2)</span><br><span class="line">        stream_start</span><br><span class="line">        ;;</span><br><span class="line">        3)</span><br><span class="line">        stream_stop</span><br><span class="line">        ;;</span><br><span class="line">        *)</span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${red}</span> è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­— (1-3) <span class="variable">${font}</span>"</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œå¼€å§‹èœå•</span></span><br><span class="line">start_menu</span><br></pre></td></tr></tbody></table></figure>

<p>6ã€è¿è¡Œè„šæœ¬</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x stream.sh      <span class="comment"># ç»™è„šæœ¬æ‰§è¡Œæƒé™</span></span><br><span class="line">./stream.sh             <span class="comment"># è¿è¡Œè„šæœ¬</span></span><br></pre></td></tr></tbody></table></figure>
<p>7ã€ä½¿ç”¨è¯´æ˜</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">#æ‰§è¡Œè„šæœ¬åå¼¹å‡ºèœå•ï¼Œé€‰æ‹©å¯¹åº”æ“ä½œå³å¯ï¼š</span><br><span class="line">1) å…ˆé€‰æ‹©1 å®‰è£…ffmpeg </span><br><span class="line">2) å®‰è£…ffmpegåè„šæœ¬ä¼šé€€å‡ºã€å†æ–°å»ºvideoç›®å½•å­˜æ”¾éœ€è¦æ’­æ”¾çš„è§†é¢‘ï¼š</span><br><span class="line"></span><br><span class="line">&gt; mkdir /root/lighhouse/video</span><br><span class="line"></span><br><span class="line">3) å†è¿è¡Œè„šæœ¬åé€‰æ‹©2 è¾“å…¥å¯¹åº”çš„é…ç½®ï¼š</span><br><span class="line">   -- æç¤º è¾“å…¥è¦ç›´æ’­å¹³å°çš„urlåœ°å€å’Œä¸²æµç ï¼šå¦‚Bç«™ï¼šhttps://zxxx/ä¸²æµç </span><br><span class="line">   -- è¾“å…¥è§†é¢‘å­˜æ”¾çš„ç›®å½•ï¼š/root/lighhouse/video</span><br><span class="line">   -- æ˜¯å¦åŠ æ°´å°ï¼šno</span><br></pre></td></tr></tbody></table></figure>

<ol start="8">
<li>è¿™äº›éƒ½åšå®Œåæ—¢å¯ä»¥åœ¨Bç«™çœ‹åˆ°è‡ªå·±çš„ç›´æ’­äº†ï¼šåœ¨å¦ä¸€ä¸ªç»ˆç«¯æ‰“å¼€å‘½ä»¤è¡Œæ‰§è¡Œ<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-- screen -<span class="built_in">ls</span>	<span class="comment">#æŸ¥çœ‹æœ‰å‡ ä¸ªè¿›ç¨‹å’Œè¿›ç¨‹å·</span></span><br><span class="line">-- screen -d è¿›ç¨‹å·.stream	<span class="comment">#å°†è¿›ç¨‹è„±ç¦»ç»ˆç«¯æ‰§è¡Œ</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<p>9.æ³¨æ„è§†é¢‘æ–‡ä»¶è¦ä»¥mp4æ ¼å¼ç»“å°¾ã€ä¸”è¦æ”¾åœ¨/root/lighhouse/video è¯¥è·¯å¾„ä¸‹</p>
<ol start="10">
<li>é€€å‡ºç›´æ’­å¯ä»¥æ‰§è¡Œï¼š<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">screen -X -S è¿›ç¨‹å·.stream</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>24å°æ—¶ç›´æ’­</tag>
      </tags>
  </entry>
  <entry>
    <title>è”æƒ³å°æ–°Air14</title>
    <url>/looking/5c120c19.html</url>
    <content><![CDATA[<h1 id="è®¾å¤‡æ¦‚è¿°"><a href="#è®¾å¤‡æ¦‚è¿°" class="headerlink" title="è®¾å¤‡æ¦‚è¿°"></a>è®¾å¤‡æ¦‚è¿°</h1><p><strong>å‹å·:</strong> è”æƒ³å°æ–°Air 14 2020 é”é¾™ç‰ˆ<br><strong>å†…å­˜:</strong> åŒé€šé“16GB DDR4 3200å†…å­˜<br><strong>å­˜å‚¨:</strong> 512GB M.2 SSD<br><strong>é¢œè‰²:</strong> æ·±ç©ºç°<br><strong>é‡é‡:</strong> 1.38kg<br><strong>åšåº¦:</strong> 16.9mm  </p>
<p><em>è½»è–„ä¾¿æºï¼Œé€‚åˆé«˜æ•ˆå·¥ä½œ</em><br>è”æƒ³å°æ–°Air 14 2020 é”é¾™ç‰ˆçš„è®¾è®¡ä»¥è½»è–„ä¾¿æºä¸ºç‰¹ç‚¹ï¼Œå®Œç¾èåˆäº†å‡ºè‰²çš„æ€§èƒ½å’Œæ—¶å°šçš„å¤–è§‚ï¼Œæ˜¯æˆ‘åœ¨å·¥ä½œå’Œæ—¥å¸¸ä½¿ç”¨ä¸­çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h2 id="è®¾è®¡ä¸å¤–è§‚"><a href="#è®¾è®¡ä¸å¤–è§‚" class="headerlink" title="è®¾è®¡ä¸å¤–è§‚"></a>è®¾è®¡ä¸å¤–è§‚</h2><p>è¿™æ¬¾ç¬”è®°æœ¬ä»¥æ·±ç©ºç°ä¸ºä¸»é¢˜è‰²ï¼Œä¸ä»…å¤–è§‚æ—¶å°šï¼Œè¿˜æ˜¾å¾—ä½è°ƒæ²‰ç¨³ã€‚è½»è‡³1.38kgçš„é‡é‡å’Œåªæœ‰16.9mmçš„åšåº¦ä½¿å¾—å®ƒåœ¨æºå¸¦å’Œæ“ä½œæ—¶éå¸¸æ–¹ä¾¿ï¼Œæ— è®ºæ˜¯æ”¾åœ¨èƒŒåŒ…é‡Œè¿˜æ˜¯åœ¨ä¼šè®®å®¤ä¸­ç§»åŠ¨ï¼Œéƒ½æ˜¾å¾—å¾—å¿ƒåº”æ‰‹ã€‚</p>
<h2 id="æ€§èƒ½ä¸å“åº”"><a href="#æ€§èƒ½ä¸å“åº”" class="headerlink" title="æ€§èƒ½ä¸å“åº”"></a>æ€§èƒ½ä¸å“åº”</h2><p>æ­è½½åŒé€šé“16GB DDR4 3200å†…å­˜å’Œå¿«é€Ÿçš„512GB M.2 SSDï¼Œå°æ–°Air 14 æä¾›äº†å¼ºå¤§çš„æ€§èƒ½æ”¯æŒã€‚æˆ‘å¯ä»¥æµç•…åœ°å¤„ç†å¤šä¸ªä»»åŠ¡å’Œå¤§å‹æ–‡ä»¶ï¼Œä»è½»é‡çº§åŠå…¬åº”ç”¨åˆ°å¤æ‚çš„æ•°æ®åˆ†æï¼Œéƒ½èƒ½å¤Ÿè¿…é€Ÿå“åº”ï¼Œè®©å·¥ä½œæ•ˆç‡å¤§å¤§æå‡ã€‚</p>
<h2 id="ç”¨æˆ·ä½“éªŒ"><a href="#ç”¨æˆ·ä½“éªŒ" class="headerlink" title="ç”¨æˆ·ä½“éªŒ"></a>ç”¨æˆ·ä½“éªŒ</h2><p>å°æ–°Air 14 åœ¨æ—¥å¸¸å·¥ä½œä¸­è¡¨ç°å¾—å°¤ä¸ºå‡ºè‰²ã€‚é”®ç›˜æ‰‹æ„Ÿèˆ’é€‚ï¼Œæ‰“å­—æ²¡æœ‰ä»»ä½•å»¶è¿Ÿæ„Ÿï¼›è§¦æ§æ¿çµæ•åº¦é«˜ï¼Œæ‰‹åŠ¿æ“ä½œæµç•…è‡ªå¦‚ã€‚å±å¹•è‰²å½©é²œæ˜ï¼Œåˆ†è¾¨ç‡é«˜ï¼Œå³ä½¿é•¿æ—¶é—´å·¥ä½œä¹Ÿä¸æ˜“ç–²åŠ³ã€‚åŒæ—¶ï¼Œç”µæ± ç»­èˆªä¹Ÿååˆ†å¯é ï¼Œä¸€æ¬¡å……ç”µå¯ä»¥æ”¯æŒæˆ‘æ•´ä¸ªå·¥ä½œæ—¥çš„ä½¿ç”¨ï¼Œå‡å°‘äº†é¢‘ç¹å……ç”µçš„å›°æ‰°ã€‚</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ç»¼ä¸Šæ‰€è¿°ï¼Œè”æƒ³å°æ–°Air 14 2020 é”é¾™ç‰ˆå‡­å€Ÿå…¶è½»ä¾¿çš„è®¾è®¡ã€ä¼˜ç§€çš„æ€§èƒ½å’Œå‡ºè‰²çš„ç”¨æˆ·ä½“éªŒï¼Œå®Œç¾æ»¡è¶³äº†æˆ‘å¯¹ä¸€æ¬¾é«˜æ•ˆåŠå…¬ç¬”è®°æœ¬çš„æ‰€æœ‰æœŸå¾…ã€‚å®ƒä¸ä»…ä»¤æˆ‘åœ¨å·¥ä½œä¸­æ›´åŠ é«˜æ•ˆï¼Œè¿˜å‡­å€Ÿå…¶æ—¶å°šçš„å¤–è§‚ä¸ºæˆ‘èµ¢å¾—äº†ä¸å°‘çœ¼çƒã€‚å¦‚æœæ‚¨ä¹Ÿåœ¨å¯»æ‰¾ä¸€æ¬¾é€‚åˆç§»åŠ¨åŠå…¬çš„ç¬”è®°æœ¬ï¼Œå°æ–°Air 14 æ— ç–‘æ˜¯ä¸€ä¸ªå¼ºçƒˆæ¨èçš„é€‰æ‹©ã€‚</p>
]]></content>
      <categories>
        <category>ç§‘æŠ€</category>
      </categories>
      <tags>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title>N1ç›’å­-ç§äººå½±é™¢æ­å»º</title>
    <url>/looking/93af6d44.html</url>
    <content><![CDATA[<p class="p center logo large">N1ç›’å­åŸç³»ç»Ÿåˆ·æœºistoreOS</p>
<p><code>å¦‚æœä½ æ˜¯N1ç›’å­å¯ä»¥å‚è€ƒä¸‹è¿™ä¸ªæ•™ç¨‹</code></p>
<div calss="anzhiyu-tag-link"><a class="tag-Link" target="_blank" href="https://www.cnblogs.com/littlecc/p/18302009">
    <div class="tag-link-tips">å¼•ç”¨ç«™å¤–åœ°å€</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="">
          <i class="anzhiyufont anzhiyu-icon-link" style=""></i>
        </div>
        <div class="tag-link-right">
            <div class="tag-link-title">å‚è€ƒ</div>
            <div class="tag-link-sitename">N1ç›’å­ç©æ³•-åŸç³»ç»Ÿåˆ·istoreOSç³»ç»Ÿ</div>
        </div>
        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>
    </div>
    </a></div>
<div calss="anzhiyu-tag-link"><a class="tag-Link" target="_blank" href="https://www.cnblogs.com/littlecc/p/18300431">
    <div class="tag-link-tips">å¼•ç”¨ç«™å¤–åœ°å€</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="">
          <i class="anzhiyufont anzhiyu-icon-link" style=""></i>
        </div>
        <div class="tag-link-right">
            <div class="tag-link-title">å‚è€ƒ</div>
            <div class="tag-link-sitename">N1ç›’å­ç©æ³•-æŒ‚è½½é˜¿é‡Œäº‘ç›˜-Alistå·¥å…·</div>
        </div>
        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>
    </div>
    </a></div>



<p class="p center logo large">ç§äººå½±é™¢æ­å»º</p>
<div class="note info flat"><p>N1ç›’å­+Alist+é˜¿é‡Œäº‘ç›˜+å°é›…-æ­å»ºå®¶åº­å½±é™¢</p>
</div>
<h2 id="ğŸš€å‰æ™¯æ‘˜è¦"><a href="#ğŸš€å‰æ™¯æ‘˜è¦" class="headerlink" title="==ğŸš€å‰æ™¯æ‘˜è¦=="></a>==ğŸš€å‰æ™¯æ‘˜è¦==</h2><p>ğŸ’¬ æœ¬æ–‡æ˜¯åŸºäºN1ç›’å­è½¯è·¯ç”±å†™çš„,å½“ç„¶æœ‰æœåŠ¡å™¨æ›´å¥½<br>ğŸ’¯ å·²å®‰è£…docker,æœ‰ä¸€ä¸¢ä¸¢åŸºç¡€å³å¯<br>ğŸ‘½ ç¡®å®šä½ å·²ç»æ‹¥æœ‰äº†äº‘ç›˜(å¦‚é˜¿é‡Œäº‘ç›˜)<br>ğŸ¤– å·²å®‰è£…Alistå¹¶å·²æŒ‚è½½äº‘ç›˜<br>ğŸ‘» å¼€å§‹æ­å»ºä¸ªäººå½±é™¢å§</p>
<h2 id="ğŸ§­-å‡†å¤‡"><a href="#ğŸ§­-å‡†å¤‡" class="headerlink" title="ğŸ§­ å‡†å¤‡"></a>ğŸ§­ å‡†å¤‡</h2><ol>
<li>å‡†å¤‡å¥½N1ï¼Œåˆ·å¥½è‡ªå¸¦Dockerçš„istoreOS(æˆ–ä¸ªäººæœåŠ¡å™¨)ï¼Œè¿™ä¸ªç®€å•ï¼Œä¸€ç•¥è€Œè¿‡ã€‚</li>
<li>å‡†å¤‡å‚æ•°ï¼š</li>
</ol>
<ul>
<li>é˜¿é‡Œäº‘ç›˜tokenï¼š<a href="https://alist.nn.ci/zh/guide/drivers/aliyundrive.html#%E5%88%B7%E6%96%B0%E4%BB%A4%E7%89%8C">è·å–é˜¿é‡Œäº‘ç›˜çš„tokenæ–‡æ¡£æ•™ç¨‹</a></li>
<li>é˜¿é‡Œäº‘ç›˜Open token: <a href="https://alist.nn.ci/zh/guide/drivers/aliyundrive_open.html#%E5%88%B7%E6%96%B0%E4%BB%A4%E7%89%8C">é˜¿é‡Œäº‘ç›˜Open tokenæ–‡æ¡£æ•™ç¨‹-çœ‹åˆ·æ–°ä»¤ç‰Œé‚£é‡Œ</a></li>
<li>é˜¿é‡Œäº‘ç›˜è½¬å­˜<code>æ–‡ä»¶å¤¹(xiaoya)ID</code>ï¼š<a href="https://alist.nn.ci/zh/guide/drivers/aliyundrive_open.html#%E6%A0%B9%E6%96%87%E4%BB%B6%E5%A4%B9id">å‚è€ƒæ–‡æ¡£-çœ‹æ ¹æ–‡ä»¶å¤¹IDé‚£é‡Œ</a></li>
</ul>
<div class="note warning simple"><p>ğŸš¨ç‰¹åˆ«æ³¨æ„ï¼š<br><strong>äº‘ç›˜ä¸­å·²æ–°å»ºçš„<code>æ–‡ä»¶å¤¹ï¼ˆxiaoyaï¼‰</code>ä¸è¦åˆ é™¤ã€‚å¦‚æœè¯¯åˆ ï¼Œå³ä¾¿æ˜¯æ–°å»ºä¸€ä¸ªç›¸åŒåç§°çš„æ–‡ä»¶å¤¹ï¼ŒIDä¹Ÿä¼šæ”¹å˜ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨æ›´æ–°æ‰èƒ½æ­£å¸¸è®¿é—®å°é›…</strong></p>
</div>

<hr>
<hr>
<h2 id="ğŸ®-å°é›…å®‰è£…"><a href="#ğŸ®-å°é›…å®‰è£…" class="headerlink" title="ğŸ® å°é›…å®‰è£…"></a>ğŸ® å°é›…å®‰è£…</h2><h3 id="1-å…ˆsshç™»å½•åˆ°ISOè½¯è·¯ç”±ï¼ˆæˆ–æœåŠ¡å™¨ï¼‰"><a href="#1-å…ˆsshç™»å½•åˆ°ISOè½¯è·¯ç”±ï¼ˆæˆ–æœåŠ¡å™¨ï¼‰" class="headerlink" title="1. å…ˆsshç™»å½•åˆ°ISOè½¯è·¯ç”±ï¼ˆæˆ–æœåŠ¡å™¨ï¼‰"></a>1. å…ˆsshç™»å½•åˆ°ISOè½¯è·¯ç”±ï¼ˆæˆ–æœåŠ¡å™¨ï¼‰</h3><h3 id="2-å†å®‰è£…å°é›…"><a href="#2-å†å®‰è£…å°é›…" class="headerlink" title="2. å†å®‰è£…å°é›…"></a>2. å†å®‰è£…å°é›…</h3><p><code>å¯æ‰§è¡Œä¸€é”®é»˜è®¤å®‰è£…ï¼š</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">bash -c <span class="string">"<span class="subst">$(curl http://docker.xiaoya.pro/update_new.sh)</span>"</span></span><br></pre></td></tr></tbody></table></figure>
<div class="note warning simple"><p>ğŸš¨<em><strong>æ³¨æ„</strong></em>ï¼š<br>å®‰è£…è¿‡ç¨‹ä¸­æŒ‰ç…§æç¤ºä¾æ¬¡ç²˜è´´<code>é˜¿é‡Œäº‘ç›˜token</code>ã€<code>é˜¿é‡Œäº‘ç›˜OpenToken</code>ã€<code>è½¬å­˜æ–‡ä»¶å¤¹ID</code>ï¼Œç­‰å¾…å®‰è£…å®Œæˆ</p>
</div>

<p><code>å®‰è£…å°é›…çš„shè„šæœ¬</code></p>
<blockquote>
<p>å¦‚æœä¸Šé¢ä¸æƒ³ä¸€é”®å®‰è£…ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ<br>åŸºäºdockerå®‰è£…<br>æ³¨æ„æ›´æ”¹è„šæœ¬ä¸­çš„æŒ‚è½½è·¯å¾„çš„å˜é‡(V_data)</p>
</blockquote>
<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å°é›…dockeræ•°æ®æŒ‚è½½å®‰è£…ç›®å½•</span></span><br><span class="line">V_data=<span class="string">"/mnt/mydisk/etc/xiaoya"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$V_data</span>/mytoken.txt ]; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">rm</span> -rf <span class="variable">$V_data</span>/mytoken.txt</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$V_data</span>/data</span><br><span class="line"><span class="built_in">touch</span> <span class="variable">$V_data</span>/mytoken.txt</span><br><span class="line"><span class="built_in">touch</span> <span class="variable">$V_data</span>/myopentoken.txt</span><br><span class="line"><span class="built_in">touch</span> <span class="variable">$V_data</span>/temp_transfer_folder_id.txt</span><br><span class="line"></span><br><span class="line">mytokenfilesize=$(<span class="built_in">cat</span> <span class="variable">$V_data</span>/mytoken.txt)</span><br><span class="line">mytokenstringsize=<span class="variable">${#mytokenfilesize}</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$mytokenstringsize</span> -le 31 ]; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">"\033[32m"</span></span><br><span class="line">	<span class="built_in">read</span> -p <span class="string">"è¾“å…¥ä½ çš„é˜¿é‡Œäº‘ç›˜ Tokenï¼ˆ32ä½é•¿ï¼‰: "</span> token</span><br><span class="line">	token_len=<span class="variable">${#token}</span></span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$token_len</span> -ne 32 ]; <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"é•¿åº¦ä¸å¯¹,é˜¿é‡Œäº‘ç›˜ Tokenæ˜¯32ä½é•¿"</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"å®‰è£…åœæ­¢ï¼Œè¯·å‚è€ƒæŒ‡å—é…ç½®æ–‡ä»¶\nhttps://xiaoyaliu.notion.site/xiaoya-docker-69404af849504fa5bcf9f2dd5ecaa75f \n"</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"\033[0m"</span></span><br><span class="line">		<span class="built_in">exit</span></span><br><span class="line">	<span class="keyword">else</span>	</span><br><span class="line">		<span class="built_in">echo</span> <span class="variable">$token</span> &gt; <span class="variable">$V_data</span>/mytoken.txt</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">"\033[0m"</span></span><br><span class="line"><span class="keyword">fi</span>	</span><br><span class="line"></span><br><span class="line">myopentokenfilesize=$(<span class="built_in">cat</span> <span class="variable">$V_data</span>/myopentoken.txt)</span><br><span class="line">myopentokenstringsize=<span class="variable">${#myopentokenfilesize}</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$myopentokenstringsize</span> -le 279 ]; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">"\033[33m"</span></span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">"è¾“å…¥ä½ çš„é˜¿é‡Œäº‘ç›˜ Open Tokenï¼ˆ335ä½é•¿ï¼‰: "</span> opentoken</span><br><span class="line">	opentoken_len=<span class="variable">${#opentoken}</span></span><br><span class="line">        <span class="keyword">if</span> [[ <span class="variable">$opentoken_len</span> -le 334 ]]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"é•¿åº¦ä¸å¯¹,é˜¿é‡Œäº‘ç›˜ Open Tokenæ˜¯335ä½"</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"å®‰è£…åœæ­¢ï¼Œè¯·å‚è€ƒæŒ‡å—é…ç½®æ–‡ä»¶\nhttps://xiaoyaliu.notion.site/xiaoya-docker-69404af849504fa5bcf9f2dd5ecaa75f \n"</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"\033[0m"</span></span><br><span class="line">                <span class="built_in">exit</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        	<span class="built_in">echo</span> <span class="variable">$opentoken</span> &gt; <span class="variable">$V_data</span>/myopentoken.txt</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">"\033[0m"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">folderidfilesize=$(<span class="built_in">cat</span> <span class="variable">$V_data</span>/temp_transfer_folder_id.txt)</span><br><span class="line">folderidstringsize=<span class="variable">${#folderidfilesize}</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$folderidstringsize</span> -le 39 ]; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">"\033[36m"</span></span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">"è¾“å…¥ä½ çš„é˜¿é‡Œäº‘ç›˜è½¬å­˜ç›®å½•folder id: "</span> folderid</span><br><span class="line">	folder_id_len=<span class="variable">${#folderid}</span></span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$folder_id_len</span> -ne 40 ]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"é•¿åº¦ä¸å¯¹,é˜¿é‡Œäº‘ç›˜ folder idæ˜¯40ä½é•¿"</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"å®‰è£…åœæ­¢ï¼Œè¯·å‚è€ƒæŒ‡å—é…ç½®æ–‡ä»¶\nhttps://xiaoyaliu.notion.site/xiaoya-docker-69404af849504fa5bcf9f2dd5ecaa75f \n"</span></span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">"\033[0m"</span></span><br><span class="line">                <span class="built_in">exit</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        	<span class="built_in">echo</span> <span class="variable">$folderid</span> &gt; <span class="variable">$V_data</span>/temp_transfer_folder_id.txt</span><br><span class="line">	<span class="keyword">fi</span>	</span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">"\033[0m"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#echo "new" &gt; /etc/xiaoya/show_my_ali.txt</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">command</span> -v ifconfig &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        localip=$(ifconfig -a|grep inet|grep -v 172.17 | grep -v 127.0.0.1|grep -v inet6|awk <span class="string">'{print $2}'</span>|<span class="built_in">tr</span> -d <span class="string">"addr:"</span>|<span class="built_in">head</span> -n1)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        localip=$(ip address|grep inet|grep -v 172.17 | grep -v 127.0.0.1|grep -v inet6|awk <span class="string">'{print $2}'</span>|<span class="built_in">tr</span> -d <span class="string">"addr:"</span>|<span class="built_in">head</span> -n1|<span class="built_in">cut</span> -f1 -d<span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$1</span> == <span class="string">'host'</span> ]; <span class="keyword">then</span></span><br><span class="line">	<span class="keyword">if</span> [ ! -s <span class="variable">$V_data</span>/docker_address.txt ]; <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"http://<span class="variable">$localip</span>:5678"</span> &gt; <span class="variable">$V_data</span>/docker_address.txt</span><br><span class="line">	<span class="keyword">fi</span>	</span><br><span class="line">	docker stop xiaoya 2&gt;/dev/null</span><br><span class="line">	docker <span class="built_in">rm</span> xiaoya 2&gt;/dev/null</span><br><span class="line">	docker stop xiaoya-hostmode 2&gt;/dev/null</span><br><span class="line">	docker <span class="built_in">rm</span> xiaoya-hostmode 2&gt;/dev/null</span><br><span class="line">	docker rmi xiaoyaliu/alist:hostmode</span><br><span class="line">	docker pull xiaoyaliu/alist:hostmode</span><br><span class="line">	<span class="keyword">if</span> [[ -f <span class="variable">$V_data</span>/proxy.txt ]] &amp;&amp; [[ -s <span class="variable">$V_data</span>/proxy.txt ]]; <span class="keyword">then</span></span><br><span class="line">        	proxy_url=$(<span class="built_in">head</span> -n1 <span class="variable">$V_data</span>/proxy.txt)</span><br><span class="line">		docker create  --<span class="built_in">env</span> HTTP_PROXY=<span class="string">"<span class="variable">$proxy_url</span>"</span> --<span class="built_in">env</span> HTTPS_PROXY=<span class="string">"<span class="variable">$proxy_url</span>"</span> --<span class="built_in">env</span> no_proxy=<span class="string">"*.aliyundrive.com,*.alipan.com"</span> --network=host -v <span class="variable">$V_data</span>:/data -v <span class="variable">$V_data</span>/data:/www/data --restart=always --name=xiaoya xiaoyaliu/alist:hostmode</span><br><span class="line">	<span class="keyword">else</span>	</span><br><span class="line">		docker create  --network=host -v <span class="variable">$V_data</span>:/data -v <span class="variable">$V_data</span>/data:/www/data --restart=always --name=xiaoya xiaoyaliu/alist:hostmode</span><br><span class="line">	<span class="keyword">fi</span>	</span><br><span class="line">	docker start xiaoya</span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -s <span class="variable">$V_data</span>/docker_address.txt ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"http://<span class="variable">$localip</span>:5678"</span> &gt; <span class="variable">$V_data</span>/docker_address.txt</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">docker stop xiaoya 2&gt;/dev/null</span><br><span class="line">docker <span class="built_in">rm</span> xiaoya 2&gt;/dev/null</span><br><span class="line">docker rmi xiaoyaliu/alist:latest </span><br><span class="line">docker pull xiaoyaliu/alist:latest</span><br><span class="line"><span class="keyword">if</span> [[ -f <span class="variable">$V_data</span>/proxy.txt ]] &amp;&amp; [[ -s <span class="variable">$V_data</span>/proxy.txt ]]; <span class="keyword">then</span></span><br><span class="line">	proxy_url=$(<span class="built_in">head</span> -n1 <span class="variable">$V_data</span>/proxy.txt)</span><br><span class="line">       	docker create  -p 5678:80 -p 2345:2345 -p 2346:2346 --<span class="built_in">env</span> HTTP_PROXY=<span class="string">"<span class="variable">$proxy_url</span>"</span> --<span class="built_in">env</span> HTTPS_PROXY=<span class="string">"<span class="variable">$proxy_url</span>"</span> --<span class="built_in">env</span> no_proxy=<span class="string">"*.aliyundrive.com,*.alipan.com"</span> -v <span class="variable">$V_data</span>:/data -v <span class="variable">$V_data</span>/data:/www/data --restart=always --name=xiaoya xiaoyaliu/alist:latest</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	docker create  -p 5678:80 -p 2345:2345 -p 2346:2346 -v <span class="variable">$V_data</span>:/data -v <span class="variable">$V_data</span>/data:/www/data --restart=always --name=xiaoya xiaoyaliu/alist:latest</span><br><span class="line"><span class="keyword">fi</span>	</span><br><span class="line"></span><br><span class="line"><span class="comment">#bash -c "$(curl --ipv4 -sSL http://docker.xiaoya.pro/update_data.sh)" -s --no-upgrade</span></span><br><span class="line">docker start xiaoya</span><br></pre></td></tr></tbody></table></figure>
</details>

<h3 id="3-éªŒè¯å°é›…æ˜¯å¦æŒ‚è½½æˆåŠŸ"><a href="#3-éªŒè¯å°é›…æ˜¯å¦æŒ‚è½½æˆåŠŸ" class="headerlink" title="3. éªŒè¯å°é›…æ˜¯å¦æŒ‚è½½æˆåŠŸ"></a>3. éªŒè¯å°é›…æ˜¯å¦æŒ‚è½½æˆåŠŸ</h3><ul>
<li>æµè§ˆå™¨è®¿é—®<code>ip:5678</code><div class="note info flat"><p>ç¬¬ä¸€æ¬¡å¯åŠ¨éœ€è¦åŠ è½½ï¼Œ3-5åˆ†é’Ÿåæ‰èƒ½æˆåŠŸ<br>ä¹Ÿå¯ä»¥é€šè¿‡æ—¥å¿—æ‰“å°ä¿¡æ¯çœ‹æœ‰æ— é”™è¯¯æç¤º<br>æˆ–åœ¨ç»ˆç«¯æ‰§è¡Œï¼šdocker logs -f xiaoya æ¥æŸ¥çœ‹</p>
</div></li>
</ul>
<hr>
<hr>
<h2 id="ğŸ°-å®‰è£…å°é›…çœ‹æŠ¤-è‡ªåŠ¨æ¸…ç†ç¼“å­˜"><a href="#ğŸ°-å®‰è£…å°é›…çœ‹æŠ¤-è‡ªåŠ¨æ¸…ç†ç¼“å­˜" class="headerlink" title="ğŸ° å®‰è£…å°é›…çœ‹æŠ¤(è‡ªåŠ¨æ¸…ç†ç¼“å­˜)"></a>ğŸ° å®‰è£…å°é›…çœ‹æŠ¤(è‡ªåŠ¨æ¸…ç†ç¼“å­˜)</h2><blockquote>
<p>ä¸ºäº†é˜²æ­¢ç¼“å­˜è¿‡å¤šè€Œå¯¼è‡´äº‘ç›˜çš„ç©ºé—´ä¸è¶³æ‰ä½¿ç”¨xiaoyakeeperå®¹å™¨æ¥å®šæ—¶æ¸…ç†ç¼“å­˜ã€åªè¦äº§ç”Ÿäº†æ’­æ”¾ç¼“å­˜ä¸€åˆ†é’Ÿåç«‹å³æ¸…ç†<br>ä½¿ç”¨å°é›…æ—¶ï¼Œä¼šå…ˆå°†è§†é¢‘ç¼“å­˜åœ¨è‡ªå·±çš„é˜¿é‡Œäº‘ç›˜èµ„æºç›˜çš„<code>xiaoya</code>æ–‡ä»¶å¤¹ä¸­(è¿™ä¸ªxiaoyaæ–‡ä»¶å¤¹æ˜¯åœ¨äº‘ç›˜ä¸­æ–°å»ºçš„)ã€‚<br>å°é›…çœ‹æŠ¤xiaoyakeeperè‡ªåŠ¨åˆ é™¤ç¼“å­˜ï¼Œåªè¦äº§ç”Ÿäº†æ’­æ”¾ç¼“å­˜ä¸€åˆ†é’Ÿåç«‹å³æ¸…ç†ã€‚</p>
</blockquote>
<h3 id="1-å®‰è£…å‘½ä»¤"><a href="#1-å®‰è£…å‘½ä»¤" class="headerlink" title="1. å®‰è£…å‘½ä»¤"></a>1. å®‰è£…å‘½ä»¤</h3><blockquote>
<p>é‡Œé¢çš„å‚æ•°å¯ä»¥ä¸ä¿®æ”¹é»˜è®¤å³å¯<br>â€œå¦‚æœç½‘ç»œé—®é¢˜ï¼Œä¸‹è½½è„šæœ¬å¤±è´¥ï¼Œè¯·å¤šå°è¯•å‡ æ¬¡ã€æ­å»ºé­”æ³•å®‰è£…æˆ–ä¸‹è½½TGç¾¤æ–‡ä»¶ä¸­çš„aliyun_clear.shç¦»çº¿å®‰è£…ï¼š<br>æ‰§è¡Œï¼šbash ./aliyun_clear.sh 5ï¼Œå…¶ä¸­å‚æ•°â€œ5â€æ˜¯æŒ‡æ¨¡å¼5ï¼Œå¯ä»¥æ”¹ä¸ºå…¶å®ƒæ¨¡å¼â€</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">bash -c <span class="string">"<span class="subst">$(curl -s https://xiaoyahelper.zengge99.eu.org/aliyun_clear.sh | tail -n +2)</span>"</span> -s 5 -tg</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯¥è„šæœ¬æœ‰5ç§æ¨¡å¼ `-s 5` æ˜¯ç¬¬5ç§æ¨¡å¼ï¼š</span></span><br><span class="line"><span class="comment">#å»ºè®®ä½¿ç”¨ç¬¬3ç§æˆ–ç¬¬5ç§æ¨¡å¼</span></span><br><span class="line"><span class="comment">#æ¨¡å¼ 5 æ˜¯åˆ é™¤ä¸€åˆ†é’Ÿå‰çš„ç¼“å­˜</span></span><br><span class="line"><span class="comment">#æ¨¡å¼3æˆ–4 æ˜¯æ°¸ä¸åˆ é™¤ç¼“å­˜</span></span><br><span class="line"><span class="comment">#æ¨¡å¼2å·²ä¸å¯ç”¨</span></span><br></pre></td></tr></tbody></table></figure>
<mark class="hl-label default">è¯¦ç»†è„šæœ¬å¦‚ä¸‹</mark> 
<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">ver=<span class="string">"202404270924"</span></span><br><span class="line"></span><br><span class="line">upgrade_url=<span class="string">"http://xiaoyahelper.zengge99.eu.org/aliyun_clear.sh"</span></span><br><span class="line">upgrade_url_backup=<span class="string">"https://xiaoyahelper.ddsrem.com/aliyun_clear.sh"</span></span><br><span class="line">tg_push_api_url=<span class="string">"https://xiaoyapush.ddsrem.com"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">hash_function</span></span>() {</span><br><span class="line">    str=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    <span class="built_in">hash</span>=0</span><br><span class="line"></span><br><span class="line">    <span class="comment"># DJB2 hash algorithm</span></span><br><span class="line">    i=0</span><br><span class="line">    <span class="keyword">while</span> [ <span class="string">"<span class="variable">$i</span>"</span> -lt <span class="string">"<span class="variable">${#str}</span>"</span> ]; <span class="keyword">do</span></span><br><span class="line">        char=$(<span class="built_in">printf</span> <span class="string">"%s"</span> <span class="string">"<span class="variable">$str</span>"</span> | <span class="built_in">cut</span> -c <span class="string">"<span class="subst">$((i + 1)</span>)"</span>)</span><br><span class="line">        char_value=$(<span class="built_in">printf</span> <span class="string">"%d"</span> <span class="string">"'<span class="variable">$char</span>"</span>)</span><br><span class="line">        <span class="built_in">hash</span>=$(((hash * <span class="number">33</span>) ^ char_value))</span><br><span class="line">        <span class="built_in">hash</span>=$((hash &amp; <span class="number">0</span>xFFFFFF))</span><br><span class="line">        i=$((i + <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">hash</span>=$((hash &amp; <span class="number">0</span>xFFFFFF)) <span class="comment"># 4-byte integer (32-bit)</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$hash</span>"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># Function to convert a 4-byte integer to IP address</span></span><br><span class="line"><span class="function"><span class="title">int_to_ip</span></span>() {</span><br><span class="line">    ip=<span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> 0 1 2 3; <span class="keyword">do</span></span><br><span class="line">        octet=$(((<span class="variable">$1</span> &gt;&gt; (<span class="number">8</span> * (<span class="number">3</span> - i))) &amp; 0xFF))</span><br><span class="line">        <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$ip</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">            ip=<span class="string">"<span class="variable">$octet</span>"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ip=<span class="string">"<span class="variable">$ip</span>.<span class="variable">$octet</span>"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$ip</span>"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># Function to hash a string and convert it to IP address</span></span><br><span class="line"><span class="function"><span class="title">hash_to_ip</span></span>() {</span><br><span class="line">    input_string=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    hashed_value=$(hash_function <span class="string">"<span class="variable">$input_string</span>"</span>)</span><br><span class="line">    hashed_ip=$(int_to_ip <span class="string">"<span class="variable">$hashed_value</span>"</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$hashed_ip</span>"</span> | sed <span class="string">'s/^0\./1\./g'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">fast_triger_update</span></span>() {</span><br><span class="line">    <span class="keyword">if</span> [ ! -f /docker-entrypoint.sh ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ ! $(($(date +%-M) % <span class="number">5</span>)) -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$sche</span>"</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        local_ip_ver=<span class="string">"<span class="subst">$(hash_to_ip <span class="string">"<span class="variable">$ver</span>"</span>)</span>"</span></span><br><span class="line">        remote_ip_ver=<span class="string">"<span class="subst">$(ping -c 1 -W 1 xiaoyakeeper.u.1996999.xyz 2&gt;&amp;1 | grep -Eo <span class="string">"[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}"</span> | head -n1 | grep <span class="string">"^1\."</span>)</span>"</span></span><br><span class="line">        <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$remote_ip_ver</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">return</span> 0</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">"<span class="variable">$local_ip_ver</span>"</span>x = <span class="string">"<span class="variable">$remote_ip_ver</span>"</span>x ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">return</span> 0</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    newsh=$(curl --connect-timeout 5 -m 5 -k -s <span class="string">"<span class="variable">$upgrade_url</span>"</span> 2&gt;/dev/null)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$newsh</span>"</span> | grep <span class="string">"^#!/bin/bash"</span>)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        newsh=$(curl --connect-timeout 5 -m 5 -k -s <span class="string">"<span class="variable">$upgrade_url_backup</span>"</span> 2&gt;/dev/null)</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    latest_ver=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$newsh</span>"</span> | grep <span class="string">"^ver="</span> | <span class="built_in">tr</span> -d <span class="string">'"ver='</span>)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$latest_ver</span>"</span>x = x ] || [ <span class="string">"<span class="variable">$ver</span>"</span>x = <span class="string">"<span class="variable">$latest_ver</span>"</span>x ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    myecho <span class="string">"æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬<span class="variable">$latest_ver</span>ï¼Œå³å°†è‡ªåŠ¨é‡å¯å®¹å™¨å‡çº§ï¼Œé‡å¯å‰ä¼šè¡¥åšä¸€æ¬¡ç­¾åˆ°å’Œæ¸…ç†"</span></span><br><span class="line"></span><br><span class="line">    clear_aliyun_all_docker_pre_update</span><br><span class="line">    <span class="built_in">sleep</span> 60</span><br><span class="line">    <span class="comment">#docker restart xiaoyakeeper</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">g_p=<span class="variable">$@</span></span><br><span class="line"><span class="function"><span class="title">para</span></span>() {</span><br><span class="line">    i=$(<span class="built_in">echo</span> ~<span class="variable">$1</span> | <span class="built_in">tr</span> -d <span class="string">'~'</span> | <span class="built_in">tr</span> <span class="string">'-'</span> <span class="string">'~'</span>)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="subst">$(echo ~$g_p | tr -d '~' | tr '-' '~' | grep -Eo <span class="string">"<span class="variable">$i</span>"</span>)</span>"</span>x = x ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">retry_command</span></span>() {</span><br><span class="line">    <span class="comment"># é‡è¯•æ¬¡æ•°å’Œæœ€å¤§é‡è¯•æ¬¡æ•°</span></span><br><span class="line">    retries=0</span><br><span class="line">    max_retries=10</span><br><span class="line">    <span class="built_in">local</span> cmd=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    <span class="built_in">local</span> success=<span class="literal">false</span></span><br><span class="line">    <span class="built_in">local</span> output=<span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ! <span class="variable">$success</span> &amp;&amp; [ <span class="variable">$retries</span> -lt <span class="variable">$max_retries</span> ]; <span class="keyword">do</span></span><br><span class="line">        output=$(<span class="built_in">eval</span> <span class="string">"<span class="variable">$cmd</span>"</span> 2&gt;&amp;1)</span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            success=<span class="literal">true</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            retries=$((<span class="variable">$retries</span> + <span class="number">1</span>))</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"#Failed to execute command \"<span class="subst">$(echo <span class="string">"<span class="variable">$cmd</span>"</span> | awk '{print $1}')</span>\", retrying in 1 seconds (retry <span class="variable">$retries</span> of <span class="variable">$max_retries</span>)..."</span> &gt;&amp;2</span><br><span class="line">            <span class="built_in">sleep</span> 1</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="variable">$success</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$output</span>"</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"#Failed to execute command after <span class="variable">$max_retries</span> retries: <span class="variable">$cmd</span>"</span> &gt;&amp;2</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"#Command output: <span class="variable">$output</span>"</span> &gt;&amp;2</span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æŸ¥è„šæœ¬æ›´æ–°</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">which</span> curl &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">    newsh=$(retry_command <span class="string">"curl --connect-timeout 5 -m 5 -k -s \"<span class="variable">$upgrade_url</span>\" 2&gt;/dev/null"</span>)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$newsh</span>"</span> | grep <span class="string">"^#!/bin/bash"</span>)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        newsh=$(retry_command <span class="string">"curl --connect-timeout 5 -m 5 -k -s \"<span class="variable">$upgrade_url_backup</span>\" 2&gt;/dev/null"</span>)</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">latest_ver=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$newsh</span>"</span> | grep <span class="string">"^ver="</span> | <span class="built_in">tr</span> -d <span class="string">'"ver='</span>)</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="string">"<span class="variable">$latest_ver</span>"</span>x = x ] &amp;&amp; [ ! <span class="string">"<span class="variable">$ver</span>"</span>x = <span class="string">"<span class="variable">$latest_ver</span>"</span>x ]; <span class="keyword">then</span></span><br><span class="line">    filename=<span class="variable">${0}</span></span><br><span class="line">    <span class="built_in">dir</span>=$(<span class="built_in">dirname</span> <span class="string">"<span class="variable">$filename</span>"</span>)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$dir</span>"</span>x = x ]; <span class="keyword">then</span></span><br><span class="line">        filename=<span class="string">"./<span class="variable">$filename</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ ! <span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$dir</span>"</span> | awk -F/ '{print $1}')</span>"</span>x = x ]; <span class="keyword">then</span></span><br><span class="line">        filename=<span class="string">"./<span class="variable">$filename</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    shell_cmd=<span class="string">"sh"</span></span><br><span class="line">    <span class="built_in">which</span> <span class="string">"bash"</span> &gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        shell_cmd=<span class="string">"bash"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">"<span class="subst">$(cat <span class="string">"<span class="variable">$filename</span>"</span> | head -n 1 | grep <span class="string">"^#!/bin/bash"</span>)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$newsh</span>"</span> &gt;<span class="string">"<span class="variable">$filename</span>"</span></span><br><span class="line">        <span class="built_in">chmod</span> +x <span class="string">"<span class="variable">$filename</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è„šæœ¬å·²è‡ªåŠ¨æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬<span class="variable">$latest_ver</span>"</span></span><br><span class="line">        <span class="variable">$shell_cmd</span> <span class="variable">$filename</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_Header</span></span>() {</span><br><span class="line">    response=$(curl --connect-timeout 5 -m 5 -s -H <span class="string">"Content-Type: application/json"</span> \</span><br><span class="line">        -d <span class="string">'{"grant_type":"refresh_token", "refresh_token":"'</span><span class="variable">$refresh_token</span><span class="string">'"}'</span> \</span><br><span class="line">        https://api.aliyundrive.com/v2/account/token)</span><br><span class="line"></span><br><span class="line">    access_token=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$response</span>"</span> | sed -n <span class="string">'s/.*"access_token":"\([^"]*\).*/\1/p'</span>)</span><br><span class="line"></span><br><span class="line">    HEADER=<span class="string">"Authorization: Bearer <span class="variable">$access_token</span>"</span></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$HEADER</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è·å–access tokenå¤±è´¥"</span> &gt;&amp;2</span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    response=<span class="string">"<span class="subst">$(curl --connect-timeout 5 -m 5 -s -H <span class="string">"<span class="variable">$HEADER</span>"</span> -H <span class="string">"Content-Type: application/json"</span> -X POST -d '{}' <span class="string">"https://user.aliyundrive.com/v2/user/get"</span>)</span>"</span></span><br><span class="line"></span><br><span class="line">    lagacy_drive_id=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$response</span>"</span> | sed -n <span class="string">'s/.*"default_drive_id":"\([^"]*\).*/\1/p'</span>)</span><br><span class="line"></span><br><span class="line">    drive_id=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$response</span>"</span> | sed -n <span class="string">'s/.*"resource_drive_id":"\([^"]*\).*/\1/p'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$drive_id</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        drive_id=<span class="variable">$lagacy_drive_id</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$folder_type</span>"</span>x = <span class="string">"b"</span>x ]; <span class="keyword">then</span></span><br><span class="line">        drive_id=<span class="variable">$lagacy_drive_id</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$drive_id</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è·å–drive_idå¤±è´¥"</span> &gt;&amp;2</span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"HEADER=\"<span class="variable">$HEADER</span>\""</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"drive_id=\"<span class="variable">$drive_id</span>\""</span></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_rawList</span></span>() {</span><br><span class="line">    waittime=10</span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$1</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        waittime=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    _res=$(curl --connect-timeout 5 -m 5 -s -H <span class="string">"<span class="variable">$HEADER</span>"</span> -H <span class="string">"Content-Type: application/json"</span> -X POST -d <span class="string">'{"drive_id": "'</span><span class="variable">$drive_id</span><span class="string">'","parent_file_id": "'</span><span class="variable">$file_id</span><span class="string">'"}'</span> <span class="string">"https://api.aliyundrive.com/adrive/v2/file/list"</span>)</span><br><span class="line">    <span class="keyword">if</span> [ ! $? -eq 0 ] || [ -z <span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$_res</span>"</span> | grep <span class="string">"items"</span>)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥ï¼šfolder_id=<span class="variable">$file_id</span>,drive_id=<span class="variable">$drive_id</span>"</span> &gt;&amp;2</span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$_res</span>"</span></span><br><span class="line">    <span class="comment">#ç®€å•è§„é¿å°é›…è½¬å­˜åè¿˜æ²¡æ¥å¾—åŠè·å–ç›´é“¾å°±è¢«åˆ é™¤çš„é—®é¢˜ï¼Œé™ä½å‘ç”Ÿæ¦‚ç‡</span></span><br><span class="line">    <span class="built_in">sleep</span> <span class="string">"<span class="variable">$waittime</span>"</span></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_List</span></span>() {</span><br><span class="line">    _res=<span class="variable">$raw_list</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#echo "$_res" | tr '{' '\n' | grep -v "folder" | grep -o "\"file_id\":\"[^\"]*\"" | cut -d':' -f2- | tr -d '"'</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$_res</span>"</span> | <span class="built_in">tr</span> <span class="string">'{'</span> <span class="string">'\n'</span> | grep -o <span class="string">"\"file_id\":\"[^\"]*\""</span> | <span class="built_in">cut</span> -d<span class="string">':'</span> -f2- | <span class="built_in">tr</span> -d <span class="string">'"'</span></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_Path</span></span>() {</span><br><span class="line">    _path=<span class="string">"<span class="subst">$(curl --connect-timeout 5 -m 5 -s -H <span class="string">"<span class="variable">$HEADER</span>"</span> -H <span class="string">"Content-Type: application/json"</span> -X POST -d <span class="string">"{\"drive_id\": \"<span class="variable">$drive_id</span>\", \"file_id\": \"<span class="variable">$file_id</span>\"}"</span> <span class="string">"https://api.aliyundrive.com/adrive/v1/file/get_path"</span> | grep -o <span class="string">"\"name\":\"[^\"]*\""</span> | cut -d':' -f2- | tr -d '<span class="string">"' | tr '\n' '/' | awk -F'/' '{for(i=NF-1;i&gt;0;i--){printf("</span>/%s<span class="string">",<span class="variable">$i</span>)}; printf("</span>%s\n<span class="string">",<span class="variable">$NF</span>)}')"</span></span></span></span><br><span class="line"><span class="subst"><span class="string">    if [ -z <span class="string">"<span class="variable">$_path</span>"</span> ]; then</span></span></span><br><span class="line"><span class="subst"><span class="string">        return 1</span></span></span><br><span class="line"><span class="subst"><span class="string">    fi</span></span></span><br><span class="line"><span class="subst"><span class="string">    echo <span class="string">"<span class="variable">$_path</span>"</span></span></span></span><br><span class="line"><span class="subst"><span class="string">    return 0</span></span></span><br><span class="line"><span class="subst"><span class="string">}</span></span></span><br><span class="line"><span class="subst"><span class="string"></span></span></span><br><span class="line"><span class="subst"><span class="string">delete_File()</span> {</span></span><br><span class="line"><span class="string">    _file_id=<span class="variable">$1</span></span></span><br><span class="line"><span class="string">    _name="</span>$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$raw_list</span>"</span> | grep -o <span class="string">"\"name\":\"[^\"]*\""</span> | <span class="built_in">cut</span> -d<span class="string">':'</span> -f2- | <span class="built_in">tr</span> -d <span class="string">'"'</span> | grep -n . | grep <span class="string">"^<span class="subst">$(echo <span class="string">"<span class="variable">$raw_list</span>"</span> | grep -o <span class="string">"\"file_id\":\"[^\"]*\""</span> | cut -d':' -f2- | tr -d '<span class="string">"' | grep -n . | grep "</span>$_file_id<span class="string">" | awk -F: '{print <span class="variable">$1</span>}'):"</span> | awk -F: '{print $2}')</span>"</span></span><br><span class="line"></span><br><span class="line">    _res=$(curl --connect-timeout 5 -m 5 -s -H <span class="string">"<span class="variable">$HEADER</span>"</span> -H <span class="string">"Content-Type: application/json"</span> -X POST -d <span class="string">'{</span></span><br><span class="line"><span class="string">  "requests": [</span></span><br><span class="line"><span class="string">    {</span></span><br><span class="line"><span class="string">      "body": {</span></span><br><span class="line"><span class="string">        "drive_id": "'</span><span class="variable">$drive_id</span><span class="string">'",</span></span><br><span class="line"><span class="string">        "file_id": "'</span><span class="variable">$_file_id</span><span class="string">'"</span></span><br><span class="line"><span class="string">      },</span></span><br><span class="line"><span class="string">      "headers": {</span></span><br><span class="line"><span class="string">        "Content-Type": "application/json"</span></span><br><span class="line"><span class="string">      },</span></span><br><span class="line"><span class="string">      "id": "'</span><span class="variable">$_file_id</span><span class="string">'",</span></span><br><span class="line"><span class="string">      "method": "POST",</span></span><br><span class="line"><span class="string">      "url": "/file/delete"</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  ],</span></span><br><span class="line"><span class="string">  "resource": "file"</span></span><br><span class="line"><span class="string">}'</span> <span class="string">"https://api.aliyundrive.com/v3/batch"</span> | grep <span class="string">"\"status\":204"</span>)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$_res</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    drive_root=<span class="string">"èµ„æºç›˜"</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$folder_type</span>"</span>x = <span class="string">"b"</span>x ]; <span class="keyword">then</span></span><br><span class="line">        drive_root=<span class="string">"å¤‡ä»½ç›˜"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    myecho <span class="string">"å½»åº•åˆ é™¤æ–‡ä»¶ï¼š/$drive_root<span class="variable">$path</span>/<span class="variable">$_name</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_docker_info</span></span>() {</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$1</span>"</span>x != x ]; <span class="keyword">then</span></span><br><span class="line">        get_docker_info | awk <span class="string">'"'</span><span class="variable">$1</span><span class="string">'"==$1'</span></span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    images=$(docker images --no-trunc)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> $(docker ps | <span class="built_in">tail</span> -n +2 | grep -v <span class="string">"xiaoyakeeper"</span> | awk <span class="string">'{print $NF}'</span>); <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">id</span>=$(docker inspect --format=<span class="string">'{{.Image}}'</span> <span class="variable">$line</span> | awk -F: <span class="string">'{print $2}'</span>)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$line</span> <span class="subst">$(echo <span class="string">"<span class="variable">$images</span>"</span> | grep $id | head -n 1)</span>"</span> | <span class="built_in">tr</span> <span class="string">':'</span> <span class="string">' '</span> | awk <span class="string">'{printf("%s %s %s\n",$1,$2,$5)}'</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_Xiaoya</span></span>() {</span><br><span class="line">    get_docker_info | grep <span class="string">"xiaoyaliu/alist\|haroldli/xiaoya-tvbox\|ailg/alist"</span> | awk <span class="string">'{print $1}'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­¾åˆ°æ˜¯æŠ„å°é›…çš„</span></span><br><span class="line"><span class="function"><span class="title">get_json_value</span></span>() {</span><br><span class="line">    <span class="built_in">local</span> json=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">local</span> key=<span class="variable">$2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [[ -z <span class="string">"<span class="variable">$3</span>"</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">local</span> num=1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">local</span> num=<span class="variable">$3</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">local</span> value=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">${json}</span>"</span> | awk -F<span class="string">"[,:}]"</span> <span class="string">'{for(i=1;i&lt;=NF;i++){if($i~/'</span><span class="variable">${key}</span><span class="string">'\042/){print $(i+1)}}}'</span> | <span class="built_in">tr</span> -d <span class="string">'"'</span> | sed -n <span class="variable">${num}</span>p)</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">${value}</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_Reward</span></span>() {</span><br><span class="line">    _res=$(curl --connect-timeout 5 -m 5 -s -H <span class="string">"<span class="variable">$HEADER</span>"</span> -H <span class="string">"Content-Type: application/json"</span> -X POST -d <span class="string">'{"signInDay": '</span><span class="variable">$day</span><span class="string">'}'</span> <span class="string">"https://member.aliyundrive.com/v1/activity/sign_in_reward?_rx-s=mobile"</span> | grep <span class="string">"success"</span>)</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$_res</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        reurn 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    _name=$(get_json_value <span class="string">"<span class="variable">$_res</span>"</span> <span class="string">"name"</span>)</span><br><span class="line">    _dsc=$(get_json_value <span class="string">"<span class="variable">$_res</span>"</span> <span class="string">"description"</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$_name</span>-<span class="variable">$_dsc</span>"</span> | <span class="built_in">tr</span> -d <span class="string">' '</span></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">checkin</span></span>() {</span><br><span class="line">    <span class="built_in">local</span> _refresh_token=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">local</span> _token=$(curl --connect-timeout 5 -m 5 -s -X POST -H <span class="string">"Content-Type: application/json"</span> -d <span class="string">'{"grant_type": "refresh_token", "refresh_token":                 "'</span><span class="string">"<span class="variable">$_refresh_token</span>"</span><span class="string">'"}'</span> https://auth.aliyundrive.com/v2/account/token)</span><br><span class="line">    <span class="built_in">local</span> _access_token=$(get_json_value <span class="variable">$_token</span> <span class="string">"access_token"</span>)</span><br><span class="line"></span><br><span class="line">    nick_name=$(get_json_value <span class="variable">$_token</span> <span class="string">"nick_name"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$nick_name</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        nick_name=<span class="string">"é˜¿é‡Œäº‘ç›˜"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    _output=<span class="string">"\n[<span class="subst">$(date '+%Y/%m/%d %H:%M:%S')</span>][<span class="variable">$nick_name</span>]çš„ç­¾åˆ°ä¿¡æ¯"</span></span><br><span class="line"></span><br><span class="line">    HEADER=<span class="string">"Authorization:Bearer <span class="variable">$_access_token</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">local</span> _sign=$(curl --connect-timeout 5 -m 5 -s -X POST -H <span class="string">"Content-Type: application/json"</span> -H <span class="string">"<span class="variable">$HEADER</span>"</span> -d <span class="string">'{"grant_type":           "refresh_token", "refresh_token": "'</span><span class="string">"<span class="variable">$_refresh_token</span>"</span><span class="string">'"}'</span> https://member.aliyundrive.com/v1/activity/sign_in_list)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">local</span> _fmt_sign=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$_sign</span>"</span> | <span class="built_in">tr</span> -d <span class="string">'\n'</span> | sed <span class="string">'s/{"day"/\n{"day"/g'</span> | <span class="built_in">tr</span> -d <span class="string">' '</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">local</span> _days=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$_fmt_sign</span>"</span> | grep <span class="string">'"status":"normal"'</span> | grep <span class="string">'"isReward":false'</span> | grep -Eo <span class="string">'"day":[0-9]{1,2}'</span> | awk -F: <span class="string">'{print $2}'</span> | sed <span class="string">'/^$/d'</span>)</span><br><span class="line"></span><br><span class="line">    _today_cards=<span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> day <span class="keyword">in</span> <span class="variable">$_days</span>; <span class="keyword">do</span></span><br><span class="line">        _today_cards=<span class="string">"<span class="variable">$_today_cards</span>\n<span class="subst">$(retry_command <span class="string">"get_Reward"</span> | grep <span class="string">"-"</span>)</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    raw_cards=$(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$_today_cards</span>"</span> | <span class="built_in">tr</span> -d <span class="string">' '</span>)</span><br><span class="line">    _card=<span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> card <span class="keyword">in</span> $(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$raw_cards</span>"</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> | grep -v null); <span class="keyword">do</span></span><br><span class="line">        _card=<span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$_card</span>\n--<span class="variable">$card</span>ï¼š<span class="subst">$(echo -e <span class="string">"<span class="variable">$raw_cards</span>"</span> | grep <span class="string">"<span class="variable">$card</span>"</span> | wc -l)</span>å¼ "</span>)</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">"<span class="subst">$(echo -e <span class="string">"<span class="variable">$_today_cards</span>"</span> | tr -d ' ' | sed '/^$/d')</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        _output=<span class="string">"<span class="variable">$_output</span>\n<span class="subst">$(echo -e <span class="string">"ä»Šæ—¥è·å¾—å¥–åŠ±ï¼š\n<span class="variable">$_card</span>"</span> | sed '/^$/d')</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    _cards=<span class="variable">$_today_cards</span></span><br><span class="line">    <span class="keyword">for</span> day <span class="keyword">in</span> $(<span class="built_in">echo</span> <span class="string">"<span class="variable">$_fmt_sign</span>"</span> | grep -v <span class="string">'"status":"miss"'</span> | grep -Eo <span class="string">'"day":[0-9]{1,2}'</span>); <span class="keyword">do</span></span><br><span class="line">        day_sign=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$_fmt_sign</span>"</span> | grep <span class="string">"<span class="variable">$day</span>"</span>)</span><br><span class="line">        _cards=<span class="string">"<span class="variable">$_cards</span>\n"</span><span class="string">"<span class="subst">$(get_json_value <span class="string">"<span class="variable">$day_sign</span>"</span> <span class="string">"name"</span>)</span>"</span>-<span class="string">"<span class="subst">$(get_json_value <span class="string">"<span class="variable">$day_sign</span>"</span> <span class="string">"description"</span>)</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    raw_cards=$(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$_cards</span>"</span> | <span class="built_in">tr</span> -d <span class="string">' '</span>)</span><br><span class="line">    _card=<span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> card <span class="keyword">in</span> $(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$raw_cards</span>"</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> | grep -v null); <span class="keyword">do</span></span><br><span class="line">        _card=<span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$_card</span>\n--<span class="variable">$card</span>ï¼š<span class="subst">$(echo -e <span class="string">"<span class="variable">$raw_cards</span>"</span> | grep <span class="string">"<span class="variable">$card</span>"</span> | wc -l)</span>å¼ "</span>)</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">local</span> _signInCount=$(get_json_value <span class="string">"<span class="variable">$_sign</span>"</span> <span class="string">"signInCount"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">local</span> _success=$(<span class="built_in">echo</span> <span class="variable">$_sign</span> | <span class="built_in">cut</span> -f1 -d, | <span class="built_in">cut</span> -f2 -d:)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$_success</span>"</span>x = <span class="string">"true"</span>x ]; <span class="keyword">then</span></span><br><span class="line">        _output=<span class="string">"<span class="variable">$_output</span>\n<span class="subst">$(echo -e <span class="string">"æœ¬æœˆç´¯è®¡ç­¾åˆ°<span class="variable">$_signInCount</span>å¤©ï¼Œè·å¾—å¥–åŠ±ï¼š\n<span class="variable">$_card</span>"</span> | sed '/^$/d')</span>"</span></span><br><span class="line">        myecho -e <span class="string">"<span class="variable">$_output</span>"</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"é˜¿é‡Œç­¾åˆ°å¤±è´¥"</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">aliyun_update_checkin_single</span></span>() {</span><br><span class="line">    tokens=<span class="string">"<span class="subst">$(retry_command <span class="string">"read_File <span class="variable">$1</span>"</span>)</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$tokens</span>"</span> | sed <span class="string">'/^$/d'</span> | <span class="keyword">while</span> <span class="built_in">read</span> token; <span class="keyword">do</span></span><br><span class="line">        retry_command <span class="string">"checkin <span class="variable">$token</span>"</span></span><br><span class="line">        response=$(curl --connect-timeout 5 -m 5 -s -H <span class="string">"Content-Type: application/json"</span> \</span><br><span class="line">            -d <span class="string">'{"grant_type":"refresh_token", "refresh_token":"'</span><span class="variable">$token</span><span class="string">'"}'</span> \</span><br><span class="line">            https://api.aliyundrive.com/v2/account/token)</span><br><span class="line">        new_refresh_token=$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$response</span>"</span> | sed -n <span class="string">'s/.*"refresh_token":"\([^"]*\).*/\1/p'</span>)</span><br><span class="line">        <span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$new_refresh_token</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">            docker <span class="built_in">exec</span> <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> sed -i <span class="string">'s/'</span><span class="string">"<span class="variable">$token</span>"</span><span class="string">'/'</span><span class="string">"<span class="variable">$new_refresh_token</span>"</span><span class="string">'/g'</span> <span class="string">"/data/<span class="variable">$1</span>"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">aliyun_update_checkin</span></span>() {</span><br><span class="line">    aliyun_update_checkin_single <span class="string">"mycheckintoken.txt"</span></span><br><span class="line">    aliyun_update_checkin_single <span class="string">"mytoken.txt"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">_clear_aliyun</span></span>() {</span><br><span class="line">    <span class="comment">#eval "$(retry_command "get_Header")"</span></span><br><span class="line">    raw_list=$(retry_command <span class="string">"get_rawList"</span>)</span><br><span class="line">    path=$(retry_command <span class="string">"get_Path"</span>)</span><br><span class="line">    _list=<span class="string">"<span class="subst">$(get_List)</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$_list</span>"</span> | sed <span class="string">'/^$/d'</span> | <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">        retry_command <span class="string">"delete_File \"<span class="variable">$line</span>\""</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    <span class="built_in">return</span> <span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$_list</span>"</span> | sed '/^$/d' | wc -l)</span>"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">clear_aliyun</span></span>() {</span><br><span class="line">    <span class="built_in">eval</span> <span class="string">"<span class="subst">$(retry_command <span class="string">"get_Header"</span>)</span>"</span></span><br><span class="line">    raw_list=$(retry_command <span class="string">"get_rawList 0"</span>)</span><br><span class="line">    _list=<span class="string">"<span class="subst">$(get_List)</span>"</span></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$_list</span>"</span> | sed '/^$/d')</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    myecho -e <span class="string">"\n[<span class="subst">$(date '+%Y/%m/%d %H:%M:%S')</span>]å¼€å§‹æ¸…ç†å°é›…<span class="variable">$XIAOYA_NAME</span>è½¬å­˜"</span></span><br><span class="line"></span><br><span class="line">    _res=1</span><br><span class="line">    _filenum=0</span><br><span class="line">    <span class="keyword">while</span> [ ! <span class="variable">$_res</span> -eq 0 ]; <span class="keyword">do</span></span><br><span class="line">        _clear_aliyun</span><br><span class="line">        _res=$?</span><br><span class="line">        _filenum=$((<span class="variable">$_filenum</span> + <span class="variable">$_res</span>))</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    myecho <span class="string">"æœ¬æ¬¡å…±æ¸…ç†å°é›…<span class="variable">$XIAOYA_NAME</span>è½¬å­˜æ–‡ä»¶<span class="variable">$_filenum</span>ä¸ª"</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_PostCmd</span></span>() {</span><br><span class="line">    pos=$(read_File mycmd.txt | grep -n <span class="string">"#xiaoyakeeper-<span class="variable">$XIAOYA_NAME</span>-begin\|#xiaoyakeeper-<span class="variable">$XIAOYA_NAME</span>-end"</span> | awk -F: <span class="string">'{print $1}'</span>)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$pos</span>"</span> | wc -l)</span>"</span> -lt 2 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    pos=<span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$pos</span>"</span> | tr '\n' ':')</span>"</span></span><br><span class="line">    begin=<span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$pos</span>"</span> | awk -F: '{print $1}')</span>"</span></span><br><span class="line">    end=<span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$pos</span>"</span> | awk -F: '{print $2}')</span>"</span></span><br><span class="line">    read_File mycmd.txt | <span class="built_in">head</span> -n <span class="string">"<span class="variable">$end</span>"</span> | <span class="built_in">tail</span> -n +<span class="string">"<span class="variable">$begin</span>"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">init_para</span></span>() {</span><br><span class="line">    XIAOYA_NAME=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    refresh_token=<span class="string">"<span class="subst">$(retry_command <span class="string">"read_File mytoken.txt"</span> | head -n1)</span>"</span></span><br><span class="line"></span><br><span class="line">    post_cmd=<span class="string">"<span class="subst">$(get_PostCmd)</span>"</span></span><br><span class="line">    <span class="comment">#if [ -z "$post_cmd" ];then</span></span><br><span class="line">    <span class="comment">#post_cmd='docker restart "'$XIAOYA_NAME'" &gt;/dev/null 2&gt;&amp;1'</span></span><br><span class="line">    <span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line">    file_id=$(retry_command <span class="string">"read_File temp_transfer_folder_id.txt"</span>)</span><br><span class="line"></span><br><span class="line">    folder_type=$(read_File <span class="string">"folder_type.txt"</span>)</span><br><span class="line"></span><br><span class="line">    _file_time=<span class="string">"<span class="subst">$(retry_command <span class="string">"read_File myruntime.txt"</span> | grep -Eo <span class="string">"[0-9]{2}:[0-9]{2}"</span> | tr '\n' ' ')</span>"</span></span><br><span class="line"></span><br><span class="line">    chat_id=<span class="string">"<span class="subst">$(retry_command <span class="string">"read_File mychatid.txt"</span>)</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"  chat_id:<span class="variable">$chat_id</span>  "</span> &gt;&amp;6</span><br><span class="line"></span><br><span class="line">    run_time=<span class="string">"<span class="variable">$script_run_time</span>"</span></span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$_file_time</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        run_time=<span class="string">"<span class="variable">$_file_time</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">clear_aliyun_realtime</span></span>() {</span><br><span class="line">    xiaoya_name=<span class="string">"<span class="subst">$(echo <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> | tr '-' '_')</span>"</span></span><br><span class="line">    <span class="comment">#eval "_file_count_new_$xiaoya_name=$(docker logs $XIAOYA_NAME 2&gt;&amp;1 | grep https | grep security-token | wc -l)"</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="string">"_file_count_new_<span class="variable">$xiaoya_name</span>=<span class="subst">$(docker logs $XIAOYA_NAME 2&gt;&amp;1 | wc -l)</span>"</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="string">"_file_count_new=\"\$_file_count_new_<span class="variable">$xiaoya_name</span>\""</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="string">"_file_count_old=\"\$_file_count_old_<span class="variable">$xiaoya_name</span>\""</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$_file_count_new</span>"</span>x != <span class="string">"<span class="variable">$_file_count_old</span>"</span>x ]; <span class="keyword">then</span></span><br><span class="line">        clear_aliyun</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="string">"_file_count_old_<span class="variable">$xiaoya_name</span>=\"\$_file_count_new_<span class="variable">$xiaoya_name</span>\""</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">clear_aliyun_single_docker</span></span>() {</span><br><span class="line">    init_para <span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    copy_tvbox_files</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$run_mode</span>"</span> <span class="keyword">in</span></span><br><span class="line">    0)</span><br><span class="line">        <span class="keyword">for</span> time <span class="keyword">in</span> $(<span class="built_in">echo</span> <span class="string">"<span class="variable">$run_time</span>"</span> | <span class="built_in">tr</span> <span class="string">','</span> <span class="string">' '</span>); <span class="keyword">do</span></span><br><span class="line">            <span class="keyword">if</span> [ <span class="string">"<span class="variable">$current_time</span>"</span> = <span class="string">"<span class="variable">$time</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">                clear_aliyun</span><br><span class="line">                aliyun_update_checkin</span><br><span class="line">                <span class="built_in">eval</span> <span class="string">"<span class="variable">$post_cmd</span>"</span></span><br><span class="line">                sche=1</span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        ;;</span><br><span class="line">    55)</span><br><span class="line">        clear_aliyun_realtime</span><br><span class="line">        <span class="keyword">for</span> time <span class="keyword">in</span> $(<span class="built_in">echo</span> <span class="string">"<span class="variable">$run_time</span>"</span> | <span class="built_in">tr</span> <span class="string">','</span> <span class="string">' '</span>); <span class="keyword">do</span></span><br><span class="line">            <span class="keyword">if</span> [ <span class="string">"<span class="variable">$current_time</span>"</span> = <span class="string">"<span class="variable">$time</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">                clear_aliyun</span><br><span class="line">                aliyun_update_checkin</span><br><span class="line">                <span class="built_in">eval</span> <span class="string">"<span class="variable">$post_cmd</span>"</span></span><br><span class="line">                sche=1</span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        ;;</span><br><span class="line">    1)</span><br><span class="line">        clear_aliyun</span><br><span class="line">        aliyun_update_checkin</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">clear_aliyun_all_docker_pre_update</span></span>() {</span><br><span class="line">    org_run_mode=<span class="variable">$run_mode</span></span><br><span class="line">    run_mode=1</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> $(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$dockers</span>"</span> | sed <span class="string">'/^$/d'</span>); <span class="keyword">do</span></span><br><span class="line">        clear_aliyun_single_docker <span class="string">"<span class="variable">$line</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    run_mode=<span class="variable">$org_run_mode</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">clear_aliyun_all_docker</span></span>() {</span><br><span class="line">    dockers=<span class="string">"<span class="subst">$(get_Xiaoya)</span>"</span></span><br><span class="line">    current_time=<span class="string">"<span class="subst">$(date +%H:%M)</span>"</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> $(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$dockers</span>"</span> | sed <span class="string">'/^$/d'</span>); <span class="keyword">do</span></span><br><span class="line">        clear_aliyun_single_docker <span class="string">"<span class="variable">$line</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">copy_tvbox_files</span></span>() {</span><br><span class="line">    docker <span class="built_in">exec</span> <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> bash -c <span class="string">'copy_tvbox_files() {</span></span><br><span class="line"><span class="string">    source_dir="/data"</span></span><br><span class="line"><span class="string">    target_dir1="/www/tvbox"</span></span><br><span class="line"><span class="string">    target_dir2="/www/tvbox/json"</span></span><br><span class="line"><span class="string">    target_dir3="/www/tvbox/libs"</span></span><br><span class="line"><span class="string">    target_dir4="/www/tvbox/cat"</span></span><br><span class="line"><span class="string">    target_dir5="/www/tvbox/cat/libs"</span></span><br><span class="line"><span class="string">    target_dir6="/www/tvbox/cat/lib"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    mkdir -p "$target_dir1"</span></span><br><span class="line"><span class="string">    mkdir -p "$target_dir2"</span></span><br><span class="line"><span class="string">    mkdir -p "$target_dir3"</span></span><br><span class="line"><span class="string">    mkdir -p "$target_dir4"</span></span><br><span class="line"><span class="string">    mkdir -p "$target_dir5"</span></span><br><span class="line"><span class="string">    mkdir -p "$target_dir6"</span></span><br><span class="line"><span class="string">    ali_tiken="$(cat /data/mytoken.txt)"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    copy_files_by_extension() {</span></span><br><span class="line"><span class="string">        local ext=$1</span></span><br><span class="line"><span class="string">        local target_dir=$2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        shopt -s nullglob</span></span><br><span class="line"><span class="string">        local files=("$source_dir"/*."$ext")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        for file in "${files[@]}"; do</span></span><br><span class="line"><span class="string">            file_name=$(basename "$file")</span></span><br><span class="line"><span class="string">            target_file="$target_dir/$file_name"</span></span><br><span class="line"><span class="string">            src_content="$(cat "$file" | sed "s/ALI_SHORT_TOKEN/$ali_tiken/g")"</span></span><br><span class="line"><span class="string">            if [ -f "$target_file" ]; then</span></span><br><span class="line"><span class="string">                dst_content="$(cat "$target_file")"</span></span><br><span class="line"><span class="string">                if [ "$src_content"x != "$dst_content"x ]; then</span></span><br><span class="line"><span class="string">                    echo "$src_content" &gt; "$target_file"</span></span><br><span class="line"><span class="string">                else</span></span><br><span class="line"><span class="string">                    :</span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                echo "$src_content" &gt; "$target_file"</span></span><br><span class="line"><span class="string">            fi</span></span><br><span class="line"><span class="string">        done</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    recursive_copy() {</span></span><br><span class="line"><span class="string">    local source="$1"</span></span><br><span class="line"><span class="string">    local destination="$2"</span></span><br><span class="line"><span class="string">    mkdir -p "$destination"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    for item in "$source"/*; do</span></span><br><span class="line"><span class="string">        local filename=$(basename "$item")</span></span><br><span class="line"><span class="string">        local dest_path="$destination/$filename"</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        if [ -d "$item" ]; then</span></span><br><span class="line"><span class="string">            if [ ! -d "$dest_path" ]; then</span></span><br><span class="line"><span class="string">                mkdir "$dest_path"</span></span><br><span class="line"><span class="string">            fi</span></span><br><span class="line"><span class="string">            recursive_copy "$item" "$dest_path"</span></span><br><span class="line"><span class="string">        elif [ -f "$item" ]; then</span></span><br><span class="line"><span class="string">            src_content="$(cat "$item" | sed "s/ALI_SHORT_TOKEN/$ali_tiken/g")"</span></span><br><span class="line"><span class="string">            if [ -f "$dest_path" ]; then</span></span><br><span class="line"><span class="string">                dst_content="$(cat "$dest_path")"</span></span><br><span class="line"><span class="string">                if [ "$src_content"x != "$dst_content"x ]; then</span></span><br><span class="line"><span class="string">                    echo "$src_content" &gt; "$dest_path"</span></span><br><span class="line"><span class="string">                else</span></span><br><span class="line"><span class="string">                    :</span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                echo "$src_content" &gt; "$dest_path"</span></span><br><span class="line"><span class="string">            fi</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">    done</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    recursive_copy "/data/tvbox" "/www/tvbox"</span></span><br><span class="line"><span class="string">    copy_files_by_extension "json" "$target_dir1"</span></span><br><span class="line"><span class="string">    copy_files_by_extension "json" "$target_dir2"</span></span><br><span class="line"><span class="string">    copy_files_by_extension "js" "$target_dir3"</span></span><br><span class="line"><span class="string">    copy_files_by_extension "json" "$target_dir4"</span></span><br><span class="line"><span class="string">    copy_files_by_extension "js" "$target_dir4"</span></span><br><span class="line"><span class="string">    copy_files_by_extension "js" "$target_dir5"</span></span><br><span class="line"><span class="string">    copy_files_by_extension "js" "$target_dir6"</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">copy_tvbox_files'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">update_xiaoya</span></span>() {</span><br><span class="line">    <span class="built_in">sleep</span> 60</span><br><span class="line">    para_v=<span class="string">"<span class="subst">$(docker inspect --format='{{range $v,$conf := .Mounts}}-v {{$conf.Source}}:{{$conf.Destination}} {{$conf.Type}}~{{end}}' $XIAOYA_NAME | tr '~' '\n' | grep bind | sed 's/bind//g' | grep -Eo <span class="string">"\-v .*:.*"</span> | tr '\n' ' ')</span>"</span></span><br><span class="line">    para_n=<span class="string">"<span class="subst">$(docker inspect --format='{{range $m, $conf := .NetworkSettings.Networks}}--network={{$m}}{{end}}' $XIAOYA_NAME | grep -Eo <span class="string">"\-\-network=host"</span>)</span>"</span></span><br><span class="line">    tag=<span class="string">"latest"</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="subst">$(get_docker_info $XIAOYA_NAME | grep <span class="string">"ailg/alist"</span>)</span>"</span>x != x ]; <span class="keyword">then</span></span><br><span class="line">        tag=<span class="string">"test"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$para_n</span>"</span>x != x ]; <span class="keyword">then</span></span><br><span class="line">        tag=<span class="string">"hostmode"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    para_p=<span class="string">"<span class="subst">$(docker inspect --format='{{range $p, $conf := .NetworkSettings.Ports}}~{{$p}}{{$conf}} {{end}}' $XIAOYA_NAME | tr '~' '\n' | tr '/' ' ' | tr -d '[]{}' | awk '{printf(<span class="string">"-p %s:%s\n"</span>,$3,$1)</span>}' | grep -Eo "</span>\-p [0-9]{1,10}:[0-9]{1,10}<span class="string">" | tr '\n' ' ')"</span></span><br><span class="line">    para_i=<span class="string">"<span class="subst">$(get_docker_info $XIAOYA_NAME | awk '{print $2}')</span>:<span class="variable">$tag</span>"</span></span><br><span class="line">    para_e=<span class="string">"<span class="subst">$(docker inspect --format='{{range $p, $conf := .Config.Env}}~{{$conf}}{{end}}' $XIAOYA_NAME 2&gt;/dev/null | sed '/^$/d' | tr '~' '\n' | sed '/^$/d' | awk '{printf(<span class="string">"-e \"%s\"\n"</span>,$0)</span>}' | tr '\n' ' ')"</span></span><br><span class="line">    docker pull <span class="string">"<span class="variable">$para_i</span>"</span> 2&gt;&amp;1</span><br><span class="line">    cur_image=$(get_docker_info <span class="variable">$XIAOYA_NAME</span> | awk <span class="string">'{print $3}'</span>)</span><br><span class="line">    latest_image=$(docker images --no-trunc | <span class="built_in">tail</span> -n +2 | <span class="built_in">tr</span> <span class="string">':'</span> <span class="string">' '</span> | awk <span class="string">'{printf("%s:%s %s\n",$1,$2,$4)}'</span> | grep <span class="string">"<span class="variable">$para_i</span>"</span> | awk <span class="string">'{print $2}'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$cur_image</span>"</span>x != <span class="string">"<span class="variable">$latest_image</span>"</span>x ]; <span class="keyword">then</span></span><br><span class="line">        docker stop <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span></span><br><span class="line">        docker <span class="built_in">rm</span> -v <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span></span><br><span class="line">        <span class="built_in">eval</span> <span class="string">"<span class="subst">$(echo docker run -d <span class="string">"<span class="variable">$para_n</span>"</span> <span class="string">"<span class="variable">$para_v</span>"</span> <span class="string">"<span class="variable">$para_p</span>"</span> <span class="string">"<span class="variable">$para_e</span>"</span> --restart=always --name=<span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> <span class="string">"<span class="variable">$para_i</span>"</span>)</span>"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        docker restart <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    docker rmi -f $(docker images | grep <span class="string">"<span class="subst">$(echo $para_i | awk -F: '{print $1}')</span>"</span> | grep none | grep -Eo <span class="string">"[0-9a-f]{6,128}"</span>) &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">session=<span class="string">"<span class="subst">$((RANDOM % 90000000 + 10000000)</span>)"</span></span><br><span class="line"><span class="function"><span class="title">gen_post_cmd_single</span></span>() {</span><br><span class="line">    init_para <span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$cmd_delay</span>"</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        cmd=<span class="string">'#tag:'</span><span class="variable">$session</span><span class="string">'ï¼Œå‘½ä»¤åªèƒ½å†™åœ¨ä»¥ä¸‹beginå’Œendä¹‹é—´ï¼Œå¦åˆ™ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="string">#xiaoyakeeper-'</span><span class="variable">$XIAOYA_NAME</span><span class="string">'-begin</span></span><br><span class="line"><span class="string">#update_xiaoyaæ˜¯ä¸€ä¸ªå†…ç½®å‘½ä»¤ï¼Œå¦‚æœå°é›…é•œåƒæœ‰æ›´æ–°åˆ™æ›´æ–°å°é›…å®¹å™¨ï¼Œå¦åˆ™é‡å¯å°é›…å®¹å™¨ã€‚å¯ä»¥æ›¿æ¢æˆä½ è‡ªå·±çš„å‘½ä»¤ï¼Œå¦‚æœä¸æ‡‚åˆ™ä¸å»ºè®®ä¿®æ”¹ã€‚</span></span><br><span class="line"><span class="string">update_xiaoya</span></span><br><span class="line"><span class="string">#xiaoyakeeper-'</span><span class="variable">$XIAOYA_NAME</span><span class="string">'-end</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cmd=<span class="string">'#tag:'</span><span class="variable">$session</span><span class="string">'ï¼Œå‘½ä»¤åªèƒ½å†™åœ¨ä»¥ä¸‹beginå’Œendä¹‹é—´ï¼Œå¦åˆ™ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="string">#xiaoyakeeper-'</span><span class="variable">$XIAOYA_NAME</span><span class="string">'-begin</span></span><br><span class="line"><span class="string">{</span></span><br><span class="line"><span class="string">sleep '</span><span class="variable">$cmd_delay</span><span class="string">'</span></span><br><span class="line"><span class="string">#update_xiaoyaæ˜¯ä¸€ä¸ªå†…ç½®å‘½ä»¤ï¼Œå¦‚æœå°é›…é•œåƒæœ‰æ›´æ–°åˆ™æ›´æ–°å°é›…å®¹å™¨ï¼Œå¦åˆ™é‡å¯å°é›…å®¹å™¨ã€‚å¯ä»¥æ›¿æ¢æˆä½ è‡ªå·±çš„å‘½ä»¤ï¼Œå¦‚æœä¸æ‡‚åˆ™ä¸å»ºè®®ä¿®æ”¹ã€‚</span></span><br><span class="line"><span class="string">update_xiaoya</span></span><br><span class="line"><span class="string">}&amp;</span></span><br><span class="line"><span class="string">#xiaoyakeeper-'</span><span class="variable">$XIAOYA_NAME</span><span class="string">'-end</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    write_File_ClearIfNoTag mycmd.txt <span class="string">"<span class="variable">$cmd</span>"</span> <span class="string">"#tag:<span class="variable">$session</span>"</span></span><br><span class="line">    <span class="comment">#write_File mycmd.txt "$cmd"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">gen_post_cmd_all</span></span>() {</span><br><span class="line">    <span class="keyword">if</span> [ -f /docker-entrypoint.sh ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    dockers=<span class="string">"<span class="subst">$(get_Xiaoya)</span>"</span></span><br><span class="line">    cmd_delay=0</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> $(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$dockers</span>"</span> | sed <span class="string">'/^$/d'</span>); <span class="keyword">do</span></span><br><span class="line">        gen_post_cmd_single <span class="string">"<span class="variable">$line</span>"</span></span><br><span class="line">        cmd_delay=$((cmd_delay + <span class="number">600</span>))</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_env</span></span>() {</span><br><span class="line">    <span class="keyword">if</span> [ ! -f /docker-entrypoint.sh ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#http://mirrors.ustc.edu.cn/alpine/v3.18/main</span></span><br><span class="line">    <span class="comment">#http://mirrors.ustc.edu.cn/alpine/v3.18/community</span></span><br><span class="line">    <span class="comment">#echo 'https://mirrors.nju.edu.cn/alpine/v3.18/main</span></span><br><span class="line">    <span class="comment">#https://mirrors.nju.edu.cn/alpine/v3.18/community' &gt; /etc/apk/repositories</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ! docker --<span class="built_in">help</span> &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        apk add docker-cli</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ! docker --<span class="built_in">help</span> &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"å®‰è£…dockerå·¥å…·å¤±è´¥"</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ! curl --<span class="built_in">help</span> &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        apk add curl</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ! curl --<span class="built_in">help</span> &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"å®‰è£…curlå·¥å…·å¤±è´¥"</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="subst">$(date | grep <span class="string">"CST"</span>)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        apk add tzdata</span><br><span class="line">        <span class="built_in">cp</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Asia/Shanghai"</span> &gt;/etc/timezone</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_keeper</span></span>() {</span><br><span class="line">    <span class="comment">#docker image prune -af</span></span><br><span class="line">    <span class="comment">#docker volume prune -f</span></span><br><span class="line">    <span class="comment">#docker volume prune -af 2&gt;/dev/null</span></span><br><span class="line">    dockers=<span class="string">"<span class="subst">$(get_Xiaoya)</span>"</span></span><br><span class="line">    XIAOYA_NAME=<span class="string">"<span class="subst">$(echo -e <span class="string">"<span class="variable">$dockers</span>"</span> | sed '/^$/d' | head -n1)</span>"</span></span><br><span class="line">    <span class="comment">#XIAOYA_ROOT="$(docker inspect --format='{{range $v,$conf := .Mounts}}{{$conf.Source}}:{{$conf.Destination}}{{$conf.Type}}~{{end}}' "$XIAOYA_NAME" | tr '~' '\n' | grep bind | sed 's/bind//g' | grep ":/data" | awk -F: '{print $1}')"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#å°é›…æ–‡ä»¶å¤¹æœ‰å¯èƒ½æ²¡æƒé™ï¼Œæ¢ä¸€ä¸ªç›®å½•ä½œä¸ºä¸´æ—¶ç›®å½•</span></span><br><span class="line">    <span class="comment">#XIAOYA_ROOT="/var/run"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$newsh</span>"</span> ] &amp;&amp; [ -n <span class="string">"<span class="subst">$(cat <span class="string">"<span class="variable">$0</span>"</span> | head -n 1 | grep <span class="string">"^#!/bin/bash"</span>)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        newsh=<span class="string">"<span class="subst">$(cat <span class="string">"<span class="variable">$0</span>"</span>)</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$newsh</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"ç½‘ç»œé—®é¢˜ï¼Œä¸‹è½½è„šæœ¬å¤±è´¥ï¼Œè¯·å¤šå°è¯•å‡ æ¬¡ã€æ­å»ºé­”æ³•å®‰è£…æˆ–ä¸‹è½½TGç¾¤æ–‡ä»¶ä¸­çš„aliyun_clear.shç¦»çº¿å®‰è£…ï¼šbash ./aliyun_clear.sh 5ï¼Œå…¶ä¸­å‚æ•°â€œ5â€æ˜¯æŒ‡æ¨¡å¼5ï¼Œå¯ä»¥æ”¹ä¸ºå…¶å®ƒæ¨¡å¼"</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#echo "$newsh" &gt; "$XIAOYA_ROOT/aliyun_clear.sh"</span></span><br><span class="line">    docker <span class="built_in">rm</span> -f -v xiaoyakeeper &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">    network=<span class="string">"--network=host"</span></span><br><span class="line">    <span class="keyword">if</span> para -b; <span class="keyword">then</span></span><br><span class="line">        network=<span class="string">""</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    docker run --name xiaoyakeeper --restart=always <span class="variable">$network</span> --privileged -v /var/run/docker.sock:/var/run/docker.sock -e TZ=<span class="string">"Asia/Shanghai"</span> -d alpine:3.18.2 sh -c <span class="string">"if [ -f /etc/xiaoya/aliyun_clear.sh ];then sh /etc/xiaoya/aliyun_clear.sh <span class="variable">$1</span>;else sleep 60;fi"</span> &amp;&gt;/dev/null</span><br><span class="line">    docker run --name xiaoyakeeper --restart=always <span class="variable">$network</span> --privileged -v /var/run/docker.sock:/var/run/docker.sock -e TZ=<span class="string">"Asia/Shanghai"</span> -d dockerproxy.com/library/alpine:3.18.2 sh -c <span class="string">"if [ -f /etc/xiaoya/aliyun_clear.sh ];then sh /etc/xiaoya/aliyun_clear.sh <span class="variable">$1</span>;else sleep 60;fi"</span> &amp;&gt;/dev/null</span><br><span class="line">    docker <span class="built_in">exec</span> xiaoyakeeper <span class="built_in">touch</span> /docker-entrypoint.sh</span><br><span class="line">    docker <span class="built_in">exec</span> xiaoyakeeper <span class="built_in">mkdir</span> /etc/xiaoya</span><br><span class="line">    <span class="comment">#docker cp $XIAOYA_ROOT/aliyun_clear.sh xiaoyakeeper:/etc/xiaoya/aliyun_clear.sh</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$newsh</span>"</span> | docker <span class="built_in">exec</span> -i xiaoyakeeper sh -c <span class="string">'cp /dev/stdin /etc/xiaoya/aliyun_clear.sh'</span></span><br><span class="line"></span><br><span class="line">    docker <span class="built_in">exec</span> xiaoyakeeper <span class="built_in">chmod</span> +x <span class="string">"/etc/xiaoya/aliyun_clear.sh"</span></span><br><span class="line">    <span class="comment">#rm -f "$XIAOYA_ROOT/aliyun_clear.sh"</span></span><br><span class="line">    docker restart xiaoyakeeper</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="subst">$(docker ps | grep xiaoyakeeper)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"å¯åŠ¨å¤±è´¥ï¼Œè¯·æŠŠå‘½ä»¤æŠ¥é”™ä¿¡æ¯ä»¥åŠä»¥ä¸‹ä¿¡æ¯åé¦ˆç»™ä½œè€…ä¿®æ”¹"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"ç³»ç»Ÿä¿¡æ¯ï¼š<span class="subst">$(uname -a)</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"dockerè·¯å¾„ï¼š<span class="subst">$(which docker)</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"dockerçŠ¶æ€ï¼š<span class="subst">$(docker ps | grep xiaoyakeeper)</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"dockerè¿è¡Œæ—¥å¿—ï¼š"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="subst">$(docker logs --tail 10 xiaoyakeeper)</span>"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"å°é›…çœ‹æŠ¤docker(xiaoyakeeper)å·²å¯åŠ¨"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">read_File</span></span>() {</span><br><span class="line">    _r=0</span><br><span class="line">    _res=<span class="string">""</span></span><br><span class="line">    <span class="keyword">if</span> docker <span class="built_in">exec</span> <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> [ -f <span class="string">"/data/<span class="variable">$1</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        _res=<span class="string">"<span class="subst">$(docker exec <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> cat <span class="string">"/data/<span class="variable">$1</span>"</span>)</span>"</span></span><br><span class="line">        _r=$?</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$_res</span>"</span></span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$_r</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">write_File</span></span>() {</span><br><span class="line">    docker <span class="built_in">exec</span> <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> bash -c <span class="string">"echo -e \"<span class="variable">$2</span>\" &gt; \"/data/<span class="variable">$1</span>\""</span></span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">apend_File</span></span>() {</span><br><span class="line">    docker <span class="built_in">exec</span> <span class="string">"<span class="variable">$XIAOYA_NAME</span>"</span> bash -c <span class="string">"echo -e \"<span class="variable">$2</span>\" &gt;&gt; \"/data/<span class="variable">$1</span>\""</span></span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">write_File_ClearIfNoTag</span></span>() {</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="subst">$(read_File <span class="string">"<span class="variable">$1</span>"</span> | grep <span class="string">"<span class="variable">$3</span>"</span>)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        write_File <span class="string">"<span class="variable">$1</span>"</span> <span class="string">""</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    apend_File <span class="string">"<span class="variable">$1</span>"</span> <span class="string">"<span class="variable">$2</span>"</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ! install_env; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"å°é›…å®ˆæŠ¤åˆå§‹åŒ–å¤±è´¥ï¼Œå³å°†é‡è¯•10æ¬¡"</span></span><br><span class="line">    retry_command <span class="string">"install_env"</span></span><br><span class="line">    <span class="keyword">if</span> ! install_env; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"é‡è¯•10æ¬¡ååˆå§‹åŒ–å¤±è´¥ï¼Œå¯èƒ½é‡åˆ°äº†ç½‘ç»œé—®é¢˜ï¼Œ1å°æ—¶åå°†é‡å¯å®¹å™¨ç»§ç»­é‡è¯•"</span></span><br><span class="line">        <span class="built_in">sleep</span> 3600</span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">run_mode=0</span><br><span class="line">next_min=$(($(date +%s) + <span class="number">60</span>))</span><br><span class="line">script_run_time=<span class="string">"<span class="subst">$(date -d <span class="string">"@<span class="variable">$next_min</span>"</span> +'%H:%M')</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$1</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    run_mode=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f /docker-entrypoint.sh ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">touch</span> /var/run/xiaoyakeeper.pid</span><br><span class="line">    <span class="built_in">kill</span> -9 <span class="string">"<span class="subst">$(cat /var/run/xiaoyakeeper.pid)</span>"</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="built_in">echo</span> $$ &gt;/var/run/xiaoyakeeper.pid</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">dockers=<span class="string">"<span class="subst">$(get_Xiaoya)</span>"</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="subst">$(echo -e <span class="string">"<span class="variable">$dockers</span>"</span> | sed '/^$/d' | head -n1)</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ä½ è¿˜æ²¡æœ‰å®‰è£…å°é›…dockerï¼Œè¯·å…ˆå®‰è£…ï¼"</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_ChatId</span></span>() {</span><br><span class="line">    code=<span class="string">"<span class="subst">$((RANDOM % 90000000 + 10000000)</span>)"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"è¯·å…ˆå‘é€éªŒè¯ç <span class="variable">$code</span>ç»™æœºå™¨äºº@xiaoyahelper_botï¼Œå‘é€æˆåŠŸåè¯·æ•²å›è½¦é”®ç»§ç»­ï¼Œä¸å‘éªŒè¯ç ç›´æ¥æ•²å›è½¦è¡¨ç¤ºç”¨ä¸Šæ¬¡éªŒè¯çš„è´¦å·æ¨é€ï¼Œå¦‚æœä»æ¥æ²¡æœ‰éªŒè¯è¿‡åˆ™ä¸æ¨é€ã€‚è¯·2åˆ†é’Ÿå†…å®Œæˆï¼Œè¶…æ—¶è‡ªåŠ¨è·³è¿‡ã€‚"</span></span><br><span class="line">    <span class="built_in">sleep</span> 2</span><br><span class="line">    <span class="built_in">read</span> -t 120 line</span><br><span class="line">    chat_id=<span class="string">"<span class="subst">$(curl --connect-timeout 5 -m 5 -H <span class="string">"User-Agent: xiaoyapush"</span> $tg_push_api_url/getUpdates -d <span class="string">"<span class="variable">$code</span>"</span> 2&gt;/dev/null | sed 's/{<span class="string">"message_id"</span>/\n{<span class="string">"message_id"</span>/g' | grep <span class="string">"<span class="variable">$code</span>"</span> | grep -Eo '<span class="string">"id"</span>:[0-9]{1,20}' | tail -n 1 | tr -d '<span class="string">"' | awk -F: '{print <span class="variable">$2</span>}')"</span></span></span></span><br><span class="line"><span class="subst"><span class="string">    if [ -z <span class="string">"<span class="variable">$chat_id</span>"</span> ]; then</span></span></span><br><span class="line"><span class="subst"><span class="string">        return 0</span></span></span><br><span class="line"><span class="subst"><span class="string">    fi</span></span></span><br><span class="line"><span class="subst"><span class="string"></span></span></span><br><span class="line"><span class="subst"><span class="string">    dockers=<span class="string">"<span class="subst">$(get_Xiaoya)</span>"</span></span></span></span><br><span class="line"><span class="subst"><span class="string">    echo -e <span class="string">"<span class="variable">$dockers</span>"</span> | sed '/^$/d' | while read line; do</span></span></span><br><span class="line"><span class="subst"><span class="string">        org_chat_id=$chat_id</span></span></span><br><span class="line"><span class="subst"><span class="string">        init_para <span class="string">"<span class="variable">$line</span>"</span></span></span></span><br><span class="line"><span class="subst"><span class="string">        chat_id=$org_chat_id</span></span></span><br><span class="line"><span class="subst"><span class="string">        write_File <span class="string">"mychatid.txt"</span> <span class="string">"<span class="variable">$org_chat_id</span>"</span></span></span></span><br><span class="line"><span class="subst"><span class="string">    done</span></span></span><br><span class="line"><span class="subst"><span class="string">}</span></span></span><br><span class="line"><span class="subst"><span class="string"></span></span></span><br><span class="line"><span class="subst"><span class="string">myecho()</span> {</span></span><br><span class="line"><span class="string">    echo "</span><span class="variable">$@</span><span class="string">"</span></span><br><span class="line"><span class="string">    echo "</span><span class="variable">$@</span><span class="string">" &gt;&amp;6</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">push_msg() {</span></span><br><span class="line"><span class="string">    _chat_id="</span>$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$@</span>"</span> | grep -Eo <span class="string">"chat_id:[0-9]{1,20}"</span> | awk -F: <span class="string">'{print $2}'</span> | <span class="built_in">tail</span> -n 1)<span class="string">"</span></span><br><span class="line"><span class="string">    if [ -n "</span><span class="variable">$_chat_id</span><span class="string">" ]; then</span></span><br><span class="line"><span class="string">        chat_id=<span class="variable">$_chat_id</span></span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    text="</span>$(<span class="built_in">echo</span> <span class="string">"<span class="variable">$@</span>"</span> | grep -v <span class="string">'chat_id:'</span>)<span class="string">"</span></span><br><span class="line"><span class="string">    if [ -n "</span><span class="variable">$chat_id</span><span class="string">" ] &amp;&amp; [ -n "</span><span class="variable">$text</span><span class="string">" ]; then</span></span><br><span class="line"><span class="string">        curl --connect-timeout 5 -m 5 -s -X POST -H "</span>User-Agent: xiaoyapush;ver=<span class="variable">$ver</span><span class="string">" -H 'Content-Type: application/json' -d '{"</span>chat_id<span class="string">": '<span class="variable">$chat_id</span>',"</span>text<span class="string">": "</span><span class="string">'"$text"'</span><span class="string">"}' "</span><span class="variable">$tg_push_api_url</span>/sendMessage<span class="string">" &amp;&gt;/dev/null</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">tmp_fifofile="</span>./$$.fifo<span class="string">"</span></span><br><span class="line"><span class="string">mkfifo <span class="variable">$tmp_fifofile</span> &amp;&gt;/dev/null</span></span><br><span class="line"><span class="string">if [ ! $? -eq 0 ]; then</span></span><br><span class="line"><span class="string">    mknod <span class="variable">$tmp_fifofile</span> p</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">exec 6&lt;&gt;<span class="variable">$tmp_fifofile</span></span></span><br><span class="line"><span class="string">rm -f <span class="variable">$tmp_fifofile</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if para -tg; then</span></span><br><span class="line"><span class="string">    get_ChatId</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">start_push_proc() {</span></span><br><span class="line"><span class="string">    {</span></span><br><span class="line"><span class="string">        msg="</span><span class="string">"</span></span><br><span class="line"><span class="string">        while [ -n "</span>$(ps | sed <span class="string">"s/^/ /"</span> | grep <span class="string">" $$ "</span> | grep -v grep)<span class="string">" ]; do</span></span><br><span class="line"><span class="string">            if read -t 20 -u 6 line; then</span></span><br><span class="line"><span class="string">                msg="</span><span class="variable">$msg</span>\n<span class="variable">$line</span><span class="string">"</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                if [ -n "</span>$(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$msg</span>"</span> | <span class="built_in">tail</span> -n +2)<span class="string">" ]; then</span></span><br><span class="line"><span class="string">                    push_msg "</span>$(<span class="built_in">echo</span> -e <span class="string">"<span class="variable">$msg</span>"</span> | <span class="built_in">tail</span> -n +2)<span class="string">"</span></span><br><span class="line"><span class="string">                fi</span></span><br><span class="line"><span class="string">                msg="</span><span class="string">"</span></span><br><span class="line"><span class="string">            fi</span></span><br><span class="line"><span class="string">            sleep 1</span></span><br><span class="line"><span class="string">        done</span></span><br><span class="line"><span class="string">    } &amp;</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#è¿è¡Œä¸»å‡½æ•°</span></span><br><span class="line"><span class="string">push_proc_keeper() {</span></span><br><span class="line"><span class="string">    if ! which pgrep &amp;&gt;/dev/null; then</span></span><br><span class="line"><span class="string">        return</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    count=<span class="subst">$(pgrep -P $$ -l | grep -v sleep | grep -v grep | wc -l)</span></span></span><br><span class="line"><span class="string">    if [ <span class="variable">$count</span> -gt 1 ]; then</span></span><br><span class="line"><span class="string">        return</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    start_push_proc</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ ! -f /docker-entrypoint.sh ]; then</span></span><br><span class="line"><span class="string">    if [ "</span><span class="variable">$run_mode</span><span class="string">" -eq 0 ] || [ "</span><span class="variable">$run_mode</span><span class="string">" -eq 1 ]; then</span></span><br><span class="line"><span class="string">        echo "</span>ä½ æ­£åœ¨ä½¿ç”¨ä¸æ¨èçš„æ¨¡å¼<span class="variable">$run_mode</span>ï¼Œå»ºè®®ä½¿ç”¨æ¨¡å¼3æˆ–æ¨¡å¼5<span class="string">"</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">start_push_proc</span></span><br><span class="line"><span class="string">case "</span><span class="variable">$run_mode</span><span class="string">" in</span></span><br><span class="line"><span class="string">0 | 55)</span></span><br><span class="line"><span class="string">    myecho -e "</span>\n[$(<span class="built_in">date</span> <span class="string">'+%Y/%m/%d %H:%M:%S'</span>)]å°é›…ç¼“å­˜æ¸…ç†(ver=<span class="variable">$ver</span>)è¿è¡Œä¸­<span class="string">"</span></span><br><span class="line"><span class="string">    while :; do</span></span><br><span class="line"><span class="string">        sche=0</span></span><br><span class="line"><span class="string">        push_proc_keeper</span></span><br><span class="line"><span class="string">        clear_aliyun_all_docker</span></span><br><span class="line"><span class="string">        fast_triger_update</span></span><br><span class="line"><span class="string">        sleep <span class="subst">$((60 - $(date +%s)</span> % 60))</span></span><br><span class="line"><span class="string">    done</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">1)</span></span><br><span class="line"><span class="string">    clear_aliyun_all_docker</span></span><br><span class="line"><span class="string">    if [ -n "</span><span class="variable">$chat_id</span><span class="string">" ]; then</span></span><br><span class="line"><span class="string">        echo "</span>ç­‰å¾…å®Œæˆæ¶ˆæ¯æ¨é€ä¸­ï¼Œé©¬ä¸Šç»“æŸè¿è¡Œ<span class="string">"</span></span><br><span class="line"><span class="string">        sleep 30</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">2)</span></span><br><span class="line"><span class="string">    echo "</span>æœ¬æ¨¡å¼å·²ä¸å†æ”¯æŒï¼Œå»ºè®®ä½¿ç”¨æ¨¡å¼3æˆ–æ¨¡å¼4<span class="string">"</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">3 | 4)</span></span><br><span class="line"><span class="string">    gen_post_cmd_all</span></span><br><span class="line"><span class="string">    install_keeper 0		# 0 è¡¨ç¤ºæ°¸ä¸æ¸…é™¤</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">5)</span></span><br><span class="line"><span class="string">    gen_post_cmd_all</span></span><br><span class="line"><span class="string">    install_keeper 55		#55 </span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">*)</span></span><br><span class="line"><span class="string">    echo "</span>ä¸æ”¯æŒçš„æ¨¡å¼<span class="string">"</span></span><br><span class="line"><span class="string">    ;;</span></span><br><span class="line"><span class="string">esac</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">exec 6&gt;&amp;- &gt;/dev/null 2&gt;&amp;1</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></tbody></table></figure>
</details>
<mark class="hl-label default">ä¹Ÿå¯ä»¥å‚è€ƒè¯¥åšä¸»çš„</mark> 
<div calss="anzhiyu-tag-link"><a class="tag-Link" target="_blank" href="https://www.cnblogs.com/xyztank/articles/17944085">
    <div class="tag-link-tips">å¼•ç”¨ç«™å¤–åœ°å€</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="">
          <i class="anzhiyufont anzhiyu-icon-link" style=""></i>
        </div>
        <div class="tag-link-right">
            <div class="tag-link-title">å‚è€ƒ</div>
            <div class="tag-link-sitename">å°é›…Alistå®šæ—¶æ¸…ç†ç¼“å­˜</div>
        </div>
        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>
    </div>
    </a></div>

<h3 id="2-Aliståˆ·æ–°ä»¤ç‰Œ"><a href="#2-Aliståˆ·æ–°ä»¤ç‰Œ" class="headerlink" title="2.Aliståˆ·æ–°ä»¤ç‰Œ"></a>2.Aliståˆ·æ–°ä»¤ç‰Œ</h3><blockquote>
<p>å¤åˆ¶ä»¥ä¸‹å‘½ä»¤ç²˜è´´åˆ°SSHç»ˆç«¯</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -i xiaoya sqlite3 data/data.db &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">select value from x_setting_items where key = "token";</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></tbody></table></figure>
<div class="note warning flat"><p>å¾—åˆ°Aliståˆ·æ–°ä»¤ç‰Œï¼Œå¤åˆ¶ç²˜è´´å¤‡ç”¨(æ•´ä¸ªå¤åˆ¶ä¸‹æ¥)</p>
</div>

<hr>
<hr>
<h2 id="ğŸŒˆ-Alistæ·»åŠ å°é›…"><a href="#ğŸŒˆ-Alistæ·»åŠ å°é›…" class="headerlink" title="ğŸŒˆ Alistæ·»åŠ å°é›…"></a>ğŸŒˆ Alistæ·»åŠ å°é›…</h2><h3 id="1-ç™»å½•åˆ°Alist"><a href="#1-ç™»å½•åˆ°Alist" class="headerlink" title="1. ç™»å½•åˆ°Alist"></a>1. ç™»å½•åˆ°Alist</h3><blockquote>
<p>ç”µè„‘Chromeæµè§ˆå™¨è¾“å…¥<a href="http://IP:5244â†’ç”¨æˆ·åadminå¯†ç adminç™»å½•â†’ç®¡ç†â†’Alistç®¡ç†ç•Œé¢">http://IP:5244â†’ç”¨æˆ·åadminå¯†ç adminç™»å½•â†’ç®¡ç†â†’Alistç®¡ç†ç•Œé¢</a></p>
</blockquote>
<h3 id="2-æŒ‚è½½å°é›…"><a href="#2-æŒ‚è½½å°é›…" class="headerlink" title="2. æŒ‚è½½å°é›…"></a>2. æŒ‚è½½å°é›…</h3><blockquote>
<p>Alistç®¡ç†ç•Œé¢â†’å­˜å‚¨â†’æ·»åŠ â†’Alist V3â†’æŒ‚è½½è·¯å¾„å¡«<code>å°é›…è¶…é›†</code>â†’é“¾æ¥å¡«:<a href="http://IP:5678â†’ç”¨æˆ·åç©ºâ†’å¯†ç ç©ºâ†’ä»¤ç‰Œå¡«:AlistæŒ‚è½½ä»¤ç‰Œâ†’å…¶ä»–éƒ¨é»˜è®¤â†’ç¡®å®š">http://IP:5678â†’ç”¨æˆ·åç©ºâ†’å¯†ç ç©ºâ†’ä»¤ç‰Œå¡«:AlistæŒ‚è½½ä»¤ç‰Œâ†’å…¶ä»–éƒ¨é»˜è®¤â†’ç¡®å®š</a><br><img src="https://github.com/xiaoxin-top/picx-images-hosting/raw/master/blog/n1.5fkh4u4lz8.webp" alt="n1"><br><img src="https://github.com/xiaoxin-top/picx-images-hosting/raw/master/blog/n1-1.2a4z5wa72y.webp" alt="n1-1"></p>
</blockquote>
<h3 id="3-å›åˆ°å­˜å‚¨é¡µé¢"><a href="#3-å›åˆ°å­˜å‚¨é¡µé¢" class="headerlink" title="3. å›åˆ°å­˜å‚¨é¡µé¢"></a>3. å›åˆ°å­˜å‚¨é¡µé¢</h3><blockquote>
<p>çœ‹åˆ°å­˜å‚¨é‡Œæœ‰ä¸€æ¡å°é›…è¶…é›†ï¼ŒçŠ¶æ€workï¼ŒOKï¼<br>å›åˆ°é¦–é¡µå¤šå‡ºçš„ä¸€ä¸ªæŒ‚è½½ç›®å½•,ç”µå½±èµ„æºå°±æ”¾åœ¨è¿™ä¸ª<code>å°é›…è¶…é›†</code>ç›®å½•ä¸‹äº†<br><img src="https://github.com/xiaoxin-top/picx-images-hosting/raw/master/blog/n1-2.syu458vpq.webp" alt="n1-2"><br><img src="https://github.com/xiaoxin-top/picx-images-hosting/raw/master/blog/n1-3.2h871bz5xc.webp" alt="n1-3"></p>
</blockquote>
<h3 id="4-ç™»å½•å°é›…-ip-5678"><a href="#4-ç™»å½•å°é›…-ip-5678" class="headerlink" title="4. ç™»å½•å°é›…:ip:5678"></a>4. ç™»å½•å°é›…:ip:5678</h3><p><img src="https://github.com/xiaoxin-top/picx-images-hosting/raw/master/blog/n1-4.231ragsadw.webp" alt="n1-4"></p>
<hr>
<hr>
<h2 id="ğŸ¤-å‡ ç‚¹è¯´æ˜"><a href="#ğŸ¤-å‡ ç‚¹è¯´æ˜" class="headerlink" title="ğŸ¤ å‡ ç‚¹è¯´æ˜"></a>ğŸ¤ å‡ ç‚¹è¯´æ˜</h2><blockquote>
<p>1ã€è½¯è·¯ç”±æ­£å¸¸å·¥ä½œåŠŸç‡3Wï¼Œæœ€å¥½7*24å°æ—¶ä¾›ç”µï¼Œä¸è¦åœç”µã€æ–­ç½‘ï¼Œä»¥ä¿æŒå…¶å·¥ä½œç¨³å®šæ€§ï¼Œé˜¿é‡Œtokenæ¯48å°æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ã€‚<br>2ã€å¦‚æœå¶å°”å‡ºç°åœç”µï¼Œæ¢å¤ä¾›ç”µè½¯è·¯ç”±çš„é˜¿é‡Œäº‘ç›˜openä¼šè‡ªåŠ¨æŒ‚è½½æˆåŠŸï¼Œå°é›…æŒ‚è½½å¤§æ¦‚ç‡æŒ‚è½½ä¸æˆåŠŸï¼Œéœ€è¦æ‰‹åŠ¨åˆ°Alistç®¡ç†ç•Œé¢ï¼Œç‚¹å¼€å°é›…è¶…é›†ï¼Œä¿®æ”¹ï¼Œç„¶åç¡®å®šã€‚<br>å¦‚æœè¿˜æ˜¯ä¸æˆåŠŸï¼ŒæŒ‰ç…§ä¸Šé¢çš„<code>Aliståˆ·æ–°ä»¤ç‰Œ</code>é‡æ–°è·å–Aliståˆ·æ–°ä»¤ç‰Œè¿›è¡Œæ›´æ¢ã€‚<br>3ã€é•¿æ—¶é—´ä¸ä½¿ç”¨å°é›…ï¼Œä¹Ÿæœ‰å¯èƒ½æŒ‚è½½ä¸ä¸Šï¼ŒåŒæ ·æŒ‰ç…§ä¸Šé¢çš„<code>Aliståˆ·æ–°ä»¤ç‰Œ </code>é‡æ–°è·å–Aliståˆ·æ–°ä»¤ç‰Œä¿®æ”¹Alistå°é›…è¶…é›†ä¿®æ”¹å³å¯æ¢å¤æ­£å¸¸ã€‚</p>
</blockquote>
<h2 id="ğŸ•¹-ç©æœºæŠ€å·§"><a href="#ğŸ•¹-ç©æœºæŠ€å·§" class="headerlink" title="ğŸ•¹ ç©æœºæŠ€å·§"></a>ğŸ•¹ ç©æœºæŠ€å·§</h2><blockquote>
<p>å°é›…è¶…é›†èµ„æºä¼—å¤šï¼Œä¸è¦å¿«é€Ÿé¢‘ç¹åœ°é€‰æ‹©æ›´æ¢æ–‡ä»¶å¤¹ï¼Œä»¥å…ç¼“å­˜è¯»å–æ…¢é€ æˆå¡ï¼Œç‰¹åˆ«æ˜¯CoreELECç³»ç»Ÿã€‚<br>å¯ä»¥ç”¨ç”µè„‘ã€å¹³æ¿æˆ–è€…æ‰‹æœºï¼Œæµè§ˆå™¨è¾“å…¥<a href="http://IP:5678ï¼Œå…ˆè¡Œæµè§ˆå°é›…è¶…é›†ï¼Œæ‰¾åˆ°æƒ³è¦çœ‹çš„ç”µå½±åŠæµ·æŠ¥å‰§æƒ…ï¼Œè®°ä½æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç„¶ååˆ°ç”µè§†ç›’å­é‡Œé€‰æ‹©è§‚çœ‹ã€‚">http://IP:5678ï¼Œå…ˆè¡Œæµè§ˆå°é›…è¶…é›†ï¼Œæ‰¾åˆ°æƒ³è¦çœ‹çš„ç”µå½±åŠæµ·æŠ¥å‰§æƒ…ï¼Œè®°ä½æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç„¶ååˆ°ç”µè§†ç›’å­é‡Œé€‰æ‹©è§‚çœ‹ã€‚</a></p>
</blockquote>
<h2 id="ğŸ¥-å¦‚ä½•æ’­æ”¾å°é›…èµ„æº"><a href="#ğŸ¥-å¦‚ä½•æ’­æ”¾å°é›…èµ„æº" class="headerlink" title="ğŸ¥ å¦‚ä½•æ’­æ”¾å°é›…èµ„æº"></a>ğŸ¥ å¦‚ä½•æ’­æ”¾å°é›…èµ„æº</h2><blockquote>
<p>ä½¿ç”¨CoreELECæ’­æ”¾<br>ä¸»ç•Œé¢-ç”µå½±-æ·»åŠ è§†é¢‘-æµè§ˆ-æ·»åŠ ç½‘ç»œä½ç½®<br>åè®®é€‰WebDAVæœåŠ¡å™¨ï¼ˆHTTP)<br>æœåŠ¡å™¨åœ°å€IP<br>è¿œç¨‹è·¯å¾„/dav<br>ç«¯å£5244<br>ç”¨æˆ·åadmin<br>å¯†ç admin<br>ç¡®å®š-å†ç¡®å®š<br>å¯ä»¥çœ‹åˆ°æœ‰ä¸€æ¡davçš„è®°å½•ï¼Œé€‰ä¸­ï¼Œç¡®å®š<br>ä¸ºæ­¤åª’ä½“æºå‘½åä¸ºAlistï¼Œç¡®å®š<br>è®¾ç½®å†…å®¹æš‚æ—¶é€‰å–æ¶ˆ<br>å¯ä»¥çœ‹åˆ°Alistçš„åª’ä½“æºã€‚<br>é€‰ä¸­åç¡®å®š<br>å‡ºç°é˜¿é‡Œäº‘ç›˜å’Œå°é›…è¶…é›†</p>
</blockquote>
<blockquote>
<p>ä½¿ç”¨å®‰å“TVboxæ’­æ”¾<br>å°†å°é›…Alistä½œä¸ºä¸€ä¸ªè®¢é˜…æº<br>TVBoxä¸»ç•Œé¢â†’è®¾ç½®â†’é…ç½®æº<br><a href="http://ip:5678/tvbox/my.json">http://IP:5678/tvbox/my.json</a><br>ç¡®å®šåè¿”å›<br>å¼€å§‹åŠ è½½å°é›…ï¼Œå‡ºç°ä¸«ä»™å¥³ï¼ŒæˆåŠŸï¼<br>æ„‰å¿«åœ°ç©è€å§ï¼Œç¥è§‚å½±æ„‰å¿«ï¼</p>
</blockquote>
<h2 id="ğŸ¦¾åç»­å†åšå†…ç½‘ç©¿é€å°±å¯ä»¥å…¬ç½‘è®¿é—®ã€æ•¬è¯·æœŸå¾…â€¦â€¦-ğŸŒ"><a href="#ğŸ¦¾åç»­å†åšå†…ç½‘ç©¿é€å°±å¯ä»¥å…¬ç½‘è®¿é—®ã€æ•¬è¯·æœŸå¾…â€¦â€¦-ğŸŒ" class="headerlink" title="ğŸ¦¾åç»­å†åšå†…ç½‘ç©¿é€å°±å¯ä»¥å…¬ç½‘è®¿é—®ã€æ•¬è¯·æœŸå¾…â€¦â€¦..ğŸŒ"></a>ğŸ¦¾åç»­å†åšå†…ç½‘ç©¿é€å°±å¯ä»¥å…¬ç½‘è®¿é—®ã€æ•¬è¯·æœŸå¾…â€¦â€¦..ğŸŒ</h2><h2 id="ğŸ’–æ„Ÿè°¢"><a href="#ğŸ’–æ„Ÿè°¢" class="headerlink" title="ğŸ’–æ„Ÿè°¢"></a>ğŸ’–æ„Ÿè°¢</h2><div calss="anzhiyu-tag-link"><a class="tag-Link" target="_blank" href="https://xiaoxin-top.github.io/looking/1b6b5cf0.html">
    <div class="tag-link-tips">å¼•ç”¨ç«™å¤–åœ°å€</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="">
          <i class="anzhiyufont anzhiyu-icon-link" style=""></i>
        </div>
        <div class="tag-link-right">
            <div class="tag-link-title">å‚è€ƒ</div>
            <div class="tag-link-sitename">å†…ç½‘ç©¿é€ï¼šå†…éƒ¨æ–‡ç« </div>
        </div>
        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>
    </div>
    </a></div>]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>å¹²è´§,æŠ€æœ¯</tag>
      </tags>
  </entry>
  <entry>
    <title>dockeré…ç½®ä»£ç†</title>
    <url>/looking/c8e05f01.html</url>
    <content><![CDATA[<h2 id="dockeré…ç½®ä»£ç†"><a href="#dockeré…ç½®ä»£ç†" class="headerlink" title="dockeré…ç½®ä»£ç†"></a>dockeré…ç½®ä»£ç†</h2><h3 id="è€æ–¹æ³•é…ç½®-proxy-conf-ï¼ˆäº²æµ‹æœ‰æ•ˆ-éœ€è¦é­”æ³•ï¼‰"><a href="#è€æ–¹æ³•é…ç½®-proxy-conf-ï¼ˆäº²æµ‹æœ‰æ•ˆ-éœ€è¦é­”æ³•ï¼‰" class="headerlink" title="è€æ–¹æ³•é…ç½® proxy.conf ï¼ˆäº²æµ‹æœ‰æ•ˆ-éœ€è¦é­”æ³•ï¼‰"></a>è€æ–¹æ³•é…ç½® proxy.conf ï¼ˆäº²æµ‹æœ‰æ•ˆ-éœ€è¦é­”æ³•ï¼‰</h3><ol>
<li>åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /etc/systemd/system/docker.service.d</span><br></pre></td></tr></tbody></table></figure></li>
<li>åˆ›å»ºé…ç½®æ–‡ä»¶</li>
</ol>
<ul>
<li><strong>æ³¨æ„ï¼š</strong>HTTP_PROXYå’ŒHTTPS_PROXY æ˜¯ä½ çš„æ¢¯å­æ‰€åœ¨çš„ä¸»æœºçš„ipå’Œç«¯å£<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; /etc/systemd/system/docker.service.d/proxy.conf &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">Environment="HTTP_PROXY=http://192.168.1.111:7890/" </span></span><br><span class="line"><span class="string">Environment="HTTPS_PROXY=http://192.168.1.111:7890/"</span></span><br><span class="line"><span class="string">Environment="NO_PROXY=localhost,127.0.0.1,hub.docker.com,registry.aliyuncs.com"</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<ol start="3">
<li><p>å¦‚æœæ˜¯clashçš„éœ€è¦æ‰“å¼€ <strong>Allow LAN</strong></p>
</li>
<li><p>é‡å¯docker</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">systemctl daemon-reload &amp;&amp; systemctl restart docker</span><br><span class="line">systemctl show --property=Environment docker    <span class="comment"># æŸ¥çœ‹é…ç½®</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="æ–°æ–¹æ³•"><a href="#æ–°æ–¹æ³•" class="headerlink" title="æ–°æ–¹æ³•"></a>æ–°æ–¹æ³•</h3><p>å¯¹config.json æ–‡ä»¶è¿›è¡Œä¿®æ”¹</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/.docker</span><br><span class="line"><span class="built_in">cat</span> &gt; ~/.docker/config.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">{</span></span><br><span class="line"><span class="string"> "proxies":</span></span><br><span class="line"><span class="string"> {</span></span><br><span class="line"><span class="string">   "default":</span></span><br><span class="line"><span class="string">   {</span></span><br><span class="line"><span class="string">     "httpProxy": "http://192.168.3.3:8889",</span></span><br><span class="line"><span class="string">     "httpsProxy": "http://192.168.3.3:8889",</span></span><br><span class="line"><span class="string">     "noProxy": "127.0.0.1,docker.io,hub.docker.com,hub-mirror.c.163.com,pvjhx571.mirror.aliyuncs.com"</span></span><br><span class="line"><span class="string">   }</span></span><br><span class="line"><span class="string"> }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></tbody></table></figure>
<p>#å°† â€œhttpProxyâ€ å’Œ â€œhttpsProxyâ€ çš„å€¼æ›¿æ¢ä¸ºä½ çš„ä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£ã€‚<br>#æ³¨æ„ï¼šâ€noProxyâ€: æŒ‡å®šä¸éœ€è¦ä½¿ç”¨ä»£ç†çš„åœ°å€åˆ—è¡¨ï¼Œé€šå¸¸åŒ…æ‹¬æœ¬åœ°åœ°å€ã€‚</p>
<h2 id="ä½¿ç”¨å›½å¤–çš„dockeré•œåƒæº"><a href="#ä½¿ç”¨å›½å¤–çš„dockeré•œåƒæº" class="headerlink" title="ä½¿ç”¨å›½å¤–çš„dockeré•œåƒæº"></a>ä½¿ç”¨å›½å¤–çš„dockeré•œåƒæº</h2><p><strong>æ³¨æ„éœ€è¦é­”æ³•</strong><br>#å¦‚æœéœ€è¦å°† Docker é•œåƒä¸‹è½½ä»£ç†åˆ°å›½å¤– Docker å®˜ç½‘æˆ–å…¶ä»–å›½å¤–é•œåƒæºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š<br>åœ¨ daemon.json ä¸­é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://your-registry-mirror-url"</span>]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>ingressä¸ingress-controllerå°ç»“</title>
    <url>/looking/3d4be8d8.html</url>
    <content><![CDATA[<h1 id="k8sä¹‹ingress"><a href="#k8sä¹‹ingress" class="headerlink" title="k8sä¹‹ingress"></a>k8sä¹‹ingress</h1><p>serviceçš„ä½œç”¨ï¼šä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢</p>
<ol>
<li>å¯¹äºé›†ç¾¤å†…éƒ¨ï¼Œä»–ä¸æ–­è·Ÿè¸ªpodçš„å˜åŒ–ï¼Œæ›´æ–°endpointä¸­å¯¹åº”podçš„å¯¹è±¡ã€æä¾›äº†ipä¸æ–­å˜åŒ–çš„podçš„æœåŠ¡å‘ç°çš„æœºåˆ¶</li>
<li>å¯¹äºé›†ç¾¤å¤–éƒ¨ï¼Œä»–ç±»ä¼¼è´Ÿè½½å‡è¡¡å™¨ï¼Œå¯ä»¥åœ¨é›†ç¾¤å†…å¤–éƒ¨å¯¹podè¿›è¡Œè®¿é—®<br>ingressçš„ä½œç”¨ï¼šç”¨äºæš´éœ²é›†ç¾¤å†…çš„serviceåœ¨ç½‘ç»œèŠ‚ç‚¹ä¸Š</li>
</ol>
<h2 id="kubernetesæä¾›äº†ä¸‹é¢çš„å‡ ç§æ–¹å¼æ¥è®¿é—®é›†ç¾¤å†…éƒ¨çš„serviceï¼š"><a href="#kubernetesæä¾›äº†ä¸‹é¢çš„å‡ ç§æ–¹å¼æ¥è®¿é—®é›†ç¾¤å†…éƒ¨çš„serviceï¼š" class="headerlink" title="kubernetesæä¾›äº†ä¸‹é¢çš„å‡ ç§æ–¹å¼æ¥è®¿é—®é›†ç¾¤å†…éƒ¨çš„serviceï¼š"></a>kubernetesæä¾›äº†ä¸‹é¢çš„å‡ ç§æ–¹å¼æ¥è®¿é—®é›†ç¾¤å†…éƒ¨çš„serviceï¼š</h2><ol>
<li><p>NodePortï¼š</p>
<ul>
<li>å°†Serviceæš´éœ²åœ¨èŠ‚ç‚¹ç½‘ç»œä¸Š</li>
<li>NodePortèƒŒåå°±æ˜¯Kube-Proxyï¼ŒKube-Proxyæ˜¯æ²Ÿé€šServiceç½‘ç»œã€Podç½‘ç»œå’ŒèŠ‚ç‚¹çš„æ¡¥æ¢</li>
<li>ä¸€ä¸ªNodePortç«¯å£åªèƒ½å¯¹åº”ä¸€ä¸ªæœåŠ¡ã€æ‰€ä»¥åœ¨å‡ åä¸Šç™¾çš„æœåŠ¡åœ¨é›†ç¾¤ä¸­è¿è¡Œæ—¶ã€å¯¹NodePortç«¯å£ç®¡ç†å°±æ˜¯ä¸€ä¸ªç¾éš¾ã€æ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¸€èˆ¬ä¸ç”¨NodePortï¼ˆå¯ä½¿ç”¨çš„ç«¯å£èŒƒå›´ï¼š30000-32767ï¼‰</li>
</ul>
</li>
<li><p>LoadBalancerï¼š</p>
<ul>
<li>åªèƒ½ç”¨åœ¨äº‘å¹³å°ä¸­</li>
<li>é€šè¿‡è®¾ç½®LoadBalanceræ˜ å°„åˆ°äº‘æœåŠ¡å•†æä¾›çš„LoadBalanceråœ°å€</li>
<li>åœ¨Serviceæäº¤åï¼Œkubernetesä¼šè°ƒç”¨CloudProvideråœ¨å…¬æœ‰äº‘ä¸Šä¸ºåˆ›å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œå¹¶ä¸”æŠŠè¢«ä»£ç†çš„Podçš„ipåœ°å€é…ç½®ç»™è´Ÿè½½å‡è¡¡æœåŠ¡ç»™åç«¯</li>
</ul>
</li>
<li><p>externallIPsï¼š</p>
<ul>
<li>Serviceå…è®¸ä¸ºå…¶åˆ†é…å¤–éƒ¨ipï¼Œå¦‚æœå¤–éƒ¨ipè·¯ç”±åˆ°é›†ç¾¤ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªNodeä¸Šï¼ŒServiceä¼šè¢«æš´éœ²ç»™è¿™äº›externallIPs</li>
<li>é€šè¿‡å¤–éƒ¨ipè¿›å…¥åˆ°é›†ç¾¤çš„æµé‡ï¼Œå°†ä¼šè¢«è·¯ç”±åˆ°Serviceçš„EndPointä¸Š</li>
</ul>
</li>
<li><p>Ingressï¼š</p>
<ul>
<li>åªéœ€ä¸€ä¸ªæˆ–è€…å°‘é‡çš„å…¬ç½‘ipå’ŒLBï¼Œå°±å¯ä»¥åŒæ—¶å°†å¤šä¸ªHTTPæœåŠ¡æš´éœ²åˆ°å¤–ç½‘ã€ä¸ƒå±‚åå‘ä»£ç†</li>
<li>å¯ä»¥ç®€å•ç†è§£ä¸ºServiceçš„Serviceï¼Œå®é™…å°±æ˜¯ä¸€ç»„åŸŸåå’ŒURLè·¯å¾„ï¼ŒæŠŠç”¨æˆ·çš„è¯·æ±‚æŒ‰ç…§è§„åˆ™è½¬å‘åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªservice</li>
</ul>
</li>
</ol>
<h2 id="Ingress-ç»„ä»¶"><a href="#Ingress-ç»„ä»¶" class="headerlink" title="Ingress ç»„ä»¶"></a>Ingress ç»„ä»¶</h2><h3 id="ingress"><a href="#ingress" class="headerlink" title="ingress"></a>ingress</h3><blockquote>
<p>ingressæ˜¯ä¸€ä¸ªAPIå¯¹è±¡ï¼Œé€šè¿‡å¯¹yamlæ–‡ä»¶æ¥é…ç½®ï¼Œingresså¯¹è±¡çš„ä½œç”¨æ˜¯å®šä¹‰è¯·æ±‚å¦‚ä½•è½¬å‘åˆ°serviceçš„è§„åˆ™ã€å¯ä»¥ç†è§£ä¸ºé…ç½®æ¨¡æ¿<br>ingressé€šè¿‡httpæˆ–httpsæš´éœ²é›†ç¾¤å†…éƒ¨çš„Serviceï¼Œç»™Serviceæä¾›å¤–éƒ¨è®¿é—®çš„URLã€è´Ÿè½½å‡è¡¡ã€SSL/TLSèƒ½åŠ›ä»¥åŠåŸºäºåŸŸåçš„åå‘ä»£ç†<br>ingressè¦ä¾é ingress-controlleræ¥é›†ä½“äº‹é¡¹ä»¥ä¸Šçš„åŠŸèƒ½</p>
</blockquote>
<h3 id="ingress-controller-Ingressæ§åˆ¶å™¨-å¦‚ingress-nginx"><a href="#ingress-controller-Ingressæ§åˆ¶å™¨-å¦‚ingress-nginx" class="headerlink" title="ingress-controller (Ingressæ§åˆ¶å™¨-å¦‚ingress-nginx)"></a>ingress-controller (Ingressæ§åˆ¶å™¨-å¦‚ingress-nginx)</h3><blockquote>
<p>ingress-controller æ˜¯å…·ä½“å®ç°åå‘ä»£ç†æµè´Ÿè½½å‡è¡¡çš„ç¨‹åºã€å¯¹ingresså®šä¹‰çš„yamlè§„åˆ™è¿›è¡Œè§£æã€æ ¹æ®ingressé…ç½®çš„yamlè§„åˆ™æ¥è¿›è¡Œè¯·æ±‚çš„è½¬å‘<br>ingress-controller å¹¶ä¸æ˜¯k8sè‡ªå¸¦çš„ç»„ä»¶ã€å®é™…ingress-controlleråªæ˜¯ä¸€ä¸ªç»Ÿç§°ã€ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸åŒçš„ingress-controllerå®ç°ã€ç›®å‰ç”±k8sç»´æŠ¤çš„ingress-controlleråªæœ‰ï¼š</p>
<blockquote>
<ul>
<li><strong>googleäº‘çš„GCE</strong></li>
<li><strong>ingress-nginx</strong><br>ä¸€èˆ¬æ¥è¯´ï¼Œingress-controllerçš„å½¢å¼éƒ½æ˜¯ä¸€ä¸ªpodï¼Œé‡Œé¢è·‘ç€daemonç¨‹åºå’Œåå‘ä»£ç†çš„ç¨‹åº<br>daemon è´Ÿè´£ä¸æ–­ç›‘æ§é›†ç¾¤çš„å˜åŒ–ã€æ ¹æ®ingresså¯¹è±¡ç”Ÿæˆé…ç½®å¹¶åº”ç”¨æ–°é…ç½®åˆ°åå‘ä»£ç†ï¼Œæ¯”å¦‚ingress-nginxå°±æ˜¯åŠ¨æ€ç”Ÿæˆnginxé…ç½®ã€åŠ¨æ€æ›´æ–°upstreamï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™reloadç¨‹åºåº”ç”¨æ–°é…ç½®</li>
</ul>
</blockquote>
</blockquote>
<p><a href="https://github.com/kubernetes/ingress-nginx">ingress-nginx çš„githubåœ°å€</a><br><a href="https://kubernetes.github.io/ingress-nginx/">ingress-nginx çš„å®˜ç½‘</a></p>
<p><strong>å°ç»“</strong>:ingress-controlleræ‰æ˜¯è´Ÿè´£å…·ä½“è½¬å‘çš„ç»„ä»¶ã€é€šè¿‡å„ç§æ–¹å¼å°†å®ƒæš´éœ²åœ¨é›†ç¾¤çš„å…¥å£ã€å¤–éƒ¨å¯¹é›†ç¾¤çš„è¯·æ±‚æµé‡ä¼šå…ˆåˆ°ingress-controllerï¼Œè€Œingresså¯¹è±¡æ˜¯ç”¨æ¥å‘Šè¯‰ingress-controllerè¯¥å¦‚ä½•è½¬å‘è¿™äº›è¯·æ±‚ã€æ¯”å¦‚å“ªäº›åŸŸåã€å“ªäº›URLè¦è½¬å‘åˆ°å“ªäº›Serviceç­‰ç­‰</p>
<hr>
<hr>
<h2 id="Ingress-å·¥ä½œåŸç†"><a href="#Ingress-å·¥ä½œåŸç†" class="headerlink" title="Ingress å·¥ä½œåŸç†"></a>Ingress å·¥ä½œåŸç†</h2><ol>
<li>ingress-controlleré€šè¿‡å’Œkubernetesçš„API-serveräº¤äº’ã€åŠ¨æ€çš„å»æ„ŸçŸ¥é›†ç¾¤ä¸­ingressè§„åˆ™çš„å˜åŒ–</li>
<li>ç„¶åå»è¯»å–ingressè§„åˆ™ï¼ŒæŒ‰ç…§yamlæ–‡ä»¶ä¸­è‡ªå®šä¹‰çš„è§„åˆ™ï¼Œè§„åˆ™å°±æ˜¯å†™æ˜äº†å“ªä¸ªåŸŸåå¯¹åº”å“ªä¸ªServiceæˆ–è€…å“ªä¸ªè·¯ç”±ï¼Œç”Ÿæˆä¸€æ®µnginxçš„é…ç½®</li>
<li>å°†ç”Ÿäº§çš„nginxé…ç½®å†™åˆ°ingress-controllerçš„podé‡Œé¢ï¼Œè¿™ä¸ªingress-controllerçš„podé‡Œè¿è¡Œä¸€ä¸ª<strong>NginxæœåŠ¡</strong>ï¼Œæ§åˆ¶å™¨ä¼šæŠŠç”Ÿæˆçš„nginxé…ç½®å†™å…¥NginxæœåŠ¡ä¸­çš„ <strong>/etc/nginx.conf</strong> æ–‡ä»¶ä¸­</li>
<li>æœ€åè‡ªåŠ¨reloadä¸€ä¸‹æ˜¯é…ç½®ç”Ÿæ•ˆã€ä»¥æ­¤è¾¾åˆ°åŸŸååŒºåˆ†é…ç½®å’ŒåŠ¨æ€æ›´æ–°çš„ä½œç”¨</li>
</ol>
<h2 id="Ingress-æš´éœ²Serviceçš„æ–¹å¼"><a href="#Ingress-æš´éœ²Serviceçš„æ–¹å¼" class="headerlink" title="Ingress æš´éœ²Serviceçš„æ–¹å¼"></a>Ingress æš´éœ²Serviceçš„æ–¹å¼</h2><ol>
<li><p>Deployment + LoadBalancerï¼š</p>
<blockquote>
<p>å¦‚æœè¦æŠŠingresséƒ¨ç½²åœ¨å…¬æœ‰äº‘ä¸­ï¼Œé‚£ç”¨è¿™ç§æ–¹å¼æ¯”è¾ƒé€‚åˆ<br>ç”¨Deploymentéƒ¨ç½²ingress-controller ï¼Œåˆ›å»ºä¸€ä¸ªtype: LoadBalancer çš„Serviceå…³è”è¿™ç»„pod<br>å¤§éƒ¨åˆ†å…¬æœ‰äº‘ï¼Œéƒ½ä¼šä¸ºLoadBalancerçš„Serviceè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œé€šå¸¸è¿˜ç»‘å®šäº†å…¬ç½‘çš„åœ°å€ã€åªè¦æŠŠåŸŸåè§£ææŒ‡å‘è¯¥åœ°å€ï¼Œå°±å®ç°äº†é›†ç¾¤æœåŠ¡çš„å¯¹å¤–æš´éœ²<br>ç¼ºç‚¹ï¼šä¸é€‚ç”¨äºé«˜å¹¶å‘ã€å¤§é›†ç¾¤</p>
</blockquote>
</li>
<li><p>DaemonSet + HostNetwork + nodeSelector</p>
<blockquote>
<p>ç”¨DaemonSetç»“åˆnodeselectoræ¥éƒ¨ç½²ingress-controller åˆ°ç‰¹å®šçš„nodeä¸Šï¼Œç„¶åä½¿ç”¨HostNetworkç›´æ¥æŠŠè¯¥podä¸å®¿ä¸»æœºnodeçš„ç½‘ç»œæ‰“é€šï¼Œç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„80/443ç«¯å£å°±èƒ½è®¿é—®æœåŠ¡<br>è¿™æ—¶ï¼Œingress-controlleræ‰€åœ¨çš„nodeæœºå™¨å°±å¾ˆç±»ä¼¼ä¼ ç»Ÿæ¶æ„çš„è¾¹ç¼˜èŠ‚ç‚¹ã€æ¯”å¦‚æœºæˆ¿å…¥å£çš„nginxæœåŠ¡å™¨<br>è¯¥æ–¹å¼æ•´ä¸ªè¯·æ±‚é“¾è·¯æ˜¯æœ€ç®€å•çš„ï¼Œæ€§èƒ½ç›¸å¯¹NodePortæ¨¡å¼æ›´å¥½<br>ç¼ºç‚¹ï¼šç”±äºç›´æ¥åˆ©ç”¨å®¿ä¸»æœºèŠ‚ç‚¹çš„ç½‘ç»œå’Œç«¯å£ã€å¯¼è‡´ä¸€ä¸ªnodeåªèƒ½éƒ¨ç½²ä¸€ä¸ªingreess-controller pod<br>æ¯”è¾ƒé€‚åˆå¤§å¹¶å‘çš„ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</p>
</blockquote>
</li>
<li><p>Deployment + NodePortï¼š</p>
<blockquote>
<p>ç”¨deploymentæ¨¡å¼éƒ¨ç½²ingress-controllerï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„serviceï¼Œä½†æ˜¯typeï¼šNodePort<br>è¿™æ ·ingresså°±ä¼šæš´éœ²åœ¨é›†ç¾¤èŠ‚ç‚¹ipçš„ç‰¹å®šç«¯å£ä¸Š<br>ç”±äºnodeportæš´éœ²çš„ç«¯å£æ˜¯éšæœºç«¯å£ã€ä¸€èˆ¬ä¼šåœ¨å‰é¢å†æ­å»ºä¸€å¥—è´Ÿè½½å‡è¡¡å™¨æ¥è½¬å‘è¯·æ±‚<br>è¯¥æ–¹å¼é€‚ç”¨äºå®¿ä¸»æœºæ˜¯ç›¸å¯¹å›ºå®šçš„ipåœ°å€ä¸å˜çš„æƒ…å†µä¸‹<br>NodePortæ–¹å¼æš´éœ²ingress è™½ç„¶ç®€å•æ–¹ä¾¿ã€ä½†æ˜¯NodePortå¤šäº†ä¸€å±‚NATï¼Œåœ¨è¯·æ±‚é‡æå¤§æ—¶å¯¹æ€§èƒ½æœ‰ä¸€å®šçš„å½±å“<br>ç¼ºç‚¹ï¼šå¯¹åæœŸçš„ç»´æŠ¤éš¾åº¦åŠ å¤§ã€å¯¹æµé‡è½¬å‘å‹åŠ›ä¹Ÿä¼šå˜å¤§ã€ä¸”å¯¹é«˜å¹¶å‘æ”¯æŒä¸æ˜¯å¾ˆå‹å¥½</p>
</blockquote>
</li>
</ol>
<h2 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h2><blockquote>
<p>å®¢æˆ·ç«¯â€“&gt;ingress-controllerâ€“&gt;ingress(æ ¹æ®é…ç½®çš„è·¯ç”±è§„åˆ™)â€“&gt;Service(æ‰¾åˆ°å¯¹åº”çš„æœåŠ¡)â€“&gt;pod(é›†ç¾¤å†…é€šè¿‡serviceå»è®¿é—®podæˆ–å®¹å™¨å†…çš„ç¨‹åº)</p>
</blockquote>
<p><a href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/">å‚è€ƒï¼šhttps://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/</a></p>
<hr>
<hr>
<h2 id="Ingress-é…ç½®éƒ¨ç½²"><a href="#Ingress-é…ç½®éƒ¨ç½²" class="headerlink" title="Ingress é…ç½®éƒ¨ç½²"></a>Ingress é…ç½®éƒ¨ç½²</h2><ol>
<li>åˆ›å»ºingress-controllerçš„Deploymentï¼š</li>
</ol>
<ul>
<li>ingress-nginx-controller.yaml<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">automountServiceAccountToken:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">namespaces</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">configmaps</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pods</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">secrets</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">endpoints</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">services</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ingresses</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ingresses/status</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ingressclasses</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">coordination.k8s.io</span></span><br><span class="line">  <span class="attr">resourceNames:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ingress-nginx-leader</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">leases</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">coordination.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">leases</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">events</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">patch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">discovery.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">endpointslices</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">secrets</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">configmaps</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">endpoints</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">nodes</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pods</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">secrets</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">namespaces</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">coordination.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">leases</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">nodes</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">services</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ingresses</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">""</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">events</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">patch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ingresses/status</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ingressclasses</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">discovery.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">endpointslices</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">admissionregistration.k8s.io</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">validatingwebhookconfigurations</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">update</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">allow-snippet-annotations:</span> <span class="string">"true"</span></span><br><span class="line">  <span class="attr">compute-full-forwarded-for:</span> <span class="string">"true"</span></span><br><span class="line">  <span class="attr">forwarded-for-header:</span> <span class="string">X-Forwarded-For</span></span><br><span class="line">  <span class="attr">use-forwarded-headers:</span> <span class="string">"true"</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">service.cloud.tencent.com/local-svc-weighted-balance:</span> <span class="string">"true"</span></span><br><span class="line">    <span class="attr">service.kubernetes.io/local-svc-only-bind-node-with-pod:</span> <span class="string">"true"</span></span><br><span class="line">    <span class="attr">service.kubernetes.io/tke-existed-lbid:</span> <span class="string">lb-jw7q1g74</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">externalTrafficPolicy:</span> <span class="string">Local</span></span><br><span class="line">  <span class="attr">ipFamilies:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">IPv4</span></span><br><span class="line">  <span class="attr">ipFamilyPolicy:</span> <span class="string">SingleStack</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">appProtocol:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="string">http</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">appProtocol:</span> <span class="string">https</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">https</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="string">https</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">LoadBalancer</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller-admission</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">appProtocol:</span> <span class="string">https</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">https-webhook</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="string">webhook</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-controller</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">minReadySeconds:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">imagePullSecrets:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">docker-secret</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/nginx-ingress-controller</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--publish-service=$(POD_NAMESPACE)/ingress-nginx-controller</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--election-id=ingress-nginx-leader</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--controller-class=k8s.io/ingress-nginx</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--ingress-class=nginx</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--configmap=$(POD_NAMESPACE)/ingress-nginx-controller</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--validating-webhook=:8443</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--validating-webhook-certificate=/usr/local/certificates/cert</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--validating-webhook-key=/usr/local/certificates/key</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAME</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.name</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAMESPACE</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">LD_PRELOAD</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">/usr/local/lib/libmimalloc.so</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">ccr.gpdc.cloud.cn/library-images/nginx-ingress-controller:v1.8.1</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">        <span class="attr">lifecycle:</span></span><br><span class="line">          <span class="attr">preStop:</span></span><br><span class="line">            <span class="attr">exec:</span></span><br><span class="line">              <span class="attr">command:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">/wait-shutdown</span></span><br><span class="line">        <span class="attr">livenessProbe:</span></span><br><span class="line">          <span class="attr">failureThreshold:</span> <span class="number">5</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/healthz</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">10254</span></span><br><span class="line">            <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">successThreshold:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">controller</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">443</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">https</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8443</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">webhook</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">        <span class="attr">readinessProbe:</span></span><br><span class="line">          <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/healthz</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">10254</span></span><br><span class="line">            <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">successThreshold:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="attr">requests:</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">100m</span></span><br><span class="line">            <span class="attr">memory:</span> <span class="string">90Mi</span></span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">capabilities:</span></span><br><span class="line">            <span class="attr">add:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">NET_BIND_SERVICE</span></span><br><span class="line">            <span class="attr">drop:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">          <span class="attr">runAsUser:</span> <span class="number">101</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/usr/local/certificates/</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">webhook-cert</span></span><br><span class="line">          <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">dnsPolicy:</span> <span class="string">ClusterFirst</span></span><br><span class="line">      <span class="attr">nodeSelector:</span></span><br><span class="line">        <span class="attr">kubernetes.io/os:</span> <span class="string">linux</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">ingress-nginx</span></span><br><span class="line">      <span class="attr">terminationGracePeriodSeconds:</span> <span class="number">300</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">webhook-cert</span></span><br><span class="line">        <span class="attr">secret:</span></span><br><span class="line">          <span class="attr">secretName:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Job</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission-create</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">ingress-nginx-admission-create</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">imagePullSecrets:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">docker-secret</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">create</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--host=ingress-nginx-controller-admission,ingress-nginx-controller-admission.$(POD_NAMESPACE).svc</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--namespace=$(POD_NAMESPACE)</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--secret-name=ingress-nginx-admission</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAMESPACE</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">ccr.gpdc.cloud.cn/library-images/kube-webhook-certgen:v20230407</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">create</span></span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">nodeSelector:</span></span><br><span class="line">        <span class="attr">kubernetes.io/os:</span> <span class="string">linux</span></span><br><span class="line">      <span class="attr">restartPolicy:</span> <span class="string">OnFailure</span></span><br><span class="line">      <span class="attr">securityContext:</span></span><br><span class="line">        <span class="attr">fsGroup:</span> <span class="number">2000</span></span><br><span class="line">        <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">runAsUser:</span> <span class="number">2000</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Job</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission-patch</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">ingress-nginx-admission-patch</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">imagePullSecrets:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">docker-secret</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">patch</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--webhook-name=ingress-nginx-admission</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--namespace=$(POD_NAMESPACE)</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--patch-mutating=false</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--secret-name=ingress-nginx-admission</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--patch-failure-policy=Fail</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAMESPACE</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">ccr.gpdc.cloud.cn/library-images/kube-webhook-certgen:v20230407</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">patch</span></span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">nodeSelector:</span></span><br><span class="line">        <span class="attr">kubernetes.io/os:</span> <span class="string">linux</span></span><br><span class="line">      <span class="attr">restartPolicy:</span> <span class="string">OnFailure</span></span><br><span class="line">      <span class="attr">securityContext:</span></span><br><span class="line">        <span class="attr">fsGroup:</span> <span class="number">2000</span></span><br><span class="line">        <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">runAsUser:</span> <span class="number">2000</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">IngressClass</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">controller:</span> <span class="string">k8s.io/ingress-nginx</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">admissionregistration.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ValidatingWebhookConfiguration</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">admission-webhook</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-nginx-admission</span></span><br><span class="line"><span class="attr">webhooks:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">admissionReviewVersions:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">v1</span></span><br><span class="line">  <span class="attr">clientConfig:</span></span><br><span class="line">    <span class="attr">service:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">ingress-nginx-controller-admission</span></span><br><span class="line">      <span class="attr">namespace:</span> <span class="string">ingress-nginx</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/networking/v1/ingresses</span></span><br><span class="line">  <span class="attr">failurePolicy:</span> <span class="string">Fail</span></span><br><span class="line">  <span class="attr">matchPolicy:</span> <span class="string">Equivalent</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">validate.nginx.ingress.kubernetes.io</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">networking.k8s.io</span></span><br><span class="line">    <span class="attr">apiVersions:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">v1</span></span><br><span class="line">    <span class="attr">operations:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">CREATE</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">UPDATE</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ingresses</span></span><br><span class="line">  <span class="attr">sideEffects:</span> <span class="string">None</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">å®‰è£…ï¼škubectl apply -f ingress-nginx.yaml</span><br><span class="line">æŸ¥çœ‹ï¼škubectl get pod -n ingress-nginx</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<ol start="2">
<li>åˆ›å»º Ingress èµ„æºï¼š<br>ingress.yaml<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span> </span><br><span class="line"><span class="attr">metadata:</span> </span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-rule</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">ops-system</span></span><br><span class="line">  <span class="attr">annotations:</span> </span><br><span class="line">    <span class="attr">kubernetes.io/ingress.class:</span> <span class="string">nginx</span> </span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/proxy-connect-timeout:</span> <span class="string">"30"</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/proxy-send-timeout:</span> <span class="string">"600"</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/proxy-read-timeout:</span> <span class="string">"600"</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/send-timeout:</span> <span class="string">"600"</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/enable-cors:</span> <span class="string">"true"</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/cors-allow-methods:</span> <span class="string">"*"</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/cors-allow-origin:</span> <span class="string">"*"</span></span><br><span class="line">    <span class="attr">nginx.ingress.kubernetes.io/proxy-body-size:</span> <span class="string">"1024m"</span></span><br><span class="line"><span class="attr">spec:</span> </span><br><span class="line">  <span class="attr">tls:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">hosts:</span></span><br><span class="line">        <span class="bullet">-</span> {<span class="string">IP_OR_DOMAIN</span>}    <span class="comment"># ä¿®æ”¹å¦‚æœä¸å†™åŸŸåå¯ä»¥å»æ‰ã€é»˜è®¤å°±æ˜¯æ¥å—æ‰€æœ‰ipè¿›æ¥çš„æµé‡</span></span><br><span class="line">      <span class="attr">secretName:</span> <span class="string">ops-tls-secret</span></span><br><span class="line">  <span class="attr">rules:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">http:</span> </span><br><span class="line">        <span class="attr">paths:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-webui-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/images'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-webui-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/static'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-webui-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/models'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-webui-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/fonts'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-webui-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/iconfont'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-webui-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/diffhtml/css_js'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-static-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/data/key_cfg_compare/export'</span> </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span> </span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">ops-static-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/api'</span></span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span></span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">iam-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8888</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/asset'</span></span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span></span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">kong-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8000</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/ops-manage/ws'</span></span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span></span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">kong-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8000</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/ops-manage'</span></span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span></span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">kong-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8000</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/ops-elink'</span></span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span></span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">kong-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8000</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">'/ops-metrics'</span></span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">            <span class="attr">backend:</span></span><br><span class="line">              <span class="attr">service:</span></span><br><span class="line">                <span class="attr">name:</span> <span class="string">kong-svc</span></span><br><span class="line">                <span class="attr">port:</span> </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8000</span></span><br><span class="line">        </span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">åˆ›å»ºï¼škubectl apply -f ingress.yaml</span><br><span class="line">æŸ¥çœ‹ï¼škubectl get ingress -n ops-system</span><br><span class="line">kubectl describe ingress-nginx -n ops-system</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>ingress</tag>
        <tag>ingress-controller</tag>
      </tags>
  </entry>
  <entry>
    <title>hello</title>
    <url>/looking/3610a686.html</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>è¯­æ³•</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>k8sé›†ç¾¤äºŒè¿›åˆ¶å®‰è£…</title>
    <url>/looking/688fa470.html</url>
    <content><![CDATA[<p><a href="https://www.cnblogs.com/littlecc/p/18226484">æŸ¥çœ‹æˆ‘çš„åšå®¢å›­æœ‰æ›´è¯¦ç»†çš„å®‰è£…æ­¥éª¤:https://www.cnblogs.com/littlecc/p/18226484</a></p>
]]></content>
      <categories>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8sé›†ç¾¤äºŒè¿›åˆ¶å®‰è£…</tag>
      </tags>
  </entry>
  <entry>
    <title>N1ç›’å­ç©æ³•-å†…ç½‘ç©¿é€å…¬ç½‘è®¿é—®</title>
    <url>/looking/1b6b5cf0.html</url>
    <content><![CDATA[<p class="p center logo large">å†…ç½‘ç©¿é€</p>

<h2 id="ğŸ¤¬ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€"><a href="#ğŸ¤¬ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€" class="headerlink" title="ğŸ¤¬ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€"></a>ğŸ¤¬ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€</h2><blockquote>
<p>åœ¨å¼€å§‹ä¹‹å‰å…ˆäº†è§£ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€å§ï¼<br>å†…ç½‘ç©¿é€å°±æ˜¯å°†å†…ç½‘(å¯ä»¥çœ‹ä½œæ˜¯å®¶åº­ç½‘ç»œ)é€šè¿‡<code>nat</code>å»ºç«‹ä¸€æ¡ä¸å…¬ç½‘ä¹‹é—´çš„éš§é“ã€å°†å†…ç½‘çš„æµé‡é€šè¿‡è¿™æ¡éš§é“å‘å¸ƒåˆ°å…¬ç½‘</p>
</blockquote>
<p><a href="https://www.cnblogs.com/littlecc/p/18299012">å‚è€ƒä¸€ä¸‹å†…éƒ¨æ–‡ç« ï¼šNATç½‘ç»œä¸å†…ç½‘ç©¿é€åŸç†</a></p>
<h2 id="ğŸ› -å†…ç½‘ç©¿é€å·¥å…·"><a href="#ğŸ› -å†…ç½‘ç©¿é€å·¥å…·" class="headerlink" title="ğŸ›  å†…ç½‘ç©¿é€å·¥å…·"></a>ğŸ›  å†…ç½‘ç©¿é€å·¥å…·</h2><h3 id="ä¸ªäººå°è¯•è¿‡çš„å·¥å…·ï¼š"><a href="#ä¸ªäººå°è¯•è¿‡çš„å·¥å…·ï¼š" class="headerlink" title="ä¸ªäººå°è¯•è¿‡çš„å·¥å…·ï¼š"></a>ä¸ªäººå°è¯•è¿‡çš„å·¥å…·ï¼š</h3><p><a href="https://www.cpolar.com/">cpolar</a>  <code>æ­¤å·¥å…·åªéœ€è¦å®‰è£…å®¢æˆ·ç«¯å³å¯ä¸”æœ‰å…è´¹çš„åŸŸåå¯ç”¨ã€ä½†æ˜¯å…è´¹çš„åŸŸå24å°æ—¶å°±ä¼šæ›´æ–°ã€æ”¶è´¹çš„ä¸ä¼š</code><br><a href="https://github.com/fatedier/frp">frp</a> <code>æ­¤å·¥å…·éœ€è¦æœ‰ä¸€å°å…¬ç½‘çš„æœåŠ¡å™¨ã€éœ€è¦å®‰è£…æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€çµæ´»åº¦é«˜ã€å¯è‡ªå®šä¹‰åŸŸå</code><br><a href="https://hpproxy.cn/#/client/server">HP-PRO</a> <code>æ­¤å·¥å…·åªéœ€å®‰è£…å®¢æˆ·ç«¯ä¸”åªéœ€åœ¨webç«¯é…ç½®å³å¯ã€æœ‰å…è´¹çš„åŸŸåã€ä½†æ˜¯è¿™æ˜¯ä¸€ä¸ªå…¬ç”¨çš„æ‰€ä»¥å¾ˆå¤šç«¯å£å·²ç»è¢«å ç”¨äº†</code></p>
<ul>
<li>å…¶å®ƒä¼—å¤šçš„å·¥å…·å¯ä»¥å‚è€ƒ:<a href="https://github.com/SexyBeast233/SecBooks/blob/main/%E3%80%90%E5%86%85%E7%BD%91%E7%B3%BB%E5%88%97%E3%80%91intranet/%E6%9C%80%E5%A5%BD%E7%94%A8%E7%9A%84%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%B7%A5%E5%85%B7%E5%90%88%E9%9B%86.md">github:SexyBeast233/SecBooks</a></li>
</ul>
<h3 id="frpå·¥å…·çš„ä½¿ç”¨"><a href="#frpå·¥å…·çš„ä½¿ç”¨" class="headerlink" title="frpå·¥å…·çš„ä½¿ç”¨"></a>frpå·¥å…·çš„ä½¿ç”¨</h3><h4 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h4><ol>
<li>å…ˆä¸‹è½½æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯(<a href="https://github.com/fatedier/frp/releases/tag/v0.59.0">https://github.com/fatedier/frp/releases/tag/v0.59.0</a>)</li>
<li>è§£å‹åï¼š<br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-1.6t70i0km2b.webp" alt="xiaoxin-1"></li>
<li>æœåŠ¡ç«¯åªéœ€è¦ç•™ä¸‹<code>frps</code>,<code>frps.toml</code>ä¸¤ä¸ªæ–‡ä»¶å³å¯</li>
</ol>
<ul>
<li>ä¸”<code>frps.toml</code>é…ç½®ï¼š<ul>
<li>bindPort = 7000 #æŒ‡æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯è¿æ¥çš„ç«¯å£</li>
<li>vhostHTTPPort = 8080 #å¯ä¸é…ã€è¿™é‡Œæˆ‘ç”¨äº†åŸŸåè®¿é—®å°±éœ€è¦é…ç½®è¿™ä¸ª</li>
</ul>
</li>
<li>å¯åŠ¨ï¼š<ul>
<li>./frps -c frps.toml  #å‰å°å¯åŠ¨</li>
<li>nohup ./frps -c frps.toml &amp; #åå°å¯åŠ¨  ï¼ˆæ¨èï¼‰</li>
</ul>
</li>
</ul>
<h4 id="å®¢æˆ·ç«¯-å†…ç½‘æœ¬åœ°"><a href="#å®¢æˆ·ç«¯-å†…ç½‘æœ¬åœ°" class="headerlink" title="å®¢æˆ·ç«¯(å†…ç½‘æœ¬åœ°)"></a>å®¢æˆ·ç«¯(å†…ç½‘æœ¬åœ°)</h4><ol>
<li>å…ˆä¸‹è½½æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯(<a href="https://github.com/fatedier/frp/releases/tag/v0.59.0">https://github.com/fatedier/frp/releases/tag/v0.59.0</a>)</li>
<li>è§£å‹åï¼šä¿ç•™<code>frpc</code>,<code>frpc.toml</code></li>
<li>é…ç½®<code>frpc.toml</code>æ–‡ä»¶ï¼š<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">serverAddr = <span class="string">"x.x.x.x"</span>  <span class="comment">#å…¬ç½‘ipï¼ŒæœåŠ¡ç«¯çš„ip</span></span><br><span class="line">serverPort = 7000       <span class="comment">#è¿æ¥æœåŠ¡ç«¯çš„ç«¯å£</span></span><br><span class="line"></span><br><span class="line">[[proxies]]             <span class="comment">#ä»£ç†é…ç½®</span></span><br><span class="line">name = <span class="string">"ssh"</span>            <span class="comment">#ä»£ç†åï¼Œéšæ„</span></span><br><span class="line"><span class="built_in">type</span> = <span class="string">"tcp"</span>            <span class="comment">#ä»£ç†ç±»å‹æœ‰ï¼štcpã€udpã€httpç­‰</span></span><br><span class="line">localIP = <span class="string">"127.0.0.1"</span>   <span class="comment">#å®¢æˆ·ç«¯æœ¬æœºip</span></span><br><span class="line">localPort = 22          <span class="comment">#ä»£ç†æœ¬æœºçš„å“ªä¸ªç«¯å£</span></span><br><span class="line">remotePort = 6000       <span class="comment">#å°†æœ¬æœºç«¯å£æ˜ å°„åˆ°æœåŠ¡å™¨çš„å“ªä¸ªç«¯å£ã€å½“è®¿é—®æœåŠ¡ç«¯çš„6000ç«¯å£æ—¶ç›¸å½“äºè®¿é—®æœ¬æœºçš„22ç«¯å£</span></span><br><span class="line"></span><br><span class="line">[[ proxies ]]</span><br><span class="line"><span class="comment">#å¦‚æœæœ‰å¤šä¸ªå¯ä»¥å†™å¤šä¸ªã€ä½†æ˜¯nameå¿…é¡»ä¸åŒ</span></span><br><span class="line">.....</span><br></pre></td></tr></tbody></table></figure>
==æ³¨æ„ï¼šå¯ä»¥å°†æ¯ä¸ªé…ç½®åˆ†å¼€å†™ã€å¯ä»¥ä¸€ä¸ªæœåŠ¡å†™ä¸€ä¸ªæ–‡ä»¶ã€å¦‚nginx.tomlã€mysql.tomlç­‰==<br>==å¦‚å¤šä¸ªé…ç½®æ–‡ä»¶æ—¶ã€å¯åŠ¨ï¼š==<blockquote>
<p>./frpc -c nginx.toml<br>./frpc -c mysql.toml<br>æ¯ä¸ªéƒ½èµ·ä¸€ä¸ªæœåŠ¡å³å¯</p>
</blockquote>
</li>
</ol>
<p><code>è¿™é‡Œå†æ‰©å±•ä¸€ä¸‹è‡ªå®šä¹‰åŸŸåçš„é…ç½®ï¼š</code></p>
<blockquote>
<p>å¦‚æœä½¿ç”¨åŸŸåè®¿é—®éœ€è¦åœ¨æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ä¸­åŠ ï¼švhostHTTPPort = 8080 æ­¤8080ç«¯å£æ˜¯ç»Ÿä¸€ä½¿ç”¨åŸŸåè®¿é—®çš„ç«¯å£<br>è¿™é‡Œæ–¹ä¾¿æˆ‘å°±å°†ä¸¤ä¸ªæœåŠ¡å†™åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­äº†ï¼ˆä½ å¯ä»¥åˆ†å¼€ï¼‰ï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">serverAddr = <span class="string">"47.120.22.246"</span></span><br><span class="line">serverPort = 7000</span><br><span class="line"></span><br><span class="line">[[proxies]]</span><br><span class="line">name = <span class="string">"N1-web"</span></span><br><span class="line"><span class="built_in">type</span> = <span class="string">"http"</span></span><br><span class="line">localPort = 80</span><br><span class="line">customDomains = [<span class="string">"nginx.xiaoxintops.top"</span>]    <span class="comment">#ä½¿ç”¨nginx.xiaoxintops.top:8080 è®¿é—®å³å¯è®¿é—®å†…ç½‘çš„80å¸¦ä½ çœ‹çš„nginx</span></span><br><span class="line"></span><br><span class="line">[[proxies]]</span><br><span class="line">name = <span class="string">"N1-web"</span></span><br><span class="line"><span class="built_in">type</span> = <span class="string">"http"</span></span><br><span class="line">localPort = 3306</span><br><span class="line">customDomains = [<span class="string">"mysql.xiaoxintops.top"</span>]  <span class="comment">#ä½¿ç”¨mysql.xiaoxintops.top:8080 è®¿é—®å³å¯è®¿é—®å†…ç½‘çš„3306å¸¦ä½ çœ‹çš„mysql</span></span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-2.1aow1vcdz9.webp" alt="xiaoxin-2"></p>
<p><code>æˆ‘è¿™é‡Œç”±äºåŸŸåæ²¡æœ‰å¤‡æ¡ˆã€æœåŠ¡å™¨åˆæ˜¯é˜¿é‡Œçš„ï¼Œæ‰€ä»¥åŸŸåè®¿é—®ä¸€æ¬¡åå°±ä¸å¯ç”¨äº†ï¼š</code><br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-3.86tjm1vo3q.webp" alt="xiaoxin-3"></p>
<p>==æ³¨æ„ï¼šä¸Šé¢æ‰€æœ‰æ˜ å°„çš„ç«¯å£éƒ½éœ€è¦åœ¨å…¬ç½‘çš„æœåŠ¡å™¨ä¸­æ”¾å¼€è¿™ä¸ªç«¯å£çš„è®¿é—®æƒé™==</p>
<p><code>æ›´å¤šçš„é…ç½®å¦‚ä¸‹ï¼š</code><br><a href="https://gofrp.org/zh-cn/docs/examples/ssh/">frpå®˜ç½‘</a></p>
<h3 id="HP-PRO-ä½¿ç”¨"><a href="#HP-PRO-ä½¿ç”¨" class="headerlink" title="HP PRO ä½¿ç”¨"></a>HP PRO ä½¿ç”¨</h3><p><a href="https://hpproxy.cn/hp-doc/#/doc/doc1">å‚è€ƒå®˜ç½‘æ–‡æ¡£</a></p>
<ul>
<li><p>å…ˆç™»å½•webå®˜ç½‘ç½‘é¡µæ³¨å†Œä¸€ä¸‹æ‹¿åˆ°<code>é…ç½®çš„è®¾å¤‡ID</code>:<a href="https://hpproxy.cn/#/home/login">https://hpproxy.cn/#/home/login</a></p>
<blockquote>
<p>æ³¨å†Œç™»é™†åï¼šç‚¹å‡»<br>æ˜ å°„æœåŠ¡(é€‰æ‹©ç›¸åº”çš„æœåŠ¡å™¨ä½¿ç”¨) -&gt; åˆ°æ˜ å°„è®¾å¤‡(æ·»åŠ è®¾å¤‡-åˆ·æ–°æœ‰ä¸ª<code>è®¾å¤‡ID</code>) -&gt; è®°ä¸‹è¿™ä¸ª<code>è®¾å¤‡ID</code>ä¸‹é¢å®‰è£…çš„æ—¶å€™ä½¿ç”¨</p>
</blockquote>
</li>
<li><p>è¿™é‡Œæˆ‘æ˜¯ä½¿ç”¨<code>docker</code>å®‰è£…çš„ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡ docker run è¿è¡Œå®¹å™¨ ARM</span></span><br><span class="line">docker run --restart=always -d -e deviceId=é…ç½®çš„è®¾å¤‡ID registry.cn-shenzhen.aliyuncs.com/hserver/hp-pro:latest-arm64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡ docker run è¿è¡Œå®¹å™¨ - x86æˆ–amd</span></span><br><span class="line">docker run --restart=always -d -e deviceId=é…ç½®çš„è®¾å¤‡ID registry.cn-shenzhen.aliyuncs.com/hserver/hp-pro:latest</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>é…ç½®ç©¿é€</p>
</li>
</ul>
<ol>
<li><p>å®‰è£…å®Œååˆ°webç™»å½•ç•Œé¢çš„<code>æ˜ å°„è®¾å¤‡</code>æŸ¥çœ‹å®¢æˆ·ç«¯æ˜¯å¦æ­£å¸¸åœ¨çº¿<br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-4.5mnp9evphk.webp" alt="xiaoxin-4"></p>
</li>
<li><p>é…ç½®ç«¯å£æ˜ å°„</p>
<blockquote>
<p>å…ˆé…ç½®æ˜ å°„çš„ç«¯å£ - å°±æ˜¯æœåŠ¡ç«¯çš„ç«¯å£(åœ¨å…¬ç½‘è®¿é—®çš„ç«¯å£-ä¸æ˜¯æœ¬æœºå†…ç½‘æœåŠ¡çš„ç«¯å£)<br>å†åŸŸåé…ç½®ã€è¿™é‡Œé…ç½®çš„æ—¶å€™å¯ä¸éœ€è¦å¡«å†™<code>è‡ªå®šä¹‰åŸŸå</code>ã€ç›´æ¥ä½¿ç”¨ä»–æä¾›çš„äºŒçº§åŸŸå(æµ‹è¯•è¿‡è‡ªå®šä¹‰åŸŸåï¼šé…ç½®äº†CNAMEï¼šback1.hpnu.cn ä¹Ÿæ²¡ç”Ÿæ•ˆ)<br>æœ€åå†é…ç½®ï¼š<code>é…ç½®æ˜ å°„</code> - å¦‚ä¸‹å›¾äºŒ<br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-5.4xufpe86h5.webp" alt="xiaoxin-5"><br><code>å›¾äºŒï¼šé…ç½®æ˜ å°„</code><br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-6.45kt9nhe2.webp" alt="xiaoxin-6"></p>
</blockquote>
</li>
</ol>
<p>==æé†’ï¼šå¦‚æœåœ¨åŸŸåé…ç½®è¿™é‡Œé…ç½®é”™äº†åˆ æ‰åã€åŒä¸€ä¸ªåŸŸåå¯èƒ½æ— æ³•ç«‹é©¬ä½¿ç”¨ã€å¾—ç­‰è§£æè¢«é‡Šæ”¾åæ‰è¡Œ==</p>
<h2 id="ğŸ”—-æ‰©å±•ï¼šä½¿ç”¨ipv6"><a href="#ğŸ”—-æ‰©å±•ï¼šä½¿ç”¨ipv6" class="headerlink" title="ğŸ”— æ‰©å±•ï¼šä½¿ç”¨ipv6"></a>ğŸ”— æ‰©å±•ï¼šä½¿ç”¨ipv6</h2><ul>
<li>å‰ææ˜¯å…‰çŒ«å¼€å¯<code>ipv6</code></li>
<li>ä¸”éœ€è¦è®¿é—®çš„å®¢æˆ·ç«¯ä¹Ÿéœ€è¦æ”¯æŒ<code>ipv6</code>æ‰è¡Œ</li>
</ul>
<ol>
<li>è·å–æœ¬æœºçš„<code>ipv6</code>åœ°å€ã€å¦‚ï¼š<code>2408:xxx:684:fc7e:aedd:97ff:xx47:xxx</code></li>
<li>åˆ°<a href="https://dash.cloudflare.com/">cloudflare</a>åšDNSè§£æç»‘å®šåŸŸå<br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-7.45kt9nhe3.webp" alt="xiaoxin-7"></li>
<li>æ¥ä¸‹æ¥å°±éœ€è¦åšä»£ç†ã€ä½¿ç”¨nginxåšä»£ç†ï¼šå¦‚<code>nginx-proxy-manage</code></li>
</ol>
<ul>
<li><p>å®‰è£…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name=npm-nginx \</span><br><span class="line">  -p 8880:80 \</span><br><span class="line">  -p 81:81 \		</span><br><span class="line">  -p 18443:443 \</span><br><span class="line">  -v /mnt/mydisk/nginx-proxy-manage/data:/data \</span><br><span class="line">  -v /mnt/mydisk/nginx-proxy-manage/letsencrypt:/etc/letsencrypt \</span><br><span class="line">  --restart=always \</span><br><span class="line">  chishin/nginx-proxy-manager-zh:latest</span><br><span class="line"></span><br><span class="line"><span class="comment">#è‹±æ–‡é•œåƒ â€“ jc21/nginx-proxy-manager</span></span><br><span class="line"><span class="comment">#ä¸­æ–‡é•œåƒ â€“ chishin/nginx-proxy-manager-zh</span></span><br><span class="line"><span class="comment">#80æ˜¯nginxçš„httpç«¯å£</span></span><br><span class="line"><span class="comment">#81æ˜¯webç•Œé¢ç«¯å£</span></span><br><span class="line"><span class="comment">#443æ˜¯httpsç«¯å£</span></span><br><span class="line"><span class="comment">#/data æ˜¯ä¸€äº›nginxçš„é…ç½®æ–‡ä»¶ã€å¦‚æ—¥å¿—ã€ä¸Šä¼ çš„è¯ä¹¦ã€æ•°æ®åº“ï¼ˆé»˜è®¤ä½¿ç”¨sqliteï¼‰ã€ç­‰</span></span><br><span class="line"><span class="comment">#/etc/letsencrypt æ˜¯let's Encryptè¯ä¹¦ã€ç­‰ä¸€äº›é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>è®¿é—®ï¼šip:81<br>ç™»å½•ç”¨æˆ·åï¼š<a href="mailto:admin@example.com">admin@example.com</a><br>ç™»å½•å¯†ç ï¼šchangeme</p>
</blockquote>
</li>
<li><p>é…ç½®ä»£ç†ï¼š<br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-8.7p3hxguaj1.webp" alt="xiaoxin-8"><br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-9.7ego4bf2dq.webp" alt="xiaoxin-9"></p>
<blockquote>
<p>è¯ä¹¦å†…å®¹å¯æ›´æ¢ä¸ºï¼š<br>æäº¤åç­‰å¾…æäº¤å³å¯ï¼ˆä¼šæœ‰ç‚¹ä¹…ï¼‰</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"># Cloudflare API credentials used by Certbot</span><br><span class="line">dns_cloudflare_email = cloudflare@example.com		#cloudflareçš„ç™»å½•é‚®ç®±</span><br><span class="line">dns_cloudflare_api_key = 0123456789abcdef0123456789abcdef01234 </span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-10.9dcuunkkpc.webp" alt="xiaoxin-10"><br><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-11.syudab0eq.webp" alt="xiaoxin-11"></p>
</li>
</ul>
<p><img src="https://xiaoxin-top.github.io/picx-images-hosting/img/xiaoxin-12.8ad5jroqtw.webp" alt="xiaoxin-12"></p>
<ul>
<li>è¿™é‡Œè¿˜è¦ç»“åˆDDNS-GO åŠ¨æ€ipç»‘å®šåŸŸåï¼ˆå› ä¸ºipv6æ˜¯ä¼šå˜åŒ–çš„ï¼‰</li>
</ul>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>N1ç›’å­,istoreOS,å†…ç½‘ç©¿é€</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoæºç æ‰˜ç®¡åˆ°githubğŸ¤</title>
    <url>/looking/d67f438b.html</url>
    <content><![CDATA[<h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><ol>
<li>åˆ›å»ºgithubä»“åº“</li>
<li>å°†åˆ›å»ºå¥½çš„ä»“åº“cloneåˆ°æœ¬åœ°</li>
<li>å°†æºç æ–‡ä»¶æ‹·è´åˆ°cloneåˆ°æœ¬åœ°çš„ç›®å½•</li>
<li>pushæºç åˆ°github</li>
</ol>
<h2 id="1-åˆ›å»ºgithubä»“åº“"><a href="#1-åˆ›å»ºgithubä»“åº“" class="headerlink" title="1.åˆ›å»ºgithubä»“åº“"></a>1.åˆ›å»ºgithubä»“åº“</h2><p><img src="https://pic.imgdb.cn/item/667d9907d9c307b7e9482722.png" alt="create repo"></p>
<h2 id="2-å°†åˆ›å»ºå¥½çš„ä»“åº“cloneåˆ°æœ¬åœ°"><a href="#2-å°†åˆ›å»ºå¥½çš„ä»“åº“cloneåˆ°æœ¬åœ°" class="headerlink" title="2.å°†åˆ›å»ºå¥½çš„ä»“åº“cloneåˆ°æœ¬åœ°"></a>2.å°†åˆ›å»ºå¥½çš„ä»“åº“cloneåˆ°æœ¬åœ°</h2><ol>
<li><strong>åœ¨æœ¬åœ°çš„ä¸€ä¸ªç›®å½•ä¸‹å³é”®æ‰“å¼€ <em>Open Git Bash here</em></strong><br><img src="https://pic.imgdb.cn/item/667d9b4bd9c307b7e94c3396.png" alt="Open Git Bash here"></li>
<li><strong>ä¸‹è½½çš„æ–‡ä»¶å¤¹é‡Œä»…ç•™ä¸‹.git æ–‡ä»¶å¤¹ï¼Œå…¶ä»–çš„æ–‡ä»¶éƒ½åˆ é™¤</strong></li>
<li><strong>æ‰¾è§æˆ‘ä»¬æºç çš„ä½ç½®ï¼Œå°†æºç å†…çš„æ‰€ä»¥æ–‡ä»¶å’Œç›®å½•ï¼ˆé™¤.deploy_git ä»¥å¤–ï¼‰éƒ½å¤åˆ¶åˆ°cloneä¸‹æ¥çš„æ–‡ä»¶å¤¹ä¸­ï¼ˆxxxx.github.ioï¼‰</strong><br><strong>å¦‚æœå·²ç»cloneè¿‡ä¸»é¢˜æ–‡ä»¶ï¼Œé‚£ä¹ˆéœ€è¦æŠŠthemeä¸»é¢˜æ–‡ä»¶å¤¹é‡Œçš„ .git ä¹Ÿåˆ é™¤ã€‚å› ä¸ºgitä¸èƒ½åµŒå¥—ä¸Šä¼ ï¼Œæœ€å¥½æ˜¯æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼Œæ£€æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰ï¼Œå¦åˆ™ä¸Šä¼ çš„æ—¶å€™ä¼šå‡ºé”™ï¼Œå¯¼è‡´ä½ çš„ä¸»é¢˜æ–‡ä»¶æ— æ³•ä¸Šä¼ ï¼Œè¿™æ ·ä½ çš„é…ç½®åœ¨åˆ«çš„ç”µè„‘ä¸Šå°±ç”¨ä¸äº†äº†ã€‚</strong><br><em><strong>æ³¨æ„ï¼šç°åœ¨cloneä¸‹æ¥çš„æ–‡ä»¶å¤¹å†…åº”è¯¥æœ‰ä¸ª.gitignoreæ–‡ä»¶ï¼Œç”¨æ¥å¿½ç•¥ä¸€äº›ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œè¡¨ç¤ºè¿™äº›ç±»å‹æ–‡ä»¶ä¸éœ€è¦gitã€‚å¦‚æœæ²¡æœ‰ï¼Œå³é”®æ–°å»ºï¼Œå†…å®¹å¦‚ä¸‹ï¼š</strong></em><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">.DS<span class="emphasis">_Store</span></span><br><span class="line"><span class="emphasis">Thumbs.db</span></span><br><span class="line"><span class="emphasis">db.json</span></span><br><span class="line"><span class="emphasis">*.log</span></span><br><span class="line"><span class="emphasis">node_</span>modules/</span><br><span class="line">public/</span><br><span class="line">.deploy<span class="emphasis">*/</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><strong>å¤§æ¦‚ç›®å½•å¦‚ä¸‹</strong><br><img src="https://pic.imgdb.cn/item/667d9ca6d9c307b7e94e633a.png" alt="dir"></li>
</ol>
<h2 id="3-å°†æºç pushåˆ°github"><a href="#3-å°†æºç pushåˆ°github" class="headerlink" title="3.å°†æºç pushåˆ°github"></a>3.å°†æºç pushåˆ°github</h2><ol>
<li><strong>åœ¨cloneä¸‹æ¥çš„æ–‡ä»¶å¤¹å†…(xxxx.github.io)æ‰“å¼€ <em>Open Git Bash here</em></strong></li>
<li><strong>ä¾æ¬¡è¾“å…¥å‘½ä»¤ï¼š</strong><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git add .   <span class="comment">#æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">git commit -m <span class="string">"first commit"</span>    <span class="comment">#å¤‡æ³¨</span></span><br><span class="line">git push <span class="comment">#æ¨é€åˆ°github</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>__æ­¤æ—¶å·²ç»æˆåŠŸå°†æ•´ä¸ªç½‘ç«™æ¨é€åˆ°äº†è¿œç¨‹åº“__âœ…<br><img src="https://pic.imgdb.cn/item/667d9e4bd9c307b7e951197a.png" alt="push"></li>
<li>__å¦‚æœè¦æ›´æ–°ï¼Œåªéœ€è¦å°†æœ¬åœ°çš„ä»£ç æ›´æ–°åˆ°æœ¬åœ°ï¼Œç„¶åpushåˆ°è¿œç¨‹åº“å³å¯__ğŸ¤™</li>
</ol>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>githubæ‰˜ç®¡,ä¸ªäººåšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>k8så¸¸ç”¨å‘½ä»¤</title>
    <url>/looking/c0b83bc9.html</url>
    <content><![CDATA[<h1 id="é›†ç¾¤ç®¡ç†"><a href="#é›†ç¾¤ç®¡ç†" class="headerlink" title="é›†ç¾¤ç®¡ç†"></a>é›†ç¾¤ç®¡ç†</h1><p><code>1. æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get nodes</span><br></pre></td></tr></tbody></table></figure>
<p><code>2. æŸ¥çœ‹é›†ç¾¤èµ„æºä½¿ç”¨æƒ…å†µ:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> top nodes</span><br></pre></td></tr></tbody></table></figure>
<p><code>3. æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> cluster-info</span><br></pre></td></tr></tbody></table></figure>
<p><code>4. è·å–èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe node &lt;node-name&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>5. ç»™èŠ‚ç‚¹æ‰“æ ‡ç­¾:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> label nodes &lt;node-name&gt; key=value</span><br></pre></td></tr></tbody></table></figure>
<p><code>6. å–æ¶ˆèŠ‚ç‚¹æ ‡ç­¾:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> label nodes &lt;node-name&gt; key-</span><br></pre></td></tr></tbody></table></figure>
<p><code>7. æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get ns</span><br></pre></td></tr></tbody></table></figure>
<p><code>8. æŸ¥çœ‹å‘½åç©ºé—´ä¿¡æ¯ï¼š</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe namespace &lt;namespace-name&gt;</span><br></pre></td></tr></tbody></table></figure>
<h1 id="Podç®¡ç†"><a href="#Podç®¡ç†" class="headerlink" title="Podç®¡ç†"></a>Podç®¡ç†</h1><blockquote>
<p>k8sä¸­æœ€å°çš„å¯éƒ¨ç½²çš„è®¡ç®—å•å…ƒï¼Œç”¨æ¥å°è£…ä¸€ä¸ªæˆ–å¤šä¸ªç´§å¯†ç›¸å…³çš„å®¹å™¨åº”ç”¨ï¼Œå…±äº«å­˜å‚¨å’Œç½‘ç»œã€‚</p>
</blockquote>
<p><code>1. åˆ—å‡ºæ‰€æœ‰Pod:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get pods      <span class="comment">#æ— å‘½åç©ºé—´æƒ…å†µä¸‹</span></span><br><span class="line"><span class="variable">$kubectl</span> get pods -n &lt;namespace&gt;   <span class="comment">#æœ‰å‘½åç©ºé—´æƒ…å†µä¸‹</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>2. æŸ¥çœ‹ç‰¹å®šPodçš„æ—¥å¿—:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> logs &lt;pod-name&gt; -n &lt;namespace&gt;    <span class="comment">#æ‰“å°å½“å‰æ—¥å¿—</span></span><br><span class="line"><span class="variable">$kubectl</span> logs -f &lt;pod-name&gt; -n &lt;namespace&gt;  <span class="comment">#æŒç»­æ‰“å°æ—¥å¿—</span></span><br><span class="line"><span class="variable">$kubectl</span> logs -f --<span class="built_in">tail</span> 200 &lt;pod-name&gt; -n &lt;namespace&gt;  <span class="comment">#æŒç»­æ‰“å°æ—¥å¿—ä¸”æ‰“å°200è¡Œ </span></span><br></pre></td></tr></tbody></table></figure>
<p><code>3. è¿è¡Œä¸€ä¸ªä¸´æ—¶çš„Pod:</code><br> </p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> run my-pod --image=nginx</span><br></pre></td></tr></tbody></table></figure><br><code>4. è¿›å…¥æ­£åœ¨è¿è¡Œçš„Pod:</code><p></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> <span class="built_in">exec</span> -it &lt;pod-name&gt; -n &lt;namespace&gt; -- /bin/bash</span><br><span class="line">$ kubectl <span class="built_in">exec</span> -it &lt;pod-name&gt; -n &lt;namespace&gt; -- <span class="built_in">ls</span> /etc/  <span class="comment">#ä¸è¿›å…¥podï¼Œç›´æ¥æ‰§è¡Œpodä¸­çš„å‘½ä»¤</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>5. æŸ¥çœ‹ç‰¹å®šPodçš„è¯¦ç»†ä¿¡æ¯:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe pod &lt;pod-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>6. åˆ é™¤Pod:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> delete pod &lt;pod-name&gt; -n &lt;namespace&gt;</span><br><span class="line"><span class="variable">$kubectl</span> delete pod &lt;pod-name&gt; -n &lt;namespace&gt; --force --grace-period=0  <span class="comment">#å¼ºåˆ¶åˆ é™¤</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>7. æŸ¥çœ‹Podäº‹ä»¶:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe pod &lt;pod-name&gt; -n &lt;namespace&gt; | grep -i events</span><br></pre></td></tr></tbody></table></figure>

<h1 id="Deploymentç®¡ç†"><a href="#Deploymentç®¡ç†" class="headerlink" title="Deploymentç®¡ç†"></a>Deploymentç®¡ç†</h1><blockquote>
<p>ç”¨äºç®¡ç†Podçš„å£°æ˜å¼æ›´æ–°ï¼Œè‡ªåŠ¨å¤„ç†Podçš„åˆ›å»ºã€å‡çº§ã€å›æ»šç­‰ï¼Œä¿è¯é¢„æœŸçŠ¶æ€ã€‚</p>
</blockquote>
<p><code>1. åˆ—å‡ºæ‰€æœ‰Deployments:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get deployments  </span><br><span class="line"><span class="variable">$kubectl</span> get deployments -n &lt;namaspace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>2. æŸ¥çœ‹ç‰¹å®šDeploymentçš„è¯¦ç»†ä¿¡æ¯:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe deployment &lt;deployment-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>3. åˆ›å»ºDeployment:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> create deployment &lt;deployment-name&gt; --image=&lt;container-image&gt;</span><br><span class="line"><span class="variable">$kubectl</span> create deployment my-deployment --image=nginx</span><br></pre></td></tr></tbody></table></figure>
<p><code>4. æ›´æ–°Deploymentä¸­çš„å®¹å™¨é•œåƒ:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> <span class="built_in">set</span> image deployment/&lt;deployment-name&gt; &lt;container-name&gt;=&lt;new-container-image&gt; -n &lt;namespace&gt;</span><br><span class="line"><span class="variable">$kubectl</span> <span class="built_in">set</span> image deployment/my-deployment nginx=nginx:latest -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>5. å›æ»šDeploymentåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> rollout undo deployment/my-deployment -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>6. æŸ¥çœ‹Deploymentçš„æ›´æ–°å†å²:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> rollout <span class="built_in">history</span> deployment &lt;deployment-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>7. å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬çš„Deployment:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å‡è®¾è¦å›æ»šåˆ°ç¬¬3æ¬¡ä¿®è®¢ç‰ˆï¼š</span></span><br><span class="line"><span class="variable">$kubectl</span> rollout undo deployment &lt;deployment-name&gt; -n &lt;namespace&gt; --to-revision=3</span><br></pre></td></tr></tbody></table></figure>
<p><code>8. æŸ¥çœ‹DeploymentæŒ‡å®šæ ‡ç­¾ä¸‹çš„çš„PodsçŠ¶æ€</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get pods -l app=&lt;deployment-label&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>9. æŸ¥çœ‹Deploymentçš„äº‹ä»¶:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe deployment &lt;deployment-name&gt; -n &lt;namespace&gt; | grep -i events</span><br></pre></td></tr></tbody></table></figure>
<p><code>10. ç›‘æ§Deploymentçš„æ›´æ–°è¿›åº¦:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> rollout status deployment &lt;deployment-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>11. æ‰©å¤§æˆ–ç¼©å°å‰¯æœ¬æ•°é‡:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> scale deployment &lt;deployment-name&gt; -n &lt;namespace&gt; --replicas=5</span><br></pre></td></tr></tbody></table></figure>
<p><code>12. åˆ é™¤Deploymentï¼š</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> delete deployment &lt;deployment-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>

<h1 id="Serviceç®¡ç†"><a href="#Serviceç®¡ç†" class="headerlink" title="Serviceç®¡ç†"></a>Serviceç®¡ç†</h1><blockquote>
<p>å®šä¹‰ä¸€ç§è®¿é—®Podçš„ç­–ç•¥å’ŒæŠ½è±¡å±‚ï¼Œæä¾›ç¨³å®šçš„è®¿é—®å…¥å£ï¼Œå®ç°æœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡ã€‚</p>
</blockquote>
<p><code>1. åˆ—å‡ºæ‰€æœ‰Services:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get services &lt;-n&gt; &lt;namespace&gt;</span><br><span class="line"><span class="variable">$kubectl</span> get services  &lt;-n&gt; &lt;namespace&gt; -o wide</span><br></pre></td></tr></tbody></table></figure>
<p><code>2. æŸ¥çœ‹ç‰¹å®šServiceçš„è¯¦ç»†ä¿¡æ¯:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe service &lt;service-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>3. åˆ›å»ºService:</code></p>
<blockquote>
<p>å¯ä»¥ç›´æ¥é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…YAMLæ–‡ä»¶åˆ›å»ºï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> create service clusterip my-service --tcp=80:8080</span><br></pre></td></tr></tbody></table></figure>
<p><code>4. æš´éœ²Deploymentä¸ºService:</code></p>
<blockquote>
<p>è‡ªåŠ¨åˆ›å»ºServiceæŒ‡å‘Deploymentçš„æ‰€æœ‰Podsï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> expose deployment &lt;deployment-name&gt; &lt;-n&gt; &lt;namespace&gt; --<span class="built_in">type</span>=LoadBalancer --port=80 --target-port=8080</span><br></pre></td></tr></tbody></table></figure>
<p><code>5. ç¼–è¾‘Serviceé…ç½®:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> edit service &lt;service-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>6. æ›´æ”¹Serviceç±»å‹:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> patch service &lt;service-name&gt; &lt;-n&gt; &lt;namespace&gt; -p <span class="string">'{"spec": {"type": "NodePort"}}'</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>7. åˆ é™¤Service:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> delete service &lt;service-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>8. åˆ›å»ºClusterIPç±»å‹çš„serviceï¼š</code></p>
<blockquote>
<p>ClusterIPä¸ºServiceåˆ†é…ä¸€ä¸ªä»…é›†ç¾¤å†…éƒ¨å¯è®¿é—®çš„IPåœ°å€ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤è¡Œåˆ›å»ºï¼š</span></span><br><span class="line"><span class="variable">$kubectl</span> create service clusterip my-service --tcp=80:8080</span><br></pre></td></tr></tbody></table></figure>

<p><code>åŸºäºserver.yamlæ–‡ä»¶åˆ›å»ºservice</code></p>
<blockquote>
<p>kubectl apply -f server.yaml</p>
</blockquote>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">MyApp</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>9. åˆ›å»ºNodePortç±»å‹çš„serviceï¼š</code></p>
<blockquote>
<p>NodePortä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå¼€æ”¾ä¸€ä¸ªé™æ€ç«¯å£ï¼Œä¾›å¤–éƒ¨è®¿é—®é›†ç¾¤å†…éƒ¨çš„æœåŠ¡ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># å‘½ä»¤è¡Œåˆ›å»ºï¼š</span></span><br><span class="line">kubectl expose deployment my-deployment --<span class="built_in">type</span>=NodePort --port=80 --target-port=8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸºäºyamlæ–‡ä»¶åˆ›å»ºï¼š</span></span><br><span class="line"><span class="variable">$kubectl</span> apply -f xxx.yaml</span><br><span class="line"></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: my-service-nodeport</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    app: MyApp</span><br><span class="line">  ports:</span><br><span class="line">    - protocol: TCP</span><br><span class="line">      port: 80</span><br><span class="line">      targetPort: 8080</span><br><span class="line">      nodePort: 30080  <span class="comment"># æŒ‡å®šèŠ‚ç‚¹ä¸Šçš„ç«¯å£</span></span><br><span class="line">  <span class="built_in">type</span>: NodePort</span><br></pre></td></tr></tbody></table></figure>

<p><code>10. åˆ›å»ºLoadBalancerç±»å‹çš„serviceï¼š</code></p>
<blockquote>
<p>é€‚ç”¨äºéœ€è¦äº‘æä¾›å•†çš„è´Ÿè½½å‡è¡¡å™¨æ¥æš´éœ²æœåŠ¡çš„æƒ…å†µã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤è¡Œåˆ›å»ºï¼š</span></span><br><span class="line">kubectl expose deployment my-deployment --<span class="built_in">type</span>=LoadBalancer --port=80 --target-port=8080</span><br><span class="line"><span class="comment"># åŸºäºyamlæ–‡ä»¶åˆ›å»ºï¼š</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: my-service-loadbalancer</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    app: MyApp</span><br><span class="line">  ports:</span><br><span class="line">    - protocol: TCP</span><br><span class="line">      port: 80</span><br><span class="line">      targetPort: 8080</span><br><span class="line">  <span class="built_in">type</span>: LoadBalancer</span><br></pre></td></tr></tbody></table></figure>

<h1 id="PV-PVCç®¡ç†"><a href="#PV-PVCç®¡ç†" class="headerlink" title="PV/PVCç®¡ç†"></a>PV/PVCç®¡ç†</h1><blockquote>
<p>Persistent Volumes (PVs) æä¾›äº†æŒä¹…åŒ–çš„å­˜å‚¨èµ„æºï¼ŒPVç±»å‹å¤šç§å¤šæ ·ï¼Œæ”¯æŒä¸åŒçš„å­˜å‚¨åç«¯ï¼Œå¦‚æœ¬åœ°å­˜å‚¨ã€ç½‘ç»œå­˜å‚¨ï¼ˆå¦‚NFSã€GlusterFSã€Cephç­‰ï¼‰ã€‚</p>
</blockquote>
<p><code>1. åˆ—å‡ºæ‰€æœ‰PV:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get pv -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>2. æŸ¥çœ‹PVè¯¦ç»†ä¿¡æ¯:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe pv &lt;pv-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>3. åˆ›å»ºæœ¬åœ°PV:</code></p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">local-pv-example</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">10Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteOnce</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Retain</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">local-storage</span></span><br><span class="line">  <span class="attr">local:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/mnt/data</span></span><br><span class="line">  <span class="attr">nodeAffinity:</span></span><br><span class="line">    <span class="attr">required:</span></span><br><span class="line">      <span class="attr">nodeSelectorTerms:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">matchExpressions:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">kubernetes.io/hostname</span></span><br><span class="line">          <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">          <span class="attr">values:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">node01</span>  <span class="comment"># æŒ‡å®šèŠ‚ç‚¹åç§°</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>4. åˆ›å»ºNFS PVï¼š</code></p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nfs-pv-example</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">10Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Recycle</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nfs</span></span><br><span class="line">  <span class="attr">nfs:</span></span><br><span class="line">    <span class="attr">server:</span> <span class="string">&lt;nfs-server-ip&gt;</span> <span class="comment"># nfsæœåŠ¡ip</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">"/exports/data"</span>   <span class="comment"># nfså…±äº«ç›®å½•</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>5. åˆ—å‡ºæ‰€æœ‰PVC:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get pvc -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>6. æŸ¥çœ‹PVCè¯¦ç»†ä¿¡æ¯:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> describe pvc &lt;pvc-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>7. åˆ›å»ºPVCï¼š</code></p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">myclaim</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteOnce</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">5Gi</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">local-storage</span>  <span class="comment"># æˆ– nfsï¼Œéœ€ä¸PVçš„storageClassNameåŒ¹é…</span></span><br></pre></td></tr></tbody></table></figure>

<h1 id="ConfigMapç®¡ç†"><a href="#ConfigMapç®¡ç†" class="headerlink" title="ConfigMapç®¡ç†"></a>ConfigMapç®¡ç†</h1><blockquote>
<p>ç”¨æ¥å­˜å‚¨é…ç½®æ•°æ®ï¼Œå¦‚åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œä»¥é”®å€¼å¯¹å½¢å¼æŒ‚è½½åˆ°Podä¸­ï¼Œæ–¹ä¾¿åº”ç”¨ç¨‹åºè¯»å–å’Œåˆ†ç¦»é…ç½®ä¸ä»£ç ã€‚</p>
</blockquote>
<p><code>1. åˆ›å»ºConfigMap:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#æ–‡ä»¶åå½“é”®ï¼Œæ–‡ä»¶å†…å®¹å½“å€¼</span></span><br><span class="line"><span class="variable">$kubectl</span> create configmap nginx-config --from-file=./www.conf</span><br><span class="line"><span class="comment">#æŒ‡å®šæŸä¸ªç›®å½•ä¸ºé…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line"><span class="variable">$kubectl</span> create configmap ops-metrics-config -n ops-system --from-file=configmap/ops-metrics</span><br></pre></td></tr></tbody></table></figure>
<p><code>2. æŸ¥çœ‹ConfigMap</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> get configmaps -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
<p><code>3. åˆ é™¤ConfigMap:</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$kubectl</span> delete configmap  &lt;my-configmap&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title>k8sé›†ç¾¤å®‰è£…-kubeadmå®‰è£…</title>
    <url>/looking/c38bf18e.html</url>
    <content><![CDATA[<h1 id="kubeadm-å®‰è£…é›†ç¾¤"><a href="#kubeadm-å®‰è£…é›†ç¾¤" class="headerlink" title="kubeadm å®‰è£…é›†ç¾¤"></a>kubeadm å®‰è£…é›†ç¾¤</h1><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><table>
<thead>
<tr>
<th align="center">è§’è‰²</th>
<th align="center">IP</th>
<th align="center">ç»„ä»¶</th>
</tr>
</thead>
<tbody><tr>
<td align="center">k8s-master</td>
<td align="center">192.168.1.20</td>
<td align="center">kube-apiserverï¼Œkube-controller-managerï¼Œkube-schedulerï¼Œdocker, etcd</td>
</tr>
<tr>
<td align="center">k8s-node01</td>
<td align="center">192.168.1.18</td>
<td align="center">kubeletï¼Œkube-proxyï¼Œdocker, etcd</td>
</tr>
<tr>
<td align="center">k8s-node02</td>
<td align="center">192.168.1.19</td>
<td align="center">kubeletï¼Œkube-proxyï¼Œdocker, etcd</td>
</tr>
</tbody></table>
<ul>
<li><strong>dockerç‰ˆæœ¬ï¼šdocker-ce 20.10.9</strong></li>
<li><strong>kubernetesç‰ˆæœ¬ï¼šv1.21.4</strong></li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">1ã€å…³é—­é˜²ç«å¢™</span><br><span class="line">    - systemctl stop firewalld</span><br><span class="line">    - systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"></span><br><span class="line">2ã€å…³é—­Selinux</span><br><span class="line">    - setenforce 0</span><br><span class="line">    - sed -i <span class="string">'s/enforcing/disabled/g'</span> /etc/selinux/config</span><br><span class="line">3ã€å…³é—­swap</span><br><span class="line">    - sudo sed -i <span class="string">'/swap/s/^/#/'</span> /etc/fstab     <span class="comment">#æ³¨é”€æ‰ å«æœ‰ swap çš„è¡Œ      /swap/: åŒ¹é…åŒ…å« swap çš„è¡Œã€‚s/^/#/: åœ¨æ¯è¡Œçš„å¼€å¤´ï¼ˆ^ è¡¨ç¤ºè¡Œçš„å¼€å¤´ï¼‰æ·»åŠ  # å·</span></span><br><span class="line"></span><br><span class="line">4ã€ä¿®æ”¹ä¸»æœºå</span><br><span class="line">    - hostnamectl set-hostname k8s-master</span><br><span class="line">    - hostnamectl set-hostname k8s-node01</span><br><span class="line">    - hostnamectl set-hostname k8s-node02</span><br><span class="line"></span><br><span class="line">5ã€æ—¶é—´åŒæ­¥ </span><br><span class="line">yum install ntpdate -y </span><br><span class="line">ntpdate ntp1.aliyun.com</span><br><span class="line"></span><br><span class="line">6ã€å®šæ—¶ä»»åŠ¡</span><br><span class="line">crontab -e</span><br><span class="line">*/30 * * * * /usr/sbin/ntpdate-u ntp1.aliyun.com &gt;&gt; /var/log/ntpdate.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">7ã€å†…æ ¸å‚æ•°è°ƒæ•´</span><br><span class="line">modprobe br_netfilter</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/sysctl.d/kubernetes.conf &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables=1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables=1</span></span><br><span class="line"><span class="string">net.ipv4.ip_forward=1</span></span><br><span class="line"><span class="string">net.ipv4.tcp_tw_recycle=0           # è¡¨ç¤ºå¼€å¯TCPè¿æ¥ä¸­TIME-WAIT socketsçš„å¿«é€Ÿå›æ”¶ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­</span></span><br><span class="line"><span class="string">vm.swappiness=0                     # ç¦æ­¢ä½¿ç”¨ swap ç©ºé—´ï¼Œåªæœ‰å½“ç³»ç»Ÿ OOM æ—¶æ‰å…è®¸ä½¿ç”¨å®ƒ</span></span><br><span class="line"><span class="string">vm.overcommit_memory=1              # ä¸æ£€æŸ¥ç‰©ç†å†…å­˜æ˜¯å¦å¤Ÿç”¨</span></span><br><span class="line"><span class="string">fs.inotify.max_user_instances=8192  # å¼€å¯ OOM</span></span><br><span class="line"><span class="string">vm.panic_on_oom=0 </span></span><br><span class="line"><span class="string">fs.inotify.max_user_watches=1048576</span></span><br><span class="line"><span class="string">fs.file-max=52706963</span></span><br><span class="line"><span class="string">fs.nr_open=52706963</span></span><br><span class="line"><span class="string">net.ipv6.conf.all.disable_ipv6=1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">sysctl -p /etc/sysctl.d/kubernetes.conf</span><br><span class="line"></span><br><span class="line">8ã€å¼€å¯ ipvs</span><br><span class="line">lsmod|grep ip_vs</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">ls</span> /lib/modules/$(<span class="built_in">uname</span> -r)/kernel/net/netfilter/ipvs|grep -o <span class="string">"^[^.]*"</span>); <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>; /sbin/modinfo -F filename <span class="variable">$i</span> &gt;/dev/null 2&gt;&amp;1 &amp;&amp; /sbin/modprobe <span class="variable">$i</span>; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ls</span> /lib/modules/$(<span class="built_in">uname</span> -r)/kernel/net/netfilter/ipvs|grep -o <span class="string">"^[^.]*"</span> &gt;&gt; /etc/modules</span><br><span class="line"></span><br><span class="line">9ã€å®‰è£… ipvsadm</span><br><span class="line">yum install ipvsadm ipset -y</span><br></pre></td></tr></tbody></table></figure>

<h2 id="dockerå®‰è£…"><a href="#dockerå®‰è£…" class="headerlink" title="dockerå®‰è£…"></a>dockerå®‰è£…</h2><details>
<summary>centos</summary>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€ä¸‹è½½é˜¿é‡Œ çš„docker-ceé•œåƒæºä»“åº“æ–‡ä»¶ï¼š</span></span><br><span class="line">wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo    <span class="comment">#å°†repoæ–‡ä»¶ä¸‹è½½åˆ°æŒ‡å®šçš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€æ›´æ–°yumæºï¼š</span></span><br><span class="line">yum makecache fast</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€æŸ¥çœ‹docker-ceç‰ˆæœ¬ï¼š</span></span><br><span class="line">yum list docker-ce --showduplicates</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4ã€æ–°å»ºdockeré…ç½®æ–‡ä»¶daemon.jsonï¼ˆä½œç”¨æ˜¯é…ç½®dockerå›½å†…çš„é•œåƒä¸‹è½½çš„ç½‘ç«™ã€é˜¿é‡Œäº‘åŠ é€Ÿå™¨ï¼‰ï¼š</span></span><br><span class="line"><span class="built_in">mkdir</span> /etc/docker</span><br><span class="line"><span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">{</span><br><span class="line"><span class="string">"exec-opts"</span>: [<span class="string">"native.cgroupdriver=systemd"</span>],</span><br><span class="line"><span class="string">"registry-mirrors"</span>:[<span class="string">"https://gwsg6nw9.mirror.aliyuncs.com"</span>]</span><br><span class="line">}</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5ã€å®‰è£…dockeræŒ‡å®šç‰ˆæœ¬ï¼š</span></span><br><span class="line">yum install -y --<span class="built_in">setopt</span>=obsoletes=0 docker-ce-20.10.9-3.el7      <span class="comment">#--setopt=obsoletes=0å…³é—­å®‰è£…æœ€æ–°çš„åŒ… æŒ‡å®šå®‰è£…ç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6ã€å¯åŠ¨dockerï¼š</span></span><br><span class="line">systemctl start docker.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. ä¿®æ”¹cgroupé©±åŠ¨ä¸ºsystemdï¼Œé€‚é…k8sé»˜è®¤é€‰é¡¹</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/docker/daemon.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">{</span></span><br><span class="line"><span class="string">  "exec-opts": ["native.cgroupdriver=systemd"],</span></span><br><span class="line"><span class="string">  "registry-mirrors":["https://xxxxxxx.aliyuncs.com"],  #é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ,è¿™é‡Œéœ€è¦ä»é˜¿é‡Œäº‘å¹³å°è·å–</span></span><br><span class="line"><span class="string">  "log-driver": "json-file",</span></span><br><span class="line"><span class="string">  "log-opts": {</span></span><br><span class="line"><span class="string">    "max-size": "100m"</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  "storage-driver": "overlay2",</span></span><br><span class="line"><span class="string">  "storage-opts": [</span></span><br><span class="line"><span class="string">    "overlay2.override_kernel_check=true"</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 8ã€æŸ¥çœ‹dockerç‰ˆæœ¬ï¼š</span></span><br><span class="line">docker version</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</details>
<details>
<summary>ubuntu</summary>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 1. å®‰è£…GPGè¯ä¹¦</span></span><br><span class="line">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å†™å…¥è½¯ä»¶æºä¿¡æ¯</span></span><br><span class="line">add-apt-repository <span class="string">"deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="subst">$(lsb_release -cs)</span> stable"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æ›´æ–°</span></span><br><span class="line">apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. æŸ¥è¯¢ç‰ˆæœ¬</span></span><br><span class="line">apt-cache madison docker-ce</span><br><span class="line"><span class="comment">#docker-ce | 5:20.10.9~3-0~ubuntu-focal | https://mirrors.aliyun.com/docker-ce/linux/ubuntu focal/stable amd64 Packages</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. å®‰è£…</span></span><br><span class="line">apt install docker-ce=5:20.10.9~3-0~ubuntu-focal -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. éªŒè¯</span></span><br><span class="line">docker version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. ä¿®æ”¹cgroupé©±åŠ¨ä¸ºsystemdï¼Œé€‚é…k8sé»˜è®¤é€‰é¡¹</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/docker/daemon.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">{</span></span><br><span class="line"><span class="string">  "exec-opts": ["native.cgroupdriver=systemd"],</span></span><br><span class="line"><span class="string">  "log-driver": "json-file",</span></span><br><span class="line"><span class="string">  "log-opts": {</span></span><br><span class="line"><span class="string">    "max-size": "100m"</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  "storage-driver": "overlay2",</span></span><br><span class="line"><span class="string">  "storage-opts": [</span></span><br><span class="line"><span class="string">    "overlay2.override_kernel_check=true"</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></tbody></table></figure>
</details>

<h2 id="kubeadm"><a href="#kubeadm" class="headerlink" title="kubeadm"></a>kubeadm</h2><blockquote>
<p>ç®€ä»‹<br>ä½œç”¨ï¼šå°†kuberenetså¤§éƒ¨åˆ†ç»„ä»¶éƒ½å®¹å™¨åŒ–ï¼Œé€šè¿‡StaticPodæ–¹å¼è¿è¡Œï¼Œå¹¶è‡ªåŠ¨åŒ–äº†å¤§éƒ¨åˆ†çš„é›†ç¾¤é…ç½®åŠè®¤è¯ç­‰å·¥ä½œï¼Œç®€å•å‡ æ­¥å³å¯æ­å»ºä¸€ä¸ªå¯ç”¨k8ssçš„é›†ç¾¤ã€‚</p>
</blockquote>
<ul>
<li><p>kubeadm initï¼šmaster èŠ‚ç‚¹åˆ›å»º</p>
<ul>
<li>æ£€æŸ¥å½“å‰æœºå™¨æ˜¯å¦åˆè§„</li>
<li>è‡ªåŠ¨ç”Ÿæˆé›†ç¾¤è¿è¡Œæ‰€éœ€çš„å„ç±»è¯ä¹¦åŠå„ç±»é…ç½®ï¼Œå¹¶å°†masterèŠ‚ç‚¹ä¿¡æ¯ä¿å­˜åœ¨åä¸ºcluster-infoçš„ConfigMapä¸­</li>
<li>é€šè¿‡Static Podæ–¹å¼ï¼Œè¿è¡ŒAPI serverã€controller manager ã€scheduleråŠetcdç»„ä»¶ã€‚</li>
<li>ç”ŸæˆTokenä»¥ä¾¿å…¶ä»–èŠ‚ç‚¹åŠ å…¥é›†ç¾¤</li>
</ul>
</li>
<li><p>kubeadm joinï¼šnode èŠ‚ç‚¹åŠ å…¥é›†ç¾¤</p>
</li>
<li><p>èŠ‚ç‚¹é€šè¿‡tokenè®¿é—®kube-apiserverï¼Œè·å–cluster-infoä¸­ä¿¡æ¯ï¼Œä¸»è¦æ˜¯apiserverçš„æˆæƒä¿¡æ¯ï¼ˆèŠ‚ç‚¹ä¿¡ä»»é›†ç¾¤ï¼‰ã€‚</p>
</li>
<li><p>é€šè¿‡æˆæƒä¿¡æ¯ï¼Œkubeletå¯æ‰§è¡ŒTLS bootstrappingï¼Œä¸apiserverçœŸæ­£å»ºç«‹äº’ä¿¡ä»»å…³ç³»ï¼ˆé›†ç¾¤ä¿¡ä»»èŠ‚ç‚¹ï¼‰ã€‚</p>
</li>
</ul>
<h3 id="å®‰è£…ç»„ä»¶ï¼ˆkubelet-kubeadm-kubectlï¼‰"><a href="#å®‰è£…ç»„ä»¶ï¼ˆkubelet-kubeadm-kubectlï¼‰" class="headerlink" title="å®‰è£…ç»„ä»¶ï¼ˆkubelet kubeadm kubectlï¼‰"></a>å®‰è£…ç»„ä»¶ï¼ˆkubelet kubeadm kubectlï¼‰</h3><details>
<summary>centos</summary>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€æ–°å»ºrepoæ–‡ä»¶ï¼š</span></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt; /etc/yum.repos.d/kubernetes.repo</span></span><br><span class="line"><span class="string">[kubernetes]</span></span><br><span class="line"><span class="string">name=Kubernetes</span></span><br><span class="line"><span class="string">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">repo_gpgcheck=0</span></span><br><span class="line"><span class="string">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€å®‰è£…æŒ‡å®šçš„ç‰ˆæœ¬ç»„ä»¶ï¼š</span></span><br><span class="line"><span class="comment">### master ###</span></span><br><span class="line">yum install -y --<span class="built_in">setopt</span>=obsoletes=0 kubelet-1.21.4-0 kubeadm-1.21.4-0 kubectl-1.21.4-0</span><br><span class="line"></span><br><span class="line"><span class="comment">### node ###</span></span><br><span class="line">yum install -y --<span class="built_in">setopt</span>=obsoletes=0 kubelet-1.21.4-0 kubeadm-1.21.4-0</span><br></pre></td></tr></tbody></table></figure>
</details>

<details>
<summary>ubuntu</summary>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 1. å®‰è£…GPGè¯ä¹¦</span></span><br><span class="line">curl -fsSL https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - </span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å†™å…¥è½¯ä»¶æºä¿¡æ¯</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/apt/sources.list.d/kubernetes.list &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æ›´æ–°</span></span><br><span class="line">apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. æŸ¥è¯¢ç‰ˆæœ¬</span></span><br><span class="line">apt-cache madison kubeadm</span><br><span class="line"><span class="comment">#kubeadm |  1.21.4-00 | https://mirrors.aliyun.com/kubernetes/apt kubernetes-xenial/main amd64 Packages</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. å®‰è£…</span></span><br><span class="line"><span class="comment">#### master ####</span></span><br><span class="line">apt-get install -y kubeadm=1.21.4-00 kubelet=1.21.4-00 kubectl=1.21.4-00</span><br><span class="line"></span><br><span class="line"><span class="comment">#### node ####</span></span><br><span class="line">apt-get install -y kubeadm=1.21.4-00 kubelet=1.21.4-00</span><br></pre></td></tr></tbody></table></figure>
</details>


<h2 id="é›†ç¾¤çš„å®‰è£…"><a href="#é›†ç¾¤çš„å®‰è£…" class="headerlink" title="é›†ç¾¤çš„å®‰è£…"></a>é›†ç¾¤çš„å®‰è£…</h2><h3 id="masterèŠ‚ç‚¹"><a href="#masterèŠ‚ç‚¹" class="headerlink" title="masterèŠ‚ç‚¹"></a>masterèŠ‚ç‚¹</h3><ul>
<li><p>åˆå§‹åŒ–</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kubeadm init \</span><br><span class="line">  --apiserver-advertise-address=192.168.1.20 \</span><br><span class="line">  --image-repository registry.aliyuncs.com/google_containers \</span><br><span class="line">  --kubernetes-version v1.21.4 \</span><br><span class="line">  --service-cidr=10.96.0.0/12 \</span><br><span class="line">  --pod-network-cidr=10.244.0.0/16 \</span><br><span class="line">  --ignore-preflight-errors=all</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹åº”å‚æ•°å«ä¹‰ï¼š</span></span><br><span class="line"><span class="comment"># èŠ‚ç‚¹ip</span></span><br><span class="line"><span class="comment"># é•œåƒä»“åº“</span></span><br><span class="line"><span class="comment"># ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"># serviceç½‘æ®µ é»˜è®¤</span></span><br><span class="line"><span class="comment"># podç½‘æ®µ   é»˜è®¤</span></span><br><span class="line"><span class="comment"># å¿½ç•¥æ£€æŸ¥</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">[kubelet-finalize] Updating <span class="string">"/etc/kubernetes/kubelet.conf"</span> to point to a rotatable kubelet client certificate and key</span><br><span class="line">[addons] Applied essential addon: CoreDNS</span><br><span class="line">[addons] Applied essential addon: kube-proxy</span><br><span class="line"></span><br><span class="line">Your Kubernetes control-plane has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  sudo <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  sudo <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">Alternatively, <span class="keyword">if</span> you are the root user, you can run:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run <span class="string">"kubectl apply -f [podnetwork].yaml"</span> with one of the options listed at:</span><br><span class="line">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class="line"></span><br><span class="line">Then you can <span class="built_in">join</span> any number of worker nodes by running the following on each as root:</span><br><span class="line"></span><br><span class="line">kubeadm <span class="built_in">join</span> 192.168.1.20:6443 --token mutg2q.34gp9f77hfm3mzqt \</span><br><span class="line">        --discovery-token-ca-cert-hash sha256:5aafdb66ba0d96855c0ec8a59577d4e7b3ba81e2f58069b9b407a0059998372e</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ ¹æ®æç¤ºï¼Œåˆ›å»º kubectl è®¤è¯æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å³ä½¿æ˜¯rootç”¨æˆ·ï¼Œä¹Ÿé‡‡ç”¨é»˜è®¤æ–‡ä»¶æ–¹å¼</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">sudo <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">sudo <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>kubectl å‘½ä»¤è¡¥é½ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"source &lt;(kubectl completion bash)"</span> &gt;&gt; ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="built_in">source</span> &lt;(kubectl completion bash)</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<hr>
<h3 id="Node-èŠ‚ç‚¹"><a href="#Node-èŠ‚ç‚¹" class="headerlink" title="Node èŠ‚ç‚¹"></a>Node èŠ‚ç‚¹</h3><ul>
<li>åŠ å…¥é›†ç¾¤ï¼š<ul>
<li>åœ¨node01å’Œnode02èŠ‚ç‚¹æ‰§è¡Œ</li>
<li>æ ¹æ®ä¸Šé¢çš„è¾“å‡ºï¼Œæ‰§è¡ŒåŠ å…¥å‘½ä»¤<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨nodeä¸Šæ‰§è¡Œï¼ˆipä¸ç”¨æ”¹ï¼‰</span></span><br><span class="line">kubeadm <span class="built_in">join</span> 192.168.1.20:6443 --token mutg2q.34gp9f77hfm3mzqt \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:5aafdb66ba0d96855c0ec8a59577d4e7b3ba81e2f58069b9b407a0059998372e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šå¦‚æœæŸä¸ªèŠ‚ç‚¹æŠ¥é”™ï¼šï¼ˆè¿™æ˜¯kubeletæŠ¥é”™å¯¼è‡´æ— æ³•å¯åŠ¨ï¼‰</span></span><br><span class="line">æŠ¥é”™1ï¼‰</span><br><span class="line">Failed to run kubelet<span class="string">" err="</span>failed to run Kubelet: misconfiguration: kubelet cgroup driver: \"systemd\" is different from docker cgroup driver: \"cgroupfs\"</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æŠ¥é”™çš„èŠ‚ç‚¹ä¸ŠæŸ¥çœ‹ï¼š</span></span><br><span class="line">docker info | grep Cgroup  </span><br><span class="line">Cgroup Driver: cgroupfs        <span class="comment">#ä¸æ˜¯systemd ï¼Œå› ä¸ºæœ‰äº›ç³»ç»Ÿä¸æ”¯æŒcgroupfs ï¼Œæ‰€ä»¥è¦æ”¹ä¸ºsystemd</span></span><br><span class="line">Cgroup Version: 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹Cgroup Driverï¼š</span></span><br><span class="line"><span class="comment"># åœ¨/etc/docker/daemon.jsonä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ²¡æœ‰åˆ›å»ºï¼‰- å¯çœ‹ ä¸Šé¢çš„å®‰è£…dockerç¬¬7æ­¥ï¼š</span></span><br><span class="line">        {</span><br><span class="line">        <span class="string">"exec-opts"</span>:[<span class="string">"native.cgroupdriver=systemd"</span>]</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¸ºä»€ä¹ˆè¦ä¿®æ”¹ä¸ºä½¿ç”¨systemd?</span><br><span class="line">Kubernetes æ¨èä½¿ç”¨ systemd æ¥ä»£æ›¿ cgroupf</span><br><span class="line">å› ä¸ºsystemdæ˜¯Kubernetesè‡ªå¸¦çš„cgroupç®¡ç†å™¨, è´Ÿè´£ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…cgroups,  </span><br><span class="line">ä½†dockerçš„cgroup driveré»˜è®¤æ˜¯cgroupfs,è¿™æ ·å°±åŒæ—¶è¿è¡Œæœ‰ä¸¤ä¸ªcgroupæ§åˆ¶ç®¡ç†å™¨, </span><br><span class="line">å½“èµ„æºæœ‰å‹åŠ›çš„æƒ…å†µæ—¶,æœ‰å¯èƒ½å‡ºç°ä¸ç¨³å®šçš„æƒ…å†µ</span><br><span class="line"></span><br><span class="line">æŠ¥é”™2)ï¼š</span><br><span class="line">error execution phase preflight: [preflight] Some fatal errors occurred:</span><br><span class="line">        [ERROR FileAvailable--etc-kubernetes-kubelet.conf]: /etc/kubernetes/kubelet.conf already exists</span><br><span class="line">        [ERROR Port-10250]: Port 10250 is <span class="keyword">in</span> use</span><br><span class="line">        [ERROR FileAvailable--etc-kubernetes-pki-ca.crt]: /etc/kubernetes/pki/ca.crt already exists</span><br><span class="line">[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`</span><br><span class="line"></span><br><span class="line">- è§£å†³ï¼š(æ³¨æ„æ˜¯åœ¨nodeèŠ‚ç‚¹ä¸Šæ‰§è¡Œ)</span><br><span class="line">å¦‚æœä½ æ­£åœ¨é‡æ–°åˆå§‹åŒ–ä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œå¯ä»¥ä½¿ç”¨ kubeadm reset å‘½ä»¤æ¥æ¸…ç†å…ˆå‰çš„è®¾ç½®ã€‚</span><br><span class="line">sudo kubeadm reset</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ul>
<p><strong>ä»¥ä¸‹è¿™ä¸ªæƒ…å†µæ˜¯åœ¨tokenè¿‡æœŸæ—¶æ“ä½œæˆ–åç»­æ–°å¢èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆtokenã€‚</strong></p>
<ul>
<li>token è¿‡æœŸ: kubeadm join åŠ å…¥é›†ç¾¤æ—¶ï¼Œéœ€è¦2ä¸ªå‚æ•°ï¼Œâ€“tokenä¸â€“discovery-token-ca-cert-hashã€‚å…¶ä¸­ï¼Œtokenæœ‰é™æœŸä¸€èˆ¬æ˜¯24å°æ—¶ï¼Œå¦‚æœè¶…è¿‡æ—¶é—´è¦æ–°å¢èŠ‚ç‚¹ï¼Œå°±éœ€è¦é‡æ–°ç”Ÿæˆtokenã€‚<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢token(åœ¨masterä¸Šæ“ä½œ)</span></span><br><span class="line">kubeadm token list</span><br><span class="line">TOKEN                     TTL   EXPIRES                USAGES           DESCRIPTION         EXTRA GROUPS</span><br><span class="line">mutg2q.34gp9f77hfm3mzqt   23h         2024-07-03T22:43:22+08:00   authentication,signing   The default bootstrap token generated by <span class="string">'kubeadm init'</span>.   system:bootstrappers:kubeadm:default-node-token</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º token</span></span><br><span class="line">kubeadm token create</span><br><span class="line">tokenï¼šl0r2mh.0z5aojdur71posxt</span><br><span class="line"></span><br><span class="line"><span class="comment"># discovery-token-ca-cert-hash   tokençš„hashå€¼</span></span><br><span class="line">openssl x509 -pubkey -<span class="keyword">in</span> /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed <span class="string">'s/^.* //'</span></span><br><span class="line">5aafdb66ba0d96855c0ec8a59577d4e7b3ba81e2f58069b9b407a0059998372e</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°èŠ‚ç‚¹åŠ å…¥ï¼ˆæ¯”å¦‚æ–°å¢èŠ‚ç‚¹æˆ–è€…åŸå…ˆèŠ‚ç‚¹æœªåŠ å…¥ï¼‰</span></span><br><span class="line">kubeadm <span class="built_in">join</span> 192.168.80.20:6443 --token l0r2mh.0z5aojdur71posxt \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:5aafdb66ba0d96855c0ec8a59577d4e7b3ba81e2f58069b9b407a0059998372e</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="ç½‘ç»œæ’ä»¶å®‰è£…"><a href="#ç½‘ç»œæ’ä»¶å®‰è£…" class="headerlink" title="ç½‘ç»œæ’ä»¶å®‰è£…"></a>ç½‘ç»œæ’ä»¶å®‰è£…</h2><ul>
<li><p>æœªå®‰è£…ç½‘ç»œæ’ä»¶ï¼ŒèŠ‚ç‚¹æ²¡æœ‰ Ready</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kubectl get nodes</span><br><span class="line">NAME         STATUS     ROLES                  AGE     VERSION</span><br><span class="line">k8s-master   NotReady   control-plane,master   41m     v1.21.4</span><br><span class="line">k8s-node01   NotReady   &lt;none&gt;                 35m     v1.21.4</span><br><span class="line">k8s-node02   NotReady   &lt;none&gt;                 8m21s   v1.21.4</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>å®‰è£… flannelï¼š</p>
</li>
<li><p>å¦‚æœæ— æ³•æ‹‰å–é•œåƒï¼š<br><a href="https://xiaoxin-top.github.io/looking/c8e05f01.html">å‚è€ƒ:dockeré…ç½®ä»£ç†ç¯‡çš„è€æ–¹æ³•é…ç½® proxy.conf</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½ç½‘ç»œæ’ä»¶yamlæ–‡ä»¶</span></span><br><span class="line">wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®ä¿ç½‘ç»œé…ç½®ä¸ `--pod-network-cidr=10.244.0.0/16` ä¸€è‡´</span></span><br><span class="line">vi kube-flannel.yml</span><br><span class="line">  net-conf.json: |</span><br><span class="line">    {</span><br><span class="line">      <span class="string">"Network"</span>: <span class="string">"10.244.0.0/16"</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”ç”¨ç½‘ç»œæ’ä»¶</span></span><br><span class="line">kubectl apply -f kube-flannel.yml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç½‘ç»œæ’ä»¶pod</span></span><br><span class="line">- é»˜è®¤æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè·‘ä¸€ä¸ªflannel çš„podã€æ‰èƒ½è®©é›†ç¾¤æ­£å¸¸</span><br><span class="line">kubectl get pod -n kube-flannel</span><br><span class="line">NAME                    READY   STATUS    RESTARTS   AGE    IP             NODE         NOMINATED NODE   READINESS GATES</span><br><span class="line">kube-flannel-ds-nkjbh   1/1     Running   0          103s   192.168.1.18   k8s-node01   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-flannel-ds-qs9sz   1/1     Running   0          103s   192.168.1.20   k8s-master   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-flannel-ds-xsg6c   1/1     Running   0          103s   192.168.1.19   k8s-node02   &lt;none&gt;           &lt;none&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</span></span><br><span class="line">kubectl get nodes</span><br><span class="line">NAME         STATUS   ROLES                  AGE   VERSION</span><br><span class="line">k8s-master   Ready    control-plane,master   43m   v1.21.4</span><br><span class="line">k8s-node01   Ready    &lt;none&gt;                 33m   v1.21.4</span><br><span class="line">k8s-node02   Ready    &lt;none&gt;                 32m   v1.21.4</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="ipvs"><a href="#ipvs" class="headerlink" title="ipvs"></a>ipvs</h2><ul>
<li>å¼€å¯ kube-proxy åè®®ä¸º ipvsï¼ˆmasterä¸Šæ“ä½œï¼‰</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kubectl edit configmap kube-proxy -n kube-system</span><br><span class="line">    mode: <span class="string">"ipvs"</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="é›†ç¾¤çŠ¶æ€"><a href="#é›†ç¾¤çŠ¶æ€" class="headerlink" title="é›†ç¾¤çŠ¶æ€"></a>é›†ç¾¤çŠ¶æ€</h2><ul>
<li><p>é›†ç¾¤çŠ¶æ€å¼‚å¸¸ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ kubectl get cs</span><br><span class="line">NAME                 STATUS      MESSAGE                                           ERROR</span><br><span class="line">scheduler            Unhealthy   Get <span class="string">"http://127.0.0.1:10251/healthz"</span>: dial tcp 127.0.0.1:10251: connect: connection refused</span><br><span class="line">controller-manager   Unhealthy   Get <span class="string">"http://127.0.0.1:10252/healthz"</span>: dial tcp 127.0.0.1:10252: connect: connection refused</span><br><span class="line">etcd-0               Healthy     {<span class="string">"health"</span>:<span class="string">"true"</span>}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>åŸå› ï¼šä½¿ç”¨äº†éå®‰å…¨ç«¯å£ã€‚æŒ‰å¦‚ä¸‹æ–¹æ³•ä¿®æ”¹ï¼ˆmasterä¸Šæ“ä½œï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ vi /etc/kubernetes/manifests/kube-scheduler.yaml </span><br><span class="line">...</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - <span class="built_in">command</span>:</span><br><span class="line">    - kube-scheduler</span><br><span class="line">    - --kubeconfig=/etc/kubernetes/scheduler.conf</span><br><span class="line">    - --leader-elect=<span class="literal">true</span></span><br><span class="line">    <span class="comment">#- --port=0    # æ³¨é‡Šæ‰</span></span><br><span class="line">    image: k8s.gcr.io/kube-scheduler:v1.18.6</span><br><span class="line"></span><br><span class="line">$ vi /etc/kubernetes/manifests/kube-controller-manager.yaml</span><br><span class="line">...</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - <span class="built_in">command</span>:</span><br><span class="line">    - kube-controller-manager</span><br><span class="line">    - --node-cidr-mask-size=24</span><br><span class="line">    <span class="comment">#- --port=0   # æ³¨é‡Šæ‰</span></span><br><span class="line">    - --requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯kubelet</span></span><br><span class="line">$ systemctl restart kubelet</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æ¬¡æŸ¥è¯¢çŠ¶æ€</span></span><br><span class="line">$ kubectl get cs</span><br><span class="line">NAME                 STATUS    MESSAGE             ERROR</span><br><span class="line">scheduler            Healthy   ok                  </span><br><span class="line">controller-manager   Healthy   ok                  </span><br><span class="line">etcd-0               Healthy   {<span class="string">"health"</span>:<span class="string">"true"</span>}   </span><br></pre></td></tr></tbody></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>kubeadm</tag>
      </tags>
  </entry>
  <entry>
    <title>keepaliveé«˜å¯ç”¨</title>
    <url>/looking/121ebbda.html</url>
    <content><![CDATA[<h2 id="1-å®‰è£…-Keepalived"><a href="#1-å®‰è£…-Keepalived" class="headerlink" title="1. å®‰è£… Keepalived"></a>1. å®‰è£… Keepalived</h2><ul>
<li>åœ¨ä¸»æœº C å’Œ D ä¸Šå®‰è£… Keepalivedï¼š<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo yum install keepalived -y  <span class="comment"># CentOS/RHEL</span></span><br><span class="line">sudo apt-get install keepalived -y  <span class="comment"># Debian/Ubuntu</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="2-é…ç½®-Keepalived"><a href="#2-é…ç½®-Keepalived" class="headerlink" title="2. é…ç½® Keepalived"></a>2. é…ç½® Keepalived</h2><ul>
<li><p>é…ç½® Keepalived ä»¥ç®¡ç† VIP å¹¶åœ¨æ•…éšœè½¬ç§»æ—¶è¿è¡Œè‡ªå®šä¹‰è„šæœ¬ã€‚</p>
</li>
<li><p>åœ¨ä¸»æœº C ä¸Šåˆ›å»º/ç¼–è¾‘ /etc/keepalived/keepalived.confï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">vrrp_instance VI_1 {</span><br><span class="line">    state MASTER</span><br><span class="line">    interface bond0</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    priority 100</span><br><span class="line">    advert_int 1</span><br><span class="line">    authentication {</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass your_password</span><br><span class="line">    }</span><br><span class="line">    virtual_ipaddress {</span><br><span class="line">        192.168.1.100/24 dev bond0</span><br><span class="line">    }</span><br><span class="line">    track_script {</span><br><span class="line">        chk_service</span><br><span class="line">    }</span><br><span class="line">    notify_master "/etc/keepalived/master.sh"</span><br><span class="line">    notify_backup "/etc/keepalived/backup.sh"</span><br><span class="line">    notify_fault "/etc/keepalived/fault.sh"</span><br><span class="line">    nopreempt           # æ·»åŠ è¿™ä¸ªå‚æ•°ä»¥é˜²æ­¢ä¸»æœºæ•…éšœæ¢å¤åè‡ªåŠ¨åˆ‡å›-é˜²æ­¢ä¸šåŠ¡çš„æ–­å±‚</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">vrrp_script chk_service {</span><br><span class="line">    script "/etc/keepalived/check_service.sh"</span><br><span class="line">    interval 2</span><br><span class="line">    weight -20</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨ä¸»æœº D ä¸Šåˆ›å»º/ç¼–è¾‘ /etc/keepalived/keepalived.confï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">vrrp_instance VI_1 {</span><br><span class="line">    state BACKUP</span><br><span class="line">    interface bond0</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    priority 50</span><br><span class="line">    advert_int 1</span><br><span class="line">    authentication {</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass your_password</span><br><span class="line">    }   </span><br><span class="line">    virtual_ipaddress {</span><br><span class="line">        192.168.1.100/24 dev bond0</span><br><span class="line">    }</span><br><span class="line">    track_script {</span><br><span class="line">        chk_service</span><br><span class="line">    }</span><br><span class="line">    notify_master "/etc/keepalived/master.sh"</span><br><span class="line">    notify_backup "/etc/keepalived/backup.sh"</span><br><span class="line">    notify_fault "/etc/keepalived/fault.sh"</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">vrrp_script chk_service {</span><br><span class="line">    script "/etc/keepalived/check_service.sh"</span><br><span class="line">    interval 2</span><br><span class="line">    weight -20</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>192.168.1.100/24 dev bond0          #ipæ˜¯è™šæ‹Ÿip  è¿™é‡Œbond0 æ˜¯è™šæ‹Ÿç½‘å¡åç§°ï¼ˆé€šè¿‡bondæŠ€æœ¯æ¥è®©åŒç½‘å¡åšå†—ä½™-è¯¦æƒ…çœ‹<strong>linuxåŒç½‘å¡å†—ä½™</strong>ç¯‡ï¼‰</p>
</li>
<li><p>è‡ªè¡Œç¼–å†™ä»¥ä¸‹ä¸‰ä¸ªè„šæœ¬ï¼ˆä¸æ˜¯å¿…é¡»ï¼‰ï¼š</p>
<blockquote>
<p>notify_master â€œ/etc/keepalived/master.shâ€      #é€‰ä¸¾ä¸ºmasteræ—¶æ‰§è¡Œè„šæœ¬<br>notify_backup â€œ/etc/keepalived/backup.shâ€      #é€‰ä¸¾ä¸ºbackupæ—¶æ‰§è¡Œè„šæœ¬<br>notify_fault â€œ/etc/keepalived/fault.shâ€        #æ•…éšœæ—¶æ‰§è¡Œè„šæœ¬</p>
</blockquote>
</li>
</ul>
<h2 id="3-ç¼–å†™è‡ªå®šä¹‰è„šæœ¬"><a href="#3-ç¼–å†™è‡ªå®šä¹‰è„šæœ¬" class="headerlink" title="3. ç¼–å†™è‡ªå®šä¹‰è„šæœ¬"></a>3. ç¼–å†™è‡ªå®šä¹‰è„šæœ¬</h2><ul>
<li>/etc/keepalived/check_service.shï¼šç”¨äºæ£€æŸ¥ä¸šåŠ¡æœåŠ¡æ˜¯å¦è¿è¡Œ<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥ä¸šåŠ¡æœåŠ¡æ˜¯å¦è¿è¡Œçš„è„šæœ¬</span></span><br><span class="line"><span class="comment"># å‡è®¾ä¸šåŠ¡æœåŠ¡åä¸º "my_service"</span></span><br><span class="line"><span class="keyword">if</span> systemctl status my_service &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="4-è®¾ç½®è„šæœ¬æƒé™"><a href="#4-è®¾ç½®è„šæœ¬æƒé™" class="headerlink" title="4. è®¾ç½®è„šæœ¬æƒé™"></a>4. è®¾ç½®è„šæœ¬æƒé™</h2><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +x /etc/keepalived/*.sh</span><br></pre></td></tr></tbody></table></figure>

<h2 id="5-å¯åŠ¨-Keepalived"><a href="#5-å¯åŠ¨-Keepalived" class="headerlink" title="5. å¯åŠ¨ Keepalived"></a>5. å¯åŠ¨ Keepalived</h2><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo systemctl start keepalived</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> keepalived</span><br></pre></td></tr></tbody></table></figure>

<div class="note warning flat"><p>nginx + keepalived é«˜å¯ç”¨é…ç½®å‚è€ƒ</p>
</div>
<div calss="anzhiyu-tag-link"><a class="tag-Link" target="_blank" href="https://www.cnblogs.com/littlecc/p/17762083.html">
    <div class="tag-link-tips">å¼•ç”¨ç«™å¤–åœ°å€</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="">
          <i class="anzhiyufont anzhiyu-icon-link" style=""></i>
        </div>
        <div class="tag-link-right">
            <div class="tag-link-title">å‚è€ƒ</div>
            <div class="tag-link-sitename">keepalive</div>
        </div>
        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>
    </div>
    </a></div>]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>keepalive, é«˜å¯ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxå‘½åç©ºé—´çš„ç¦ç”¨</title>
    <url>/looking/876d4c84.html</url>
    <content><![CDATA[<p class="p center logo large">CVE-2024-1086</p>
<div calss="anzhiyu-tag-link"><a class="tag-Link" target="_blank" href="https://nsfocusglobal.com/linux-kernel-privilege-escalation-vulnerability-cve-2024-1086-notice/">
    <div class="tag-link-tips">å¼•ç”¨ç«™å¤–åœ°å€</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="">
          <i class="anzhiyufont anzhiyu-icon-link" style=""></i>
        </div>
        <div class="tag-link-right">
            <div class="tag-link-title">å‚è€ƒç»¿ç›Ÿ</div>
            <div class="tag-link-sitename">nsfocusglobal.com</div>
        </div>
        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>
    </div>
    </a></div>
<div class="note danger modern"><p>ç”±äºlinuxå‘½åç©ºé—´æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œæ‰€ä»¥éœ€è¦ç¦ç”¨ï¼Œå¦åˆ™ä¼šå­˜åœ¨ä¸€äº›æ¼æ´</p>
</div>
<mark class="hl-label green">å‘½åç©ºé—´çš„ä½œç”¨</mark> 
<blockquote>
<ul>
<li>ç”¨æˆ·å‘½åç©ºé—´ï¼šç”¨æˆ·å‘½åç©ºé—´çš„åŠŸèƒ½ä¸»è¦æ˜¯ä¸ºäº†æä¾›è¿›ç¨‹å’Œç”¨æˆ· ID çš„éš”ç¦»ï¼Œé€šå¸¸ç”¨äºå®‰å…¨å®¹å™¨ç¯å¢ƒã€‚ç¦ç”¨ç”¨æˆ·å‘½åç©ºé—´åï¼Œæ™®é€šç”¨æˆ·å°†æ— æ³•åˆ›å»ºè¿™æ ·çš„éš”ç¦»ç¯å¢ƒã€‚</li>
<li>ç”¨æˆ·å‘½åç©ºé—´æ˜¯ Linux å†…æ ¸çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå…è®¸éç‰¹æƒç”¨æˆ·åˆ›å»ºè‡ªå·±çš„éš”ç¦»ç¯å¢ƒï¼Œå…¶ä¸­çš„ç”¨æˆ·å’Œç»„ ID å¯ä»¥é‡æ–°æ˜ å°„ï¼Œä¸»è¦ç”¨äºå®¹å™¨å’Œæ²™ç®±ç¯å¢ƒã€‚ç¦ç”¨ç”¨æˆ·å‘½åç©ºé—´åï¼Œæ™®é€šç”¨æˆ·å°†æ— æ³•åˆ›å»ºè¿™äº›éš”ç¦»ç¯å¢ƒã€‚</li>
</ul>
</blockquote>
<div class="checkbox times red checked"><input type="checkbox" checked="checked">
            <p>ç¦ç”¨ç”¨æˆ·å‘½åç©ºé—´</p>
            </div>
<blockquote>
<p>ç”¨æˆ·å‘½åç©ºé—´å…è®¸éç‰¹æƒç”¨æˆ·åˆ›å»ºéš”ç¦»çš„ç”¨æˆ·å’Œç»„ ID æ˜ å°„ï¼Œä»è€Œå¯ä»¥æ‰§è¡Œä¸€äº›ç‰¹æƒæ“ä½œã€‚ä¸ºäº†å¢å¼ºå®‰å…¨æ€§ï¼Œä½ å¯ä»¥ç¦ç”¨å®ƒã€‚</p>
</blockquote>
<mark class="hl-label red">æ·»åŠ é…ç½®</mark> 
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> â€œuser.max_user_namespaces=0â€ &gt; /etc/sysctl.d/userns.conf  </span><br></pre></td></tr></tbody></table></figure>

<mark class="hl-label red">ä½¿é…ç½®ç«‹é©¬ç”Ÿæ•ˆ</mark> 
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo sysctl --system</span><br></pre></td></tr></tbody></table></figure>

<mark class="hl-label red">æ£€æŸ¥æ˜¯å¦å…³é—­</mark> 
<blockquote>
<p>1.ä½¿ç”¨ sysctl å‘½ä»¤æŸ¥çœ‹å½“å‰ user.max_user_namespaces çš„å€¼ï¼š<br>å¦‚æœè¾“å‡ºä¸º user.max_user_namespaces = 0ï¼Œè¯´æ˜ç”¨æˆ·å‘½åç©ºé—´å·²ç»è¢«ç¦ç”¨ã€‚</p>
<blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sysctl user.max_user_namespaces</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
</blockquote>
<blockquote>
<p>2.æ™®é€šç”¨æˆ·å‘½åç©ºé—´çš„åˆ›å»º<br>å°è¯•ç”¨éç‰¹æƒç”¨æˆ·åˆ›å»ºç”¨æˆ·å‘½åç©ºé—´ã€‚å¦‚æœå‘½åç©ºé—´è¢«ç¦ç”¨ï¼Œåº”è¯¥ä¼šæŠ¥é”™</p>
<blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">unshare --user --map-root-user <span class="built_in">id</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœå‘½ä»¤è¿”å›ç±»ä¼¼ unshare: unshare failed: Invalid argument çš„é”™è¯¯ï¼Œè¡¨ç¤ºç”¨æˆ·å‘½åç©ºé—´çš„åˆ›å»ºå·²è¢«ç¦ç”¨ã€‚</p>
</blockquote>
</blockquote>
<blockquote>
<ol start="3">
<li>å°è¯•è¿è¡Œå®¹å™¨<br>å®¹å™¨æŠ€æœ¯ï¼Œå¦‚ Docker æˆ– Podmanï¼Œé€šå¸¸ä¾èµ–äºç”¨æˆ·å‘½åç©ºé—´ã€‚ä½ å¯ä»¥å°è¯•ç”¨éç‰¹æƒç”¨æˆ·è¿è¡Œä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼Œçœ‹çœ‹æ˜¯å¦ä¼šå¤±è´¥ã€‚<br>ä¾‹å¦‚ï¼Œä½¿ç”¨ Docker è¿è¡Œä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼š<blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">docker run --<span class="built_in">rm</span> -it busybox</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœç”¨æˆ·å‘½åç©ºé—´è¢«ç¦ç”¨ï¼ŒDocker å¯èƒ½ä¼šå› ä¸ºæ— æ³•åˆ›å»ºç”¨æˆ·å‘½åç©ºé—´è€Œå¤±è´¥ã€‚</p>
</blockquote>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li>ä½¿ç”¨ newuidmap å’Œ newgidmap<br>ç”¨æˆ·å‘½åç©ºé—´çš„åˆ›å»ºä¹Ÿæ¶‰åŠåˆ° newuidmap å’Œ newgidmap å·¥å…·ã€‚è¿™äº›å·¥å…·ç”¨äºæ˜ å°„ç”¨æˆ·å’Œç»„ ID<blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">newuidmap 0 1000 1 1000</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœä½ çœ‹åˆ°é”™è¯¯ï¼Œä¾‹å¦‚ newuidmap: write to uid_map failed: Invalid argumentï¼Œè¯´æ˜ç”¨æˆ·å‘½åç©ºé—´å·²ç»è¢«ç¦ç”¨ã€‚</p>
</blockquote>
</li>
</ol>
</blockquote>
<hr>
<div class="note info modern"><p>ä½¿ç”¨å‘½åç©ºé—´</p>
</div>
<mark class="hl-label green">å‘½åç©ºé—´ç±»å‹</mark> 
<blockquote>
<ol>
<li>UTSï¼ˆä¸»æœºåå’ŒåŸŸåï¼‰å‘½åç©ºé—´ï¼šéš”ç¦»ä¸»æœºåå’ŒåŸŸåã€‚</li>
<li>IPCï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ã€å…±äº«å†…å­˜ï¼‰å‘½åç©ºé—´ï¼šéš”ç¦»æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡å’Œå…±äº«å†…å­˜ã€‚</li>
<li>PIDï¼ˆè¿›ç¨‹IDï¼‰å‘½åç©ºé—´ï¼šéš”ç¦»è¿›ç¨‹IDã€‚</li>
<li>Mountï¼ˆæŒ‚è½½ï¼‰å‘½åç©ºé—´ï¼šéš”ç¦»æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹</li>
<li>Networkï¼ˆç½‘ç»œï¼‰å‘½åç©ºé—´ï¼šéš”ç¦»ç½‘ç»œè®¾å¤‡ã€IP åœ°å€ã€ç«¯å£å·ç­‰ã€‚</li>
<li>Userï¼ˆç”¨æˆ·ï¼‰å‘½åç©ºé—´ï¼šéš”ç¦»ç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚</li>
<li>Cgroupï¼ˆèµ„æºé™åˆ¶ï¼‰å‘½åç©ºé—´ï¼šéš”ç¦»èµ„æºé™åˆ¶ï¼Œå¦‚CPUã€å†…å­˜ç­‰ã€‚</li>
</ol>
</blockquote>
<mark class="hl-label red">ä½¿ç”¨unshareåˆ›å»ºå‘½åç©ºé—´</mark> 
<blockquote>
<p>unshare å‘½ä»¤å¯ä»¥åˆ†ç¦»å½“å‰è¿›ç¨‹æˆ–ä¸€ä¸ªæ–°åˆ›å»ºçš„è¿›ç¨‹è¿›å…¥ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´</p>
</blockquote>
<div class="tabs" id="unshare"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="unshare-1">åˆ›å»ºä¸€ä¸ªUTSå‘½åç©ºé—´</button><button type="button" class="tab " data-href="unshare-2">åˆ›å»ºä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´</button><button type="button" class="tab " data-href="unshare-3">åˆ›å»ºä¸€ä¸ªæŒ‚è½½å‘½åç©ºé—´</button><button type="button" class="tab " data-href="unshare-4">åˆ›å»ºä¸€ä¸ªç”¨æˆ·å‘½åç©ºé—´</button><button type="button" class="tab " data-href="unshare-5">ç»“åˆå¤šä¸ªå‘½åç©ºé—´</button><button type="button" class="tab " data-href="unshare-6">åœ¨å‘½åç©ºé—´ä¸­è¿è¡Œå‘½ä»¤</button><button type="button" class="tab " data-href="unshare-7">ä½¿ç”¨ ip netns ç®¡ç†ç½‘ç»œå‘½åç©ºé—´</button></ul><div class="tab-contents"><div class="tab-item-content active" id="unshare-1"><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo unshare --uts --hostname new_hostname</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ UTS å‘½åç©ºé—´ï¼Œå¹¶å°†ä¸»æœºåè®¾ç½®ä¸º new_hostnameã€‚ä½ å¯ä»¥ä½¿ç”¨ hostname å‘½ä»¤æŸ¥çœ‹å’Œä¿®æ”¹æ–°çš„ä¸»æœºåã€‚</p>
</blockquote></div><div class="tab-item-content" id="unshare-2"><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo unshare --net</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œå‘½åç©ºé—´ã€‚ä½ å¯ä»¥åœ¨è¯¥å‘½åç©ºé—´å†…æ‰§è¡Œç½‘ç»œé…ç½®å‘½ä»¤ï¼Œæ¯”å¦‚åˆ›å»ºæ–°çš„è™šæ‹Ÿç½‘ç»œæ¥å£ã€‚</p>
</blockquote></div><div class="tab-item-content" id="unshare-3"><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo unshare --mount</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æŒ‚è½½å‘½åç©ºé—´ã€‚ä½ å¯ä»¥åœ¨è¯¥å‘½åç©ºé—´å†…æŒ‚è½½å’Œå¸è½½æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œä¸ä¼šå½±å“ä¸»å‘½åç©ºé—´</p>
</blockquote></div><div class="tab-item-content" id="unshare-4"><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo unshare --user --map-root-user</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·å‘½åç©ºé—´ï¼Œå¹¶å°†å½“å‰ç”¨æˆ·æ˜ å°„ä¸ºå‘½åç©ºé—´å†…çš„æ ¹ç”¨æˆ·</p>
</blockquote></div><div class="tab-item-content" id="unshare-5"><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo unshare --uts --net --mount</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>å¯ä»¥ç»“åˆå¤šä¸ªé€‰é¡¹åŒæ—¶åˆ›å»ºå¤šä¸ªå‘½åç©ºé—´ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ UTSã€ç½‘ç»œå’ŒæŒ‚è½½å‘½åç©ºé—´</p>
</blockquote></div><div class="tab-item-content" id="unshare-6"><blockquote>
<p>å¯ä»¥ä½¿ç”¨ â€“ é€‰é¡¹åœ¨æ–°å‘½åç©ºé—´ä¸­è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ–°çš„ UTS å’Œç½‘ç»œå‘½åç©ºé—´ä¸­è¿è¡Œ bashï¼š</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo unshare --uts --net --mount -- bash</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="unshare-7"><blockquote>
<p>å¯¹äºç½‘ç»œå‘½åç©ºé—´ï¼Œå¯ä»¥ä½¿ç”¨ ip å‘½ä»¤çš„ netns å­å‘½ä»¤æ¥åˆ›å»ºå’Œç®¡ç†ï¼š</p>
</blockquote>
<ol>
<li>åˆ›å»ºç½‘ç»œå‘½åç©ºé—´:<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo ip netns add mynetns</span><br></pre></td></tr></tbody></table></figure></li>
<li>åœ¨ç½‘ç»œå‘½åç©ºé—´ä¸­æ‰§è¡Œå‘½ä»¤<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo ip netns <span class="built_in">exec</span> mynetns bash</span><br></pre></td></tr></tbody></table></figure></li>
<li>åˆ é™¤ç½‘ç»œå‘½åç©ºé—´<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo ip netns delete mynetns</span><br></pre></td></tr></tbody></table></figure></li>
</ol></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux,namespace,æ¼æ´</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxåŒç½‘å¡å†—ä½™</title>
    <url>/looking/a57b6af7.html</url>
    <content><![CDATA[<p class="p center log large">bondæŠ€æœ¯å®ç°ç½‘å¡ç»‘å®š</p>
<mark class="hl-label green">æ¦‚å¿µ</mark> 
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">æ‰€è°“çš„å¤šç½‘å¡ç»‘å®šå°±æ˜¯å°†å¤šå¼ ç‰©ç†ç½‘å¡é€»è¾‘ä¸Šç»„æˆä¸€ä¸ªç½‘å¡ï¼Œè¿™æ ·å°±å¯ä»¥é˜²æ­¢ä¸€å—ç½‘å¡åäº†ç½‘ç»œç˜«ç—ªï¼Œä¹Ÿèƒ½èµ·åˆ°æå‡ç½‘ç»œå¸¦å®½çš„ä½œç”¨ã€‚</span><br><span class="line">æŠŠå¤šå—ç½‘å¡ç»‘å®šåœ¨ä¸€èµ·ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼å¯ä»¥é€‰æ‹©ï¼Œè½®è¯¢æ¨¡å¼å’Œä¸»å¤‡æ¨¡å¼</span><br><span class="line"><span class="bullet">-</span> è½®è¯¢æ¨¡å¼ï¼šä¾‹å¦‚æŠŠä¸¤å—ç½‘å¡ç»‘å®šåœ¨ä¸€èµ·ï¼Œæ­¤æ—¶ä¸¤å—ç½‘å¡éƒ½å¤„äºå·¥ä½œçŠ¶æ€ï¼Œå®ƒä»¬è½®æµå¤„ç†æ•°æ®åŒ…ï¼Œä»è€Œæå‡å¸¦å®½å’Œå®¹é”™æ€§ã€‚</span><br><span class="line"><span class="bullet">-</span> ä¸»å¤‡æ¨¡å¼ï¼šä¾‹å¦‚æŠŠä¸¤å—ç½‘å¡ç»‘å®šåœ¨ä¸€èµ·ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€å—ç½‘å¡å¤„äºå·¥ä½œçŠ¶æ€ï¼Œåªæœ‰å‘ç”Ÿæ•…éšœï¼Œå¤‡ç”¨ç½‘å¡æ‰ä¼šåˆ‡æ¢åˆ°å·¥ä½œæ¨¡å¼ï¼›</span><br></pre></td></tr></tbody></table></figure>
<mark class="hl-label green">bondçš„å·¥ä½œæ¨¡å¼</mark> 
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">1) mode=0(balance-rr)å¹³è¡¡æŠ¡å¾ªç¯ç­–ç•¥</span><br><span class="line"><span class="bullet">    -</span> é“¾è·¯è´Ÿè½½å‡è¡¡ï¼Œå¢åŠ å¸¦å®½ï¼Œæ”¯æŒå®¹é”™ï¼Œä¸€æ¡é“¾è·¯æ•…éšœä¼šè‡ªåŠ¨åˆ‡æ¢æ­£å¸¸é“¾è·¯ã€‚äº¤æ¢æœºéœ€è¦é…ç½®èšåˆå£ã€‚</span><br><span class="line"><span class="bullet">    -</span> ç‰¹ç‚¹ï¼šä¼ è¾“æ•°æ®åŒ…é¡ºåºæ˜¯ä¾æ¬¡ä¼ è¾“ï¼ˆå³ï¼šç¬¬1ä¸ªåŒ…èµ°eth0ï¼Œä¸‹ä¸€ä¸ªåŒ…å°±èµ°eth1â€¦ä¸€ç›´å¾ªç¯ä¸‹å»ï¼Œç›´åˆ°æœ€åä¸€ä¸ªä¼ è¾“å®Œæ¯•ï¼‰ï¼Œæ­¤æ¨¡å¼æä¾›è´Ÿè½½å‡è¡¡å’Œå®¹é”™èƒ½åŠ›ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“å¦‚æœä¸€ä¸ªè¿æ¥æˆ–è€…ä¼šè¯çš„æ•°æ®åŒ…ä»ä¸åŒçš„æ¥å£å‘å‡ºçš„è¯ï¼Œä¸­é€”å†ç»è¿‡ä¸åŒçš„é“¾è·¯ï¼Œåœ¨å®¢æˆ·ç«¯å¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°æ•°æ®åŒ…æ— åºåˆ°è¾¾çš„é—®é¢˜ï¼Œè€Œæ— åºåˆ°è¾¾çš„æ•°æ®åŒ…éœ€è¦é‡æ–°æŒ‰è¦æ±‚å‘é€ï¼Œè¿™æ ·ç½‘ç»œçš„ååé‡å°±ä¼šä¸‹é™ã€‚</span><br><span class="line">2) mode=1ï¼ˆactive-backupï¼‰ä¸»å¤‡ç­–ç•¥</span><br><span class="line"><span class="bullet">    -</span> åªæœ‰ä¸€å—ç½‘å¡æ˜¯activeï¼Œå¦ä¸€å—æ˜¯å¤‡ç”¨çš„standbyï¼Œæ‰€æœ‰æµé‡éƒ½åœ¨activeé“¾è·¯ä¸Šå¤„ç†ï¼Œäº¤æ¢æœºé…ç½®çš„æ˜¯æ†ç»‘çš„è¯å°†ä¸èƒ½å·¥ä½œï¼Œå› ä¸ºäº¤æ¢æœºå¾€ä¸¤å—ç½‘å¡å‘åŒ…ï¼Œæœ‰ä¸€åŠåŒ…æ˜¯ä¸¢å¼ƒçš„ã€‚</span><br><span class="line"><span class="bullet">    -</span> ç‰¹ç‚¹ï¼šåªæœ‰ä¸€ä¸ªè®¾å¤‡å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå½“ä¸€ä¸ªå®•æ‰å¦ä¸€ä¸ªé©¬ä¸Šç”±å¤‡ä»½è½¬æ¢ä¸ºä¸»è®¾å¤‡ã€‚macåœ°å€æ˜¯å¤–éƒ¨å¯è§çš„ï¼Œä»å¤–é¢æ¥çœ‹ï¼Œbondçš„macåœ°å€æ˜¯å”¯ä¸€çš„ï¼Œä»¥é¿å…switchï¼ˆäº¤æ¢æœºï¼‰å‘ç”Ÿæ··ä¹±ã€‚æ­¤æ¨¡å¼åªæä¾›äº†å®¹é”™èƒ½åŠ›ã€‚ç”±æ­¤å¯è§æ­¤æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æä¾›ç½‘ç»œè¿æ¥çš„é«˜å¯ç”¨æ€§ï¼Œä½†æ˜¯å®ƒçš„èµ„æºåˆ©ç”¨ç‡è¾ƒä½ï¼Œåªæœ‰ä¸€ä¸ªæ¥å£å¤„äºå·¥ä½œçŠ¶æ€ï¼Œåœ¨æœ‰Nä¸ªç½‘ç»œæ¥å£çš„æƒ…å†µä¸‹ï¼Œèµ„æºåˆ©ç”¨ç‡ä¸º1/Nã€‚</span><br><span class="line">3) mode=2ï¼ˆbalance-xorï¼‰å¹³è¡¡ç­–ç•¥</span><br><span class="line"><span class="bullet">    -</span> è¡¨ç¤ºXOR Hashè´Ÿè½½åˆ†æ‹…ï¼Œå’Œäº¤æ¢æœºçš„èšåˆå¼ºåˆ¶ä¸åå•†æ–¹å¼é…åˆã€‚ï¼ˆéœ€è¦xmit<span class="emphasis">_hash_</span>policyï¼Œéœ€è¦äº¤æ¢æœºé…ç½®port channelï¼‰</span><br><span class="line"><span class="bullet">    -</span> ç‰¹ç‚¹ï¼šåŸºäºæŒ‡å®šçš„ä¼ è¾“HASHç­–ç•¥ä¼ è¾“æ•°æ®åŒ…ã€‚ç¼ºçœçš„ç­–ç•¥æ˜¯ï¼šï¼ˆæºMACåœ°å€XORç›®æ ‡MACåœ°å€ï¼‰ % slaveæ•°é‡ã€‚å…¶ä»–çš„ä¼ è¾“ç­–ç•¥å¯ä»¥é€šè¿‡xmit<span class="emphasis">_hash_</span>policyé€‰é¡¹æŒ‡å®šï¼Œæ­¤æ¨¡å¼æä¾›è´Ÿè½½å¹³è¡¡å’Œå®¹é”™èƒ½åŠ›ã€‚</span><br><span class="line">4) mode=3ï¼ˆbroadcastï¼‰å¹¿æ’­ç­–ç•¥</span><br><span class="line"><span class="bullet">    -</span> è¡¨ç¤ºæ‰€æœ‰åŒ…ä»æ‰€æœ‰ç½‘ç»œæ¥å£å‘å‡ºï¼Œè¿™ä¸ªä¸å‡è¡¡ï¼Œåªæœ‰å†—ä½™æœºåˆ¶ï¼Œä½†è¿‡äºæµªè´¹èµ„æºã€‚æ­¤æ¨¡å¼é€‚ç”¨äºé‡‘èè¡Œä¸šï¼Œå› ä¸ºä»–ä»¬éœ€è¦é«˜å¯é æ€§çš„ç½‘ç»œï¼Œä¸å…è®¸å‡ºç°ä»»ä½•é—®é¢˜ã€‚éœ€è¦å’Œäº¤æ¢æœºçš„èšåˆå¼ºåˆ¶ä¸åå•†æ–¹å¼é…åˆã€‚ç‰¹ç‚¹ï¼šåœ¨æ¯ä¸ªslaveæ¥å£ä¸Šä¼ è¾“æ¯ä¸ªæ•°æ®åŒ…ï¼Œæ­¤æ¨¡å¼æä¾›äº†å®¹é”™èƒ½åŠ›ã€‚</span><br><span class="line">5) mode=4(802.3ad)(IEEE 802.3ad åŠ¨æ€é“¾æ¥èšåˆ)</span><br><span class="line"><span class="bullet">    -</span> è¡¨ç¤ºæ”¯æŒ802.3adåè®®ï¼Œå’Œäº¤æ¢æœºçš„èšåˆLACPæ–¹å¼é…åˆï¼ˆéœ€è¦xmit<span class="emphasis">_hash_</span>policyï¼‰.æ ‡å‡†è¦æ±‚æ‰€æœ‰è®¾å¤‡åœ¨èšåˆæ“ä½œæ—¶ï¼Œè¦åœ¨åŒæ ·çš„é€Ÿç‡å’ŒåŒå·¥æ¨¡å¼ï¼Œè€Œä¸”ï¼Œå’Œé™¤äº†balance-rræ¨¡å¼å¤–çš„å…¶å®ƒbondingè´Ÿè½½å‡è¡¡æ¨¡å¼ä¸€æ ·ï¼Œä»»ä½•è¿æ¥éƒ½ä¸èƒ½ä½¿ç”¨å¤šäºä¸€ä¸ªæ¥å£çš„å¸¦å®½ã€‚</span><br><span class="line"><span class="bullet">    -</span> ç‰¹ç‚¹ï¼šåˆ›å»ºä¸€ä¸ªèšåˆç»„ï¼Œå®ƒä»¬å…±äº«åŒæ ·çš„é€Ÿç‡å’ŒåŒå·¥è®¾å®šã€‚æ ¹æ®802.3adè§„èŒƒå°†å¤šä¸ªslaveå·¥ä½œåœ¨åŒä¸€ä¸ªæ¿€æ´»çš„èšåˆä½“ä¸‹ã€‚</span><br><span class="line"><span class="bullet">    -</span> å¤–å‡ºæµé‡çš„slaveé€‰ä¸¾æ˜¯åŸºäºä¼ è¾“hashç­–ç•¥ï¼Œè¯¥ç­–ç•¥å¯ä»¥é€šè¿‡xmit<span class="emphasis">_hash_</span>policyé€‰é¡¹ä»ç¼ºçœçš„XORç­–ç•¥æ”¹å˜åˆ°å…¶ä»–ç­–ç•¥ã€‚éœ€è¦æ³¨æ„çš„ æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä¼ è¾“ç­–ç•¥éƒ½æ˜¯802.3adé€‚åº”çš„ï¼Œå°¤å…¶è€ƒè™‘åˆ°åœ¨802.3adæ ‡å‡†43.2.4ç« èŠ‚æåŠçš„åŒ…ä¹±åºé—®é¢˜ã€‚ä¸åŒçš„å®ç°å¯èƒ½ä¼šæœ‰ä¸åŒçš„é€‚åº” æ€§ã€‚</span><br><span class="line"><span class="bullet">    -</span> å¿…è¦æ¡ä»¶ï¼š</span><br><span class="line"><span class="bullet">        -</span> æ¡ä»¶1ï¼šethtoolæ”¯æŒè·å–æ¯ä¸ªslaveçš„é€Ÿç‡å’ŒåŒå·¥è®¾å®š</span><br><span class="line"><span class="bullet">        -</span> æ¡ä»¶2ï¼šswitch(äº¤æ¢æœº)æ”¯æŒIEEE 802.3ad Dynamic link aggregation</span><br><span class="line"><span class="bullet">        -</span> æ¡ä»¶3ï¼šå¤§å¤šæ•°switch(äº¤æ¢æœº)éœ€è¦ç»è¿‡ç‰¹å®šé…ç½®æ‰èƒ½æ”¯æŒ802.3adæ¨¡å¼</span><br><span class="line">6) mode=5(balance-tlb)é€‚é…å™¨ä¼ è¾“è´Ÿè½½å‡è¡¡</span><br><span class="line"><span class="bullet">    -</span> æ˜¯æ ¹æ®æ¯ä¸ªslaveçš„è´Ÿè½½æƒ…å†µé€‰æ‹©slaveè¿›è¡Œå‘é€ï¼Œæ¥æ”¶æ—¶ä½¿ç”¨å½“å‰è½®åˆ°çš„slaveã€‚è¯¥æ¨¡å¼è¦æ±‚slaveæ¥å£çš„ç½‘ç»œè®¾å¤‡é©±åŠ¨æœ‰æŸç§ethtoolæ”¯æŒï¼›è€Œä¸”ARPç›‘æ§ä¸å¯ç”¨ã€‚</span><br><span class="line"><span class="bullet">    -</span> ç‰¹ç‚¹ï¼šä¸éœ€è¦ä»»ä½•ç‰¹åˆ«çš„switch(äº¤æ¢æœº)æ”¯æŒçš„é€šé“bondingã€‚åœ¨æ¯ä¸ªslaveä¸Šæ ¹æ®å½“å‰çš„è´Ÿè½½ï¼ˆæ ¹æ®é€Ÿåº¦è®¡ç®—ï¼‰åˆ†é…å¤–å‡ºæµé‡ã€‚å¦‚æœæ­£åœ¨æ¥å—æ•°æ®çš„slaveå‡ºæ•…éšœäº†ï¼Œå¦ä¸€ä¸ªslaveæ¥ç®¡å¤±è´¥çš„slaveçš„MACåœ°å€ã€‚</span><br><span class="line"><span class="bullet">    -</span> å¿…è¦æ¡ä»¶ï¼šethtoolæ”¯æŒè·å–æ¯ä¸ªslaveçš„é€Ÿç‡</span><br><span class="line">7) mode=6ï¼ˆbalance-albï¼‰é€‚é…å™¨é€‚åº”æ€§è´Ÿè½½å‡è¡¡</span><br><span class="line"><span class="bullet">    -</span> åœ¨5çš„tlbåŸºç¡€ä¸Šå¢åŠ äº†rlb(æ¥æ”¶è´Ÿè½½å‡è¡¡receive load balance).ä¸éœ€è¦ä»»ä½•switch(äº¤æ¢æœº)çš„æ”¯æŒã€‚æ¥æ”¶è´Ÿè½½å‡è¡¡æ˜¯é€šè¿‡ARPåå•†å®ç°çš„ã€‚</span><br></pre></td></tr></tbody></table></figure>

<div class="note info flat"><p>bondæŠ€æœ¯å®ç°ç½‘å¡ç»‘å®š</p>
</div>
<mark class="hl-label green">å‡†å¤‡</mark> 

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">å‰æï¼š</span><br><span class="line">1ã€bondæŠ€æœ¯ä¾èµ–å†…æ ¸çš„bondingæ¨¡å—ï¼Œæ‰€ä»¥éœ€è¦å…ˆåŠ è½½bondingæ¨¡å—æ‰è¡Œ</span><br><span class="line">2ã€è¦ä½¿å¾—bondèƒ½æ­£å¸¸å·¥ä½œï¼Œå¿…é¡»å®‰è£…ifenslave å·¥å…·ï¼Œå®ƒå°†ä¸¤ä¸ªæˆ–æ›´å¤šçš„ç½‘ç»œæ¥å£ç»‘å®šåˆ°ä¸€ä¸ªå•ä¸€çš„é€šé“,å¦‚æœæ²¡è£…è¿™ä¸ªå·¥å…·ï¼Œå…·ä½“è¡¨ç°ä¸ºbondæ— æ³•å¯åŠ¨ï¼Œä¸€ç›´æ˜¯downçš„çŠ¶æ€</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ˜¯å¦å·²åŠ è½½bondingæ¨¡å—</span></span><br><span class="line">lsmod | grep bonding</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½bondingæ¨¡å—</span></span><br><span class="line">sudo modprobe bonding</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œä¸ç„¶é€šè¿‡å‘½ä»¤åŠ è½½æ¨¡å—ï¼Œé‡å¯ä¼šå¤±æ•ˆ</span></span><br><span class="line">sudo vim /etc/modules</span><br><span class="line">bonding <span class="comment"># åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥éœ€è¦å¼€å¯åŠ è½½çš„æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦å®‰è£…ifenslave</span></span><br><span class="line"><span class="built_in">which</span> ifenslave</span><br></pre></td></tr></tbody></table></figure>
<mark class="hl-label green">ä¿®æ”¹é…ç½®æ–‡ä»¶å®ç°bondæŠ€æœ¯</mark> 
<div class="tabs" id="bond"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="bond-1">centoså®ç°</button><button type="button" class="tab " data-href="bond-2">ubuntuå®ç°</button><button type="button" class="tab " data-href="bond-3">éº’éºŸç³»ç»Ÿï¼šKV10-SP1</button></ul><div class="tab-contents"><div class="tab-item-content active" id="bond-1"><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">1ã€åˆ›å»ºbondingçš„é…ç½®æ–‡ä»¶</span><br><span class="line">sudo vim /etc/sysconfig/network-scripts/ifcfg-bond0</span><br><span class="line"><span class="comment">#æ·»åŠ ç›¸å…³å‚æ•°</span></span><br><span class="line">DEVICE=bond0                    <span class="comment">## å¯ä»¥æ ¹æ®è‡ªå·±çš„å‘½åè§„åˆ™æ¥å‘½åï¼Œä¸€èˆ¬å«ä½œbondX</span></span><br><span class="line">BONDING_MASTER=<span class="built_in">yes</span>                <span class="comment">## è¡¨ç¤ºbond0ä¸ºç»‘å®šçš„ä¸»è®¾å¤‡</span></span><br><span class="line">IPADDR=192.168.1.22             <span class="comment">#éœ€è¦åšæ¼‚ç§»çš„ip</span></span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.1.1</span><br><span class="line">ONBOOT=<span class="built_in">yes</span>                        <span class="comment"># å¼€å¯è‡ªå¯åŠ¨</span></span><br><span class="line">BOOTPROTO=none                    <span class="comment"># é™æ€åœ°å€åˆ†é…</span></span><br><span class="line">BONDING_OPTS=<span class="string">"mode=active-backup miimon=100 primary=ens160"</span></span><br><span class="line"><span class="comment">#DNS1=</span></span><br><span class="line"><span class="comment">#DNS2=</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="comment"># BONDING_OPTSå†³å®šäº† bonding çš„æ¨¡å¼ model=1(active-backup)è¡¨ç¤ºæ˜¯ä¸»å¤‡æ¨¡å¼ï¼Œmode=0è¡¨ç¤ºä¸ºè½®è¯¢æ¨¡å¼</span></span><br><span class="line">&gt; <span class="comment"># miimon=100è¡¨ç¤ºç³»ç»Ÿæ¯100ms ç›‘æµ‹ä¸€æ¬¡é“¾è·¯è¿æ¥çŠ¶æ€ï¼Œå¦‚æœæœ‰ä¸€æ¡çº¿è·¯ä¸é€šå°±è½¬å…¥å¦ä¸€æ¡çº¿è·¯</span></span><br><span class="line">&gt; <span class="comment"># primary=ens160 æŒ‡å®šens160ä¸ºæ­£å¸¸æ—¶ä¸ºä¸»èŠ‚ç‚¹ã€å½“ens160 downæ‰åæ‰ç”±ens256ç»§æ‰¿ã€ens160èµ·æ¥åè¿˜æ˜¯ç”±ens160æ¥å·¥ä½œ</span></span><br><span class="line">&gt; <span class="comment">#DNSéœ€è¦å°±æ·»åŠ åˆ°æœ€å</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2ã€ä¿®æ”¹ç½‘å¡çš„é…ç½®æ–‡ä»¶</span><br><span class="line"><span class="comment">#ä¾‹å¦‚æˆ‘è¿™é‡Œå°†ens160å’Œeen256ä¸¤ä¸ªç½‘å¡åŠ å…¥åˆ°bond0é‡Œé¢å»ï¼Œå°±éœ€è¦ä¿®æ”¹ens160å’Œens256çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">ens160è®¾ç½®ï¼š</span><br><span class="line">sudo vim /etc/sysconfig/network-scripts/ifcfg-ens160</span><br><span class="line">----------------------------------------------------</span><br><span class="line">DEVICE=<span class="string">"ens160"</span></span><br><span class="line">ONBOOT=<span class="string">"yes"</span></span><br><span class="line">BOOTPROTO=<span class="string">"none"</span></span><br><span class="line">MASTER=<span class="string">"bond0"</span></span><br><span class="line">SLAVE=<span class="string">"yes"</span></span><br><span class="line">----------------------------------------------------</span><br><span class="line"></span><br><span class="line">ens256è®¾ç½®ï¼š</span><br><span class="line">sudo vim /etc/sysconfig/network-scripts/ifcfg-ens256</span><br><span class="line">----------------------------------------------------</span><br><span class="line">DEVICE=<span class="string">"ens256"</span></span><br><span class="line">ONBOOT=<span class="string">"yes"</span></span><br><span class="line">BOOTPROTO=<span class="string">"none"</span></span><br><span class="line">MASTER=<span class="string">"bond0"</span></span><br><span class="line">SLAVE=<span class="string">"yes"</span></span><br><span class="line">-----------------------------------------------------</span><br><span class="line"></span><br><span class="line">3ã€é‡å¯ç½‘ç»œç®¡ç†æœåŠ¡</span><br><span class="line">systemctl restart network</span><br><span class="line"></span><br><span class="line">4ã€æŸ¥çœ‹åœ°å€ï¼šip a</span><br><span class="line">- å‘ç°ens160å’Œens256ç½‘å¡ipéƒ½æ²¡äº†ï¼ˆè¿™æ ·æ‰æ˜¯æ­£å¸¸çš„ï¼‰</span><br><span class="line">- å¤šå‡ºäº†ä¸€ä¸ª bond0</span><br><span class="line">-------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@k8s-loadbalancer2 ~]<span class="comment"># ip a</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens160: &lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master bond0 state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 00:0c:29:09:66:8f brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: ens256: &lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master bond0 state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 00:0c:29:09:66:8f brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: bond0: &lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 00:0c:29:09:66:8f brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.22/24 brd 192.168.1.255 scope global noprefixroute bond0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">5ã€æŸ¥çœ‹bond0çš„è¯¦ç»†ä¿¡æ¯ï¼š</span><br><span class="line">- <span class="built_in">cat</span> /proc/net/bonding/bond0</span><br><span class="line">- Primary Slave æŒ‡ç½‘å¡æ­£å¸¸æ—¶ç”±ens160æ¥å½“ä¸»</span><br><span class="line">- MII Status: up è¯´æ˜ç½‘å¡æ­£å¸¸</span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">[root@k8s-loadbalancer2 ~]<span class="comment"># cat /proc/net/bonding/bond0</span></span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: fault-tolerance (active-backup)</span><br><span class="line">Primary Slave: ens160 (primary_reselect always)</span><br><span class="line">Currently Active Slave: ens160</span><br><span class="line">MII Status: up</span><br><span class="line">MII Polling Interval (ms): 50</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: ens256</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:09:66:99</span><br><span class="line">Slave queue ID: 0</span><br><span class="line"></span><br><span class="line">Slave Interface: ens160</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:09:66:8f</span><br><span class="line">Slave queue ID: 0</span><br><span class="line">----------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">6ã€æµ‹è¯•</span><br><span class="line">- æ­¤æ—¶å½“æ‰§è¡Œï¼šifdown ens160  æ—¶ï¼Œens256ä¼šæ¥ç®¡ipï¼ˆ192.168.1.22ï¼‰</span><br><span class="line">- æŸ¥çœ‹ï¼š/proc/net/bonding/bond0</span><br><span class="line">  - æ­¤æ—¶æ˜¯ens256æ¥æ¥ç®¡å·¥ä½œçš„</span><br><span class="line">- å†æ‰§è¡Œ ifup ens160 å†æŸ¥çœ‹ï¼Œå‘ç°æ­¤æ—¶æ˜¯ens160æ¥æ¥ç®¡ipå·¥ä½œäº†</span><br><span class="line">---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">[root@k8s-loadbalancer2 ~]<span class="comment"># cat /proc/net/bonding/bond0</span></span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: fault-tolerance (active-backup)</span><br><span class="line">Primary Slave: None</span><br><span class="line">Currently Active Slave: ens256</span><br><span class="line">MII Status: up</span><br><span class="line">MII Polling Interval (ms): 50</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: ens256</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:09:66:99</span><br><span class="line">Slave queue ID: 0</span><br><span class="line">-------------------------------------------------------------------</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong>å¦‚æœæœ¬æœºå®‰è£…äº†keepaliveç­‰ä¸€äº›è™šæ‹Ÿipçš„è¯ã€å¯èƒ½ä¼šäº§ç”ŸæŸä¸ªè¢«keepaliveç»‘å®šçš„ç½‘å¡è¢«æŒ‡å®šä¸€ä¸ªipï¼ˆvipï¼‰ã€æ­¤æ—¶æœåŠ¡å™¨ä¸Šä¼šäº§ç”Ÿ ARP ç¼“å­˜ã€æ­¤æ—¶è¦æ‰‹åŠ¨æ¸…ç†ï¼š<br><strong>centosç³»ç»Ÿï¼š</strong>sudo ip neigh flush all<br><strong>ubuntuç³»ç»Ÿï¼š</strong>sudo arp -d -i ens160 192.168.1.250&nbsp;<br>æ¸…ç†å®ŒåŸæ¥è¢«keepaliveç»‘å®šçš„ç½‘å¡ç¼“å­˜åã€å°†keepalive.confé…ç½®æ–‡ä»¶ä¸­çš„ æŒ‡å®šç»‘å®šçš„ç½‘å¡æ”¹ä¸ºï¼š<strong>bond0</strong> è¿™ä¸ªç½‘å¡å³å¯</p>
</blockquote></div><div class="tab-item-content" id="bond-2"><div calss="anzhiyu-tag-link"><a class="tag-Link" target="_blank" href="https://www.cnblogs.com/heyongshen/p/16461235.html">
    <div class="tag-link-tips">å¼•ç”¨ç«™å¤–åœ°å€</div>
    <div class="tag-link-bottom">
        <div class="tag-link-left" style="">
          <i class="anzhiyufont anzhiyu-icon-link" style=""></i>
        </div>
        <div class="tag-link-right">
            <div class="tag-link-title">å‚è€ƒ</div>
            <div class="tag-link-sitename">bond</div>
        </div>
        <i class="anzhiyufont anzhiyu-icon-angle-right"></i>
    </div>
    </a></div></div><div class="tab-item-content" id="bond-3"><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç½‘å¡ä¿¡æ¯ï¼šåœ¨ç»ˆç«¯è¾“å…¥ï¼šifconfigï¼Œå¯ä»¥çœ‹åˆ°å½“å‰ç³»ç»Ÿå­˜åœ¨ens33ã€ens36ä¸¤å—ç½‘å¡</span><br><span class="line">2ã€åˆ›å»ºbondè™šæ‹Ÿç½‘å¡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</span><br><span class="line"><span class="variable">$nmcli</span> connection add <span class="built_in">type</span> bond con-name bond1 ifname bond1 mode 1 ipv4.addresses 192.168.231.137/24 ipv4.method manual autoconnect <span class="built_in">yes</span></span><br><span class="line"><span class="comment">#typeï¼šåˆ›å»ºçš„ç±»å‹ï¼Œé€‰æ‹©bondç±»å‹</span></span><br><span class="line"><span class="comment">#con-nameï¼šé“¾æ¥å</span></span><br><span class="line"><span class="comment">#ifnameï¼šç½‘å¡åï¼Œè¿™é‡Œbond1æ˜¯è™šæ‹Ÿå‡ºæ¥çš„</span></span><br><span class="line"><span class="comment">#modeï¼šbondæ¨¡å¼ï¼Œå¯ç”¨0-6è¡¨ç¤º</span></span><br><span class="line"><span class="comment">#ipv4.mehodï¼šè¡¨ç¤ºè‡ªåŠ¨è¿˜æ˜¯æ‰‹åŠ¨è·å–IPï¼Œmanualä»£è¡¨æ‰‹åŠ¨ï¼Œautoä»£è¡¨è‡ªåŠ¨</span></span><br><span class="line"><span class="comment">#ipv4.addressï¼šè®¾ç½®IPåœ°å€</span></span><br><span class="line"><span class="comment">#autoconnextï¼šæ˜¯å¦å¼€æœºè‡ªåŠ¨è¿æ¥</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3ã€ä¸ºbondç½‘å¡æ·»åŠ æˆå‘˜ï¼ˆçœŸå®ç½‘å¡ï¼‰ï¼Œå‘½ä»¤ï¼š</span><br><span class="line"><span class="variable">$nmcli</span> connect add <span class="built_in">type</span> bond-slave ifname ens33 master bond1     </span><br><span class="line"><span class="variable">$nmcli</span> connect add <span class="built_in">type</span> bond-slave ifname ens37 master bond1</span><br><span class="line"><span class="comment">#ç”Ÿæˆç½‘å¡æ–‡ä»¶ï¼šifcfg-bond-slave-ens33ã€ifcfg-bond-slave-ens36</span></span><br><span class="line"><span class="comment">#ç±»å‹ä¸ºbond-slaveï¼Œè¡¨ç¤ºè¿™å—çœŸå®ç½‘å¡å±äºä¸€å—é™„å±çš„ç½‘å¡ï¼ŒåŸæœ‰é…ç½®çš„å±æ€§éƒ½ä¸èƒ½ä½¿ç”¨äº†</span></span><br><span class="line"><span class="comment">#masterï¼šè¡¨ç¤ºè¿™å—ç½‘å¡å±äºbond1è¿™ä¸ªç»„</span></span><br><span class="line"></span><br><span class="line">4ã€æ·»åŠ å®Œæˆä¹‹åï¼Œå‘½ä»¤ï¼šnmcli connect æŸ¥è¯¢æ–°æ·»åŠ çš„é™„å±ç½‘å¡æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœªå¯ç”¨ï¼Œéœ€è¦ç”¨å‘½ä»¤è¿›è¡Œå¯ç”¨</span><br><span class="line"><span class="variable">$nmcli</span> connect</span><br><span class="line">NAME              UUID                                  TYPE      DEVICE</span><br><span class="line">bond1             ef494df9-6855-49a3-92b0-3f5f9b11f9e4  bond      bond1</span><br><span class="line">bond-slave-ens33  cfccec17-01d8-48f8-91a6-e268e7c5c4a4  ethernet  ens33</span><br><span class="line">bond-slave-ens36  40cd6eac-810d-489d-8557-482b2239cc84  ethernet  ens36</span><br><span class="line">ens33             7c0dd8e6-4308-4ac5-8841-32fb10b376a2  ethernet  --</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5ã€å¯åŠ¨ç½‘å¡ï¼š</span><br><span class="line"><span class="variable">$nmcli</span> connect up bond-slave-ens33</span><br><span class="line"><span class="variable">$nmcli</span> connect up bond-slave-ens36</span><br><span class="line"></span><br><span class="line">6ã€æŸ¥çœ‹é“¾æ¥ä¿¡æ¯å¹¶è¿›è¡Œæµ‹è¯•</span><br><span class="line"><span class="variable">$cat</span>  /proc/net/bonding/bond1</span><br><span class="line">---------------------------------------------------------------</span><br><span class="line">Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)</span><br><span class="line"></span><br><span class="line">Bonding Mode: fault-tolerance (active-backup) (fail_over_mac active)</span><br><span class="line">Primary Slave: ens33 (primary_reselect always)</span><br><span class="line">Currently Active Slave: ens33</span><br><span class="line">MII Status: up</span><br><span class="line">MII Polling Interval (ms): 100</span><br><span class="line">Up Delay (ms): 0</span><br><span class="line">Down Delay (ms): 0</span><br><span class="line"></span><br><span class="line">Slave Interface: ens36</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:b3:77:46</span><br><span class="line">Slave queue ID: 0</span><br><span class="line"></span><br><span class="line">Slave Interface: ens33</span><br><span class="line">MII Status: up</span><br><span class="line">Speed: 1000 Mbps</span><br><span class="line">Duplex: full</span><br><span class="line">Link Failure Count: 0</span><br><span class="line">Permanent HW addr: 00:0c:29:b3:77:3c</span><br><span class="line">Slave queue ID: 0</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">7ã€æµ‹è¯•ï¼šä½¿ç”¨å‘½ä»¤ç¦ç”¨æ­£åœ¨ä½¿ç”¨çš„bond-slave-ens33ç½‘å¡ï¼Œæ‰¾ä¸€å°å…¶ä»–ä¸»æœºä½¿ç”¨pingè¿›è¡Œæµ‹è¯•å³å¯</span><br><span class="line"><span class="variable">$nmcli</span> connection down bond-slave-ens33</span><br><span class="line"></span><br><span class="line">8ã€å¸¸è§é—®é¢˜</span><br><span class="line">ä½¿ç”¨è™šæ‹Ÿæœºè¿›è¡Œæµ‹è¯•æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°ç¦ç”¨ç½‘å¡åæ— æ³•pingé€šçš„é—®é¢˜ï¼Œè¿™æ—¶éœ€è¦åœ¨bond1çš„è™šæ‹Ÿç½‘å¡é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å‚æ•°å³å¯</span><br><span class="line"><span class="comment">#è¿›å…¥bond1é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="variable">$vim</span> /etc/sysconfig/network-scripts/ifcfg-bond1</span><br><span class="line"><span class="comment">#æ·»åŠ ä¸€è¡Œ</span></span><br><span class="line">BONDING_OPTS=<span class="string">"miimon=100 mode=1 fail_over_mac=1"</span></span><br><span class="line"><span class="comment">#miimonï¼šé“¾è·¯æ£€æŸ¥æ—¶é—´100ms</span></span><br><span class="line"><span class="comment">#mode ï¼šæ¨¡å¼ä¸º1ï¼Œè¦ä¸bondæ¨¡å¼ç›¸åŒ</span></span><br><span class="line"><span class="comment">#fail_over_mac=1 ï¼šmacåœ°å€è·Ÿéšæ­£å¸¸å·¥ä½œçš„ç½‘å¡ï¼Œå½“ç¬¬ä¸€å—ç½‘å¡æŒ‚æ‰ä¹‹åï¼Œè‡ªåŠ¨å°†macåœ°å€è°ƒæ•´ä¸ºç¬¬äºŒå—ç½‘å¡çš„mac</span></span><br><span class="line"></span><br><span class="line">9ã€åˆ é™¤ç½‘å¡ä¿¡æ¯</span><br><span class="line"><span class="variable">$nmcli</span> connect delete bond1 bond-slave-ens33 bond-slave-ens37</span><br><span class="line"></span><br><span class="line">10ã€å¦‚æœä¿®æ”¹é…ç½®å°±éœ€è¦é‡å¯ï¼š</span><br><span class="line"><span class="variable">$sudo</span> systemctl restart NetworkManager</span><br><span class="line"><span class="variable">$sudo</span> systemctl restart network</span><br></pre></td></tr></tbody></table></figure>
<p><mark class="hl-label red">ç½‘å¡çš„å®Œæ•´é…ç½®</mark> </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">ifcfg-bond1</span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line">BONDING_OPTS=mode=active-backup</span><br><span class="line">TYPE=Bond</span><br><span class="line">BONDING_MASTER=<span class="built_in">yes</span></span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=192.168.177.201</span><br><span class="line">PREFIX=24</span><br><span class="line">DEFROUTE=<span class="built_in">yes</span></span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=<span class="built_in">yes</span></span><br><span class="line">IPV6_AUTOCONF=<span class="built_in">yes</span></span><br><span class="line">IPV6_DEFROUTE=<span class="built_in">yes</span></span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class="line">NAME=bond0</span><br><span class="line">UUID=ef494df9-6855-49a3-92b0-3f5f9b11f9e4</span><br><span class="line">DEVICE=bond0</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">BONDING_OPTS=<span class="string">"mode=1 miimon=100 primary=ens33 primary_reselect=always fail_over_mac=1"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#primary=ens33 æŒ‡å®šä¸»ç½‘å¡</span></span><br><span class="line"><span class="comment">#mode=1 è¡¨ç¤º active-backup æ¨¡å¼ã€‚</span></span><br><span class="line"><span class="comment">#miimon=100 æ£€æµ‹æ—¶é—´</span></span><br><span class="line"><span class="comment">#primary_reselect=alwaysï¼šæŒ‡ç¤º Bonding é©±åŠ¨ç¨‹åºæ€»æ˜¯ é‡æ–° é€‰æ‹©ä¸»ç½‘å¡ã€‚ç¡®ä¿åœ¨ä¸»ç½‘å¡å‡ºç°æ•…éšœæˆ–é‡æ–°è¿æ¥æ—¶è‡ªåŠ¨åˆ‡æ¢</span></span><br><span class="line"><span class="comment">#fail_over_mac=1 ï¼šmacåœ°å€è·Ÿéšæ­£å¸¸å·¥ä½œçš„ç½‘å¡ï¼Œå½“ç¬¬ä¸€å—ç½‘å¡æŒ‚æ‰ä¹‹åï¼Œè‡ªåŠ¨å°†macåœ°å€è°ƒæ•´ä¸ºç¬¬äºŒå—ç½‘å¡çš„mac</span></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">ifcfg-bond-slave-ens33</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">NAME=bond-slave-ens33</span><br><span class="line">UUID=cfccec17-01d8-48f8-91a6-e268e7c5c4a4</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">MASTER=bond0</span><br><span class="line">SLAVE=<span class="built_in">yes</span></span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">ifcfg-bond-slave-ens36</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">NAME=bond-slave-ens36</span><br><span class="line">UUID=cfccec17-01d8-48f8-91a6-e268e7c5c4a4</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">MASTER=bond0</span><br><span class="line">SLAVE=<span class="built_in">yes</span></span><br><span class="line">-----------------------------------------------------------------------------</span><br></pre></td></tr></tbody></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux, ç½‘ç»œ, bond</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxè·¯ç”±è¡¨è¯¦è§£-è¿½è¸ªè·¯ç”±</title>
    <url>/looking/996ca674.html</url>
    <content><![CDATA[
    <p class="centered-text">linux è·¯ç”±è¡¨è¯¦è§£</p>



<h1 id="é€šè¿‡-route-å‘½ä»¤æŸ¥çœ‹-Linux-å†…æ ¸çš„è·¯ç”±è¡¨ï¼š"><a href="#é€šè¿‡-route-å‘½ä»¤æŸ¥çœ‹-Linux-å†…æ ¸çš„è·¯ç”±è¡¨ï¼š" class="headerlink" title="é€šè¿‡ route å‘½ä»¤æŸ¥çœ‹ Linux å†…æ ¸çš„è·¯ç”±è¡¨ï¼š"></a><code>é€šè¿‡ route å‘½ä»¤æŸ¥çœ‹ Linux å†…æ ¸çš„è·¯ç”±è¡¨ï¼š</code></h1><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$route</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         _gateway        0.0.0.0         UG    0      0        0 p5p1</span><br><span class="line">default         _gateway        0.0.0.0         UG    100    0        0 em1</span><br><span class="line">10.150.0.0      10.150.54.126   255.255.0.0     UG    0      0        0 em2</span><br><span class="line">10.150.54.0     0.0.0.0         255.255.255.128 U     0      0        0 em2</span><br><span class="line">link-local      0.0.0.0         255.255.0.0     U     1002   0        0 p5p1</span><br><span class="line">link-local      0.0.0.0         255.255.0.0     U     1004   0        0 em1</span><br><span class="line">link-local      0.0.0.0         255.255.0.0     U     1005   0        0 em2</span><br><span class="line">172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 docker0</span><br><span class="line">172.18.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-de7a849d77f1</span><br><span class="line">172.19.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-9bc222159381</span><br><span class="line">172.24.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-2d803453c335</span><br><span class="line">172.33.1.0      _gateway        255.255.255.0   UG    0      0        0 em1</span><br><span class="line">172.33.9.0      0.0.0.0         255.255.255.0   U     100    0        0 em1</span><br><span class="line">172.33.137.0    0.0.0.0         255.255.255.0   U     0      0        0 p5p1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$route</span> -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         172.11.120.254  0.0.0.0         UG    0      0        0 p5p1</span><br><span class="line">0.0.0.0         172.32.8.254    0.0.0.0         UG    100    0        0 em1</span><br><span class="line">10.150.0.0      10.150.54.126   255.255.0.0     UG    0      0        0 em2</span><br><span class="line">10.150.54.0     0.0.0.0         255.255.255.128 U     0      0        0 em2</span><br><span class="line">169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 p5p1</span><br><span class="line">169.254.0.0     0.0.0.0         255.255.0.0     U     1004   0        0 em1</span><br><span class="line">169.254.0.0     0.0.0.0         255.255.0.0     U     1005   0        0 em2</span><br><span class="line">172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 docker0</span><br><span class="line">172.18.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-de7a849d77f1</span><br><span class="line">172.19.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-9bc222159381</span><br><span class="line">172.24.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-2d803453c335</span><br><span class="line">172.33.1.0      172.32.8.254    255.255.255.0   UG    0      0        0 em1</span><br><span class="line">172.33.9.0      0.0.0.0         255.255.255.0   U     100    0        0 em1</span><br><span class="line">172.33.137.0    0.0.0.0         255.255.255.0   U     0      0        0 p5p1</span><br></pre></td></tr></tbody></table></figure>
<h2 id="å„åˆ—å­—æ®µè¯´æ˜ï¼š"><a href="#å„åˆ—å­—æ®µè¯´æ˜ï¼š" class="headerlink" title="å„åˆ—å­—æ®µè¯´æ˜ï¼š"></a><code>å„åˆ—å­—æ®µè¯´æ˜ï¼š</code></h2><table>
<thead>
<tr>
<th>åˆ—</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>Destination</td>
<td>ç›®æ ‡ç½‘ç»œç½‘å…³æˆ–ç›®æ ‡ä¸»æœºã€‚Destination ä¸º defaultï¼ˆ<code>0.0.0.0</code>ï¼‰æ—¶ï¼Œè¡¨ç¤ºè¿™ä¸ªæ˜¯é»˜è®¤ç½‘å…³ï¼Œæ‰€æœ‰æ•°æ®éƒ½å‘åˆ°è¿™ä¸ªç½‘å…³ï¼ˆè¿™é‡Œæ˜¯<code>172.11.120.254</code>å’Œ<code>172.32.8.254</code>ï¼‰</td>
</tr>
<tr>
<td>Gateway</td>
<td>æœ¬æœºçš„ç½‘å…³åœ°å€ï¼Œ<code>0.0.0.0</code> è¡¨ç¤ºå½“å‰è®°å½•å¯¹åº”çš„ Destination è·Ÿæœ¬æœºåœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œé€šä¿¡æ—¶ä¸éœ€è¦ç»è¿‡ç½‘å…³ï¼›å¦‚ä¸åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œå¯å€ŸåŠ©ç›¸å…³è·¯ç”±è·³è¿‡å»ï¼Œå¦‚è¿™é‡Œå€ŸåŠ©<code>10.150.54.126</code>ç½‘å…³è·³åˆ°<code>10.150.0.0</code> æ®µçš„ç½‘ç»œ</td>
</tr>
<tr>
<td>Genmask</td>
<td>ç›®æ ‡ç½‘ç»œ(Destination) å­—æ®µçš„ç½‘ç»œæ©ç ï¼ŒDestination æ˜¯ä¸»æœºæ—¶éœ€è¦è®¾ç½®ä¸º 255.255.255.255ï¼Œæ˜¯é»˜è®¤è·¯ç”±æ—¶ä¼šè®¾ç½®ä¸º 0.0.0.0</td>
</tr>
<tr>
<td>Flags</td>
<td>æ ‡è®°ï¼Œå«ä¹‰å‚è€ƒè¡¨æ ¼åé¢çš„è§£é‡Š</td>
</tr>
<tr>
<td>Metric</td>
<td>è·¯ç”±è·ç¦»ï¼Œåˆ°è¾¾æŒ‡å®šç½‘ç»œæ‰€éœ€çš„ä¸­è½¬æ•°ï¼Œæ˜¯å¤§å‹å±€åŸŸç½‘å’Œå¹¿åŸŸç½‘è®¾ç½®æ‰€å¿…éœ€çš„ ï¼ˆä¸åœ¨Linuxå†…æ ¸ä¸­ä½¿ç”¨ã€‚ï¼‰</td>
</tr>
<tr>
<td>Ref</td>
<td>è·¯ç”±é¡¹å¼•ç”¨æ¬¡æ•° ï¼ˆä¸åœ¨Linuxå†…æ ¸ä¸­ä½¿ç”¨ã€‚ï¼‰</td>
</tr>
<tr>
<td>Use</td>
<td>æ­¤è·¯ç”±é¡¹è¢«è·¯ç”±è½¯ä»¶æŸ¥æ‰¾çš„æ¬¡æ•°</td>
</tr>
<tr>
<td>Iface</td>
<td>ç½‘å¡åå­—ï¼Œä¾‹å¦‚ <code>em1</code></td>
</tr>
</tbody></table>
<p><code>Flags å«ä¹‰ï¼š</code></p>
<blockquote>
<p>U è·¯ç”±æ˜¯æ´»åŠ¨çš„<br>H ç›®æ ‡æ˜¯ä¸ªä¸»æœº<br>G éœ€è¦ç»è¿‡ç½‘å…³<br>R æ¢å¤åŠ¨æ€è·¯ç”±äº§ç”Ÿçš„è¡¨é¡¹<br>D ç”±è·¯ç”±çš„åå°ç¨‹åºåŠ¨æ€åœ°å®‰è£…<br>M ç”±è·¯ç”±çš„åå°ç¨‹åºä¿®æ”¹<br>! æ‹’ç»è·¯ç”±</p>
</blockquote>
<p><code>å¦‚ä½•çœ‹è¿™ä¸ªè·¯ç”±è¡¨ï¼š</code></p>
<blockquote>
<p>ä»å³å¾€å·¦çœ‹ï¼šæ¯”å¦‚ç¬¬ä¸‰è¡Œï¼š <code>10.150.0.0 | 10.150.54.126  | 255.255.0.0   |  UG |   0   |   0    |  0 | em2</code><br>æµé‡æ•°æ®ä»æœ¬æœºçš„ç½‘å¡<code>em2</code>å‡ºå»åˆ°(äº¤æ¢æœº)ç½‘å…³<code>10.150.54.126</code>ï¼Œå€ŸåŠ©è¿™ä¸ªç½‘å…³å°†æ•°æ®é€å¾€ç›®æ ‡ç½‘ç»œåœ°å€(ç½‘å…³)<code>10.150.0.0</code><br>å…¶ä¸­è¦æ˜ç¡®åœ°å€<code>10.150.54.126</code> ä¸ <code>10.150.0.0</code> æ˜¯èƒ½é€šè®¯çš„ã€å¦åˆ™æµé‡æ˜¯è¿‡ä¸å»çš„</p>
</blockquote>
<h2 id="ip-route-showæŸ¥çœ‹"><a href="#ip-route-showæŸ¥çœ‹" class="headerlink" title="ip route showæŸ¥çœ‹"></a><code>ip route showæŸ¥çœ‹</code></h2><blockquote>
<p>â€œip route showâ€ æ˜¯ Linux ä¸­çš„å‘½ä»¤ï¼Œç”¨äºæ˜¾ç¤ºè®¡ç®—æœºä¸Šçš„è·¯ç”±è¡¨ã€‚è·¯ç”±è¡¨è®°å½•äº†è®¡ç®—æœºå¦‚ä½•å°†æ•°æ®åŒ…å‘é€åˆ°ç½‘ç»œä¸­çš„å…¶ä»–è®¡ç®—æœº</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$ip</span> route show</span><br><span class="line">default via 172.33.137.254 dev p5p1</span><br><span class="line">default via 172.33.9.254 dev em1 proto static metric 100</span><br><span class="line">10.150.0.0/16 via 10.150.54.126 dev em2</span><br><span class="line">10.15.54.0/25 dev em2 proto kernel scope <span class="built_in">link</span> src 10.15.54.10</span><br><span class="line">169.254.0.0/16 dev p5p1 scope <span class="built_in">link</span> metric 1002</span><br><span class="line">172.3.1.0/24 via 172.13.9.254 dev em1</span><br><span class="line">172.3.1.0/24 dev em1 proto kernel scope <span class="built_in">link</span> src 172.3.1.12 metric 100</span><br><span class="line">172.2.136.0/24 dev p5p1 proto kernel scope <span class="built_in">link</span> src 172.2.136.12</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>ä¸Šé¢è·¯ç”±è®°å½•çš„æ ¼å¼é€šå¸¸éƒ½æ˜¯è¿™æ ·çš„ï¼š<br>&lt;ç›®çš„åœ°&gt; via &lt;ç½‘å…³&gt; dev &lt;æ¥å£ç½‘å¡&gt; proto &lt;åè®®&gt; src &lt;æºåœ°å€æˆ–æœ¬æœºåœ°å€&gt; &lt;é™„åŠ ä¿¡æ¯&gt;</p>
</blockquote>
<table>
<thead>
<tr>
<th>åˆ—</th>
<th>è§£æ</th>
</tr>
</thead>
<tbody><tr>
<td>&lt;ç›®çš„åœ°&gt;</td>
<td><code>ç›®çš„åœ°ç½‘ç»œç½‘å…³æˆ–ä¸»æœº</code>ï¼Œå¯ä»¥æ˜¯å…·ä½“çš„ IP åœ°å€ï¼ˆå¦‚ <code>10.15.54.50</code>ï¼‰ã€ç½‘ç»œåœ°å€ ï¼ˆå¦‚<code>10.15.54.0/25</code>ï¼‰æˆ– default ç­‰ã€‚default ä¼šåœ¨æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„è·¯ç”±æ¡ç›®æ—¶ä½¿ç”¨ï¼›</td>
</tr>
<tr>
<td>via &lt;ç½‘å…³&gt;</td>
<td>å¯é€‰å­—æ®µï¼ŒæŒ‡çš„æ˜¯åˆ°è¾¾<code>ç›®çš„åœ°å€</code>éœ€è¦ä½¿ç”¨çš„<code>ç½‘å…³çš„ IP åœ°å€</code>ã€‚<code>å‘å¾€</code>è¿™ä¸ªè·¯ç”±æ¡ç›®å¯¹åº”çš„ç›®çš„åœ°çš„æ•°æ®åŒ…ï¼Œéƒ½ä¼šæŠŠè¿™ä¸ª<code>ç½‘å…³è®¾ç½®ä¸ºä¸‹ä¸€è·³</code>ï¼Œç»ç”±æ­¤<code>&lt;via&gt;</code>å‘å¾€æœ€ç»ˆç›®çš„åœ°ï¼›æ¯”å¦‚ï¼š<code>em1</code>ç½‘å¡ é€šè¿‡ ç½‘å…³<code>via 172.13.9.254</code>è·³åˆ° <code>172.3.1.0/24</code>ç½‘æ®µ ï¼Œè¿™æ ·å°±å®ç°äº†ä¸åŒç½‘æ®µä¹‹é—´çš„é€šä¿¡</td>
</tr>
<tr>
<td>dev &lt;æ¥å£ç½‘å¡&gt;</td>
<td>è¦å‘å¾€æœ¬æ¡ç›®å¯¹åº”ç›®çš„åœ°æ—¶æ‰€éœ€è¦ä½¿ç”¨çš„ç½‘ç»œæ¥å£ï¼ˆè®¾å¤‡ç½‘å¡ï¼‰ï¼›</td>
</tr>
<tr>
<td>proto &lt;åè®®&gt;</td>
<td>æ·»åŠ æœ¬æ¡æ¡ç›®çš„åè®®ã€‚å¸¸è§çš„å€¼æœ‰ï¼š<code>kernel</code>ï¼ˆæœ¬æ¡ç›®ç”±å†…æ ¸æ·»åŠ ï¼‰ã€<code>static</code>ï¼ˆæ‰‹åŠ¨æ·»åŠ ï¼‰ã€<code>dhcp</code>ï¼ˆé€šè¿‡ DHCP æ·»åŠ ï¼‰ã€<code>boot</code> ï¼ˆåœ¨å¯åŠ¨æ—¶æ·»åŠ ï¼‰ã€<code>redirect</code> ï¼ˆç”± ICMP é‡å®šå‘æ·»åŠ ï¼‰ã€‚æ­¤å¤–ï¼Œè¯¥å€¼è¿˜å¯ä»¥æ˜¯ <code>bgp</code>ã€<code>ospf</code> è¿™ç±»åŠ¨æ€è·¯ç”±åè®®ã€‚è¯¥å€¼å¯èƒ½æ˜¯æ•´æ•°å€¼æˆ–è€…ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå­—ç¬¦ä¸²å€¼éƒ½å¯ä»¥åœ¨ <code>/etc/iproute2/rt_protos</code> ä¸­æ‰¾åˆ°ï¼›</td>
</tr>
<tr>
<td>src &lt;æºåœ°å€&gt;</td>
<td>åœ¨ä½¿ç”¨æœ¬æ¡è·¯ç”±ï¼Œå‘ç›®çš„åœ°å‘é€æ•°æ®åŒ…æ—¶æ‰€éœ€é‡‡ç”¨çš„ IP åœ°å€ï¼›</td>
</tr>
<tr>
<td>&lt;é™„åŠ ä¿¡æ¯&gt;</td>
<td>ä»£è¡¨å¤šä¸ªå¯é€‰é¡¹ï¼Œå¸¸è§çš„æœ‰ï¼šè§ä¸‹é¢</td>
</tr>
</tbody></table>
<blockquote>
<p>&lt;é™„åŠ ä¿¡æ¯&gt;ï¼š</p>
<ul>
<li>scope <scope>ï¼šå®šä¹‰è¿™æ¡è·¯ç”±çš„èŒƒå›´:<ul>
<li><code>global</code> è¡¨ç¤ºæœ‰ç½‘å…³çš„å•æ’­ï¼ˆunicastï¼‰è·¯ç”±</li>
<li><code>link</code> è¡¨ç¤ºç›´è¿çš„å•æ’­æˆ–å¹¿æ’­ï¼ˆbroadcastï¼‰è·¯ç”±</li>
<li><code>host</code> è¡¨ç¤ºæœ¬åœ°ï¼ˆlocalï¼‰è·¯ç”±ã€‚è¯¥å€¼å¯èƒ½æ˜¯ä¸€ä¸ªæ•´æ•°å€¼æˆ–è€…æ˜¯å­—ç¬¦ä¸²å€¼ï¼Œå­—ç¬¦ä¸²å€¼åº”è¯¥èƒ½åœ¨ <code>/etc/iproute2/rt_scopes</code> ä¸­æ‰¾åˆ°</li>
</ul>
</scope></li>
<li>metric &lt;æ•´æ•°&gt;ï¼šè¡¨ç¤ºè·¯ç”±çš„ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚<code>æœ€å°å€¼ä¸º 0</code> ï¼Œ<code>æœ€å¤§å€¼ä¸º 65535</code></li>
<li>table &lt;è¡¨å/æ•°å­—&gt;ï¼šå¦‚æœä¸€æ¡è·¯ç”±ä¸å±äº main è¡¨ï¼Œåˆ™ä¼šåœ¨è¿™é‡ŒæŒ‡å‡ºè¯¥è·¯ç”±æ‰€å±çš„è·¯ç”±è¡¨</li>
</ul>
</blockquote>
<hr>
<hr>
<h2 id="è·¯ç”±è¿½è¸ªï¼štraceroute"><a href="#è·¯ç”±è¿½è¸ªï¼štraceroute" class="headerlink" title="è·¯ç”±è¿½è¸ªï¼štraceroute <ipåœ°å€>"></a>è·¯ç”±è¿½è¸ªï¼štraceroute &lt;ipåœ°å€&gt;</h2><blockquote>
<p>è¯¥å‘½ä»¤ç”¨äºæ˜¾ç¤ºæ•°æ®åŒ…åˆ°ä¸»æœºé—´çš„è·¯å¾„ã€‚</p>
</blockquote>
<p><code>ä½¿ç”¨è¯¦è§£ï¼š</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$traceroute</span> xiaoxin123.top</span><br><span class="line"></span><br><span class="line">traceroute to xiaoxin123.top (198.181.38.205), 30 hops max, 60 byte packets</span><br><span class="line"> 1  10.124.224.22 (10.124.224.22)  1.228 ms 11.63.120.22 (11.63.120.22)  0.990 ms 11.63.116.22 (11.63.116.22)  0.871 ms</span><br><span class="line"> 2  11.63.116.121 (11.63.116.121)  1.287 ms 11.63.116.77 (11.63.116.77)  1.233 ms 11.63.116.117 (11.63.116.117)  1.267 ms</span><br><span class="line"> 3  11.48.239.69 (11.48.239.69)  0.929 ms 11.88.168.21 (11.88.168.21)  5.739 ms 11.48.239.117 (11.48.239.117)  0.909 ms</span><br><span class="line"> 4  45.112.220.37 (45.112.220.37)  1.256 ms 45.112.220.25 (45.112.220.25)  1.291 ms 45.112.220.77 (45.112.220.77)  1.971 ms</span><br><span class="line"> 5  157.119.193.86 (157.119.193.86)  10.308 ms 117.49.54.74 (117.49.54.74)  35.224 ms 117.49.54.102 (117.49.54.102)  8.936 ms</span><br><span class="line"> 6  11.94.143.102 (11.94.143.102)  9.224 ms  7.991 ms 117.49.37.246 (117.49.37.246)  7.707 ms</span><br><span class="line"> 7  * * *</span><br><span class="line"> 8  183.2.182.113 (183.2.182.113)  10.336 ms  9.631 ms 58.61.162.161 (58.61.162.161)  7.523 ms</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°å­—ï¼ˆç¬¬å‡ æ¡ï¼‰   ipï¼ˆå½“å‰è·³çš„æ‰€åœ¨åœ°å€ï¼‰   ä¸‰ä¸ªæ—¶é—´ï¼ˆRTTï¼Œä¹Ÿå°±æ˜¯å¾€è¿”æ—¶å»¶ï¼‰</span></span><br><span class="line"><span class="comment"># æ˜¾ç¤º* * * çš„æƒ…å†µ ï¼š</span></span><br><span class="line">  &gt; å¯èƒ½æ˜¯è·¯ç”±å™¨ç¦æ­¢äº†ICMPæ•°æ®åŒ…</span><br><span class="line">  &gt;å¦‚æœä»æŸè·³å¼€å§‹æ‰€æœ‰çš„æ—¶é—´éƒ½æˆäº†æ˜Ÿå·ï¼Œå³è¶…æ—¶ï¼Œåˆ™ç½‘ç»œæ•…éšœå¾ˆæœ‰å¯èƒ½å°±å‡ºç°åœ¨äº†è¿™ä¸€è·³</span><br></pre></td></tr></tbody></table></figure>
<p><code>ç›¸å…³å‘½ä»¤å‚æ•°:</code></p>
<blockquote>
<p>traceroute [-dFlnrvx][-f&lt;å­˜æ´»æ•°å€¼&gt;][-g&lt;ç½‘å…³&gt;â€¦][-i&lt;ç½‘ç»œç•Œé¢&gt;][-m&lt;å­˜æ´»æ•°å€¼&gt;][-p&lt;é€šä¿¡ç«¯å£&gt;][-s&lt;æ¥æºåœ°å€&gt;][-t&lt;æœåŠ¡ç±»å‹&gt;][-w&lt;è¶…æ—¶ç§’æ•°&gt;][ä¸»æœºåç§°æˆ–IPåœ°å€][æ•°æ®åŒ…å¤§å°]<br>-d ä½¿ç”¨Socketå±‚çº§çš„æ’é”™åŠŸèƒ½ã€‚<br>-f&lt;å­˜æ´»æ•°å€¼&gt; è®¾ç½®ç¬¬ä¸€ä¸ªæ£€æµ‹æ•°æ®åŒ…çš„å­˜æ´»æ•°å€¼TTLçš„å¤§å°ã€‚<br>-F è®¾ç½®å‹¿ç¦»æ–­ä½ã€‚<br>-g&lt;ç½‘å…³&gt; è®¾ç½®æ¥æºè·¯ç”±ç½‘å…³ï¼Œæœ€å¤šå¯è®¾ç½®8ä¸ªã€‚<br>-i&lt;ç½‘ç»œç•Œé¢&gt; ä½¿ç”¨æŒ‡å®šçš„ç½‘ç»œç•Œé¢é€å‡ºæ•°æ®åŒ…ã€‚<br>-I ä½¿ç”¨ICMPå›åº”å–ä»£UDPèµ„æ–™ä¿¡æ¯ã€‚<br>-m&lt;å­˜æ´»æ•°å€¼&gt; è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„æœ€å¤§å­˜æ´»æ•°å€¼TTLçš„å¤§å°ã€‚<br>-n ç›´æ¥ä½¿ç”¨IPåœ°å€è€Œéä¸»æœºåç§°ã€‚<br>-p&lt;é€šä¿¡ç«¯å£&gt; è®¾ç½®UDPä¼ è¾“åè®®çš„é€šä¿¡ç«¯å£ã€‚<br>-r å¿½ç•¥æ™®é€šçš„Routing Tableï¼Œç›´æ¥å°†æ•°æ®åŒ…é€åˆ°è¿œç«¯ä¸»æœºä¸Šã€‚<br>-s&lt;æ¥æºåœ°å€&gt; è®¾ç½®æœ¬åœ°ä¸»æœºé€å‡ºæ•°æ®åŒ…çš„IPåœ°å€ã€‚<br>-t&lt;æœåŠ¡ç±»å‹&gt; è®¾ç½®æ£€æµ‹æ•°æ®åŒ…çš„TOSæ•°å€¼ã€‚<br>-v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ã€‚<br>-w&lt;è¶…æ—¶ç§’æ•°&gt; è®¾ç½®ç­‰å¾…è¿œç«¯ä¸»æœºå›æŠ¥çš„æ—¶é—´ã€‚<br>-x å¼€å¯æˆ–å…³é—­æ•°æ®åŒ…çš„æ­£ç¡®æ€§æ£€éªŒã€‚</p>
</blockquote>
<hr>
<h2 id="ç®€åŒ–çš„è·¯ç”±è¿½è¸ªå‘½ä»¤-tracepath"><a href="#ç®€åŒ–çš„è·¯ç”±è¿½è¸ªå‘½ä»¤-tracepath" class="headerlink" title="ç®€åŒ–çš„è·¯ç”±è¿½è¸ªå‘½ä»¤: tracepath "></a>ç®€åŒ–çš„è·¯ç”±è¿½è¸ªå‘½ä»¤: tracepath <ip></ip></h2><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$tracepath</span> xiaoxin123.top</span><br><span class="line"> 1?: [LOCALHOST]                                         pmtu 1500</span><br><span class="line"> 1:  10.124.224.22                                         0.844ms</span><br><span class="line"> 1:  10.124.224.22                                         0.767ms</span><br><span class="line"> 2:  11.63.116.117                                         1.122ms</span><br><span class="line"> 3:  11.48.239.125                                         1.124ms</span><br><span class="line"> 4:  45.112.220.37                                         1.194ms</span><br><span class="line"> 5:  117.49.54.50                                          6.602ms</span><br><span class="line"> 6:  117.49.37.250                                         7.319ms</span><br><span class="line"> 7:  no reply</span><br><span class="line"> 8:  183.2.182.125                                        14.588ms asymm  7</span><br><span class="line">Resume: pmtu 1500 hops 16 back 16</span><br></pre></td></tr></tbody></table></figure>
<p><code>ç›¸å…³å‘½ä»¤å‚æ•°ï¼š</code></p>
<blockquote>
<p>ç”¨æ³•åŠå‚æ•°<br>-n æ˜¾ç¤ºIPï¼Œä¸æ˜¾ç¤ºä¸»æœº<br>-l åˆå§‹åŒ–åŒ…çš„é•¿åº¦ï¼Œé»˜è®¤65535<br>-b æ‰“å°ä¸»æœºåä»¥åŠIPä¿¡æ¯<br>-p æŒ‡å®šç«¯å£<br>-m è®¾ç½®æœ€å¤§çš„è·³è·ƒèŠ‚ç‚¹æ•°ï¼Œé»˜è®¤æ˜¯30</p>
</blockquote>
<h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><p><code>arp</code></p>
<blockquote>
<ol>
<li>ARP ä»£è¡¨â€œåœ°å€è§£æåè®®â€ï¼Œæ˜¯ä¸€ç§ç”¨äºå°† IP åœ°å€æ˜ å°„åˆ°å±€åŸŸç½‘ä¸Šçš„ç‰©ç† MAC åœ°å€çš„åè®®<br>ARPï¼ˆåœ°å€è§£æåè®®ï¼‰æ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºä» <code>IP</code> åœ°å€ä¸­æ‰¾å‡ºè®¾å¤‡çš„<code>ç¡¬ä»¶ (MAC) åœ°å€</code>ã€‚</li>
<li>å½“è®¾å¤‡æƒ³è¦ä¸æœ¬åœ°ç½‘ç»œä¸Šçš„å…¶ä»–è®¾å¤‡é€šä¿¡æ—¶ä½¿ç”¨å®ƒï¼Œå‘é€è®¾å¤‡ä½¿ç”¨ <code>ARP</code> å°† IP åœ°å€è½¬æ¢ä¸º MAC åœ°å€ã€‚</li>
<li>è®¾å¤‡å‘é€ä¸€ä¸ª ARP è¯·æ±‚æ¶ˆæ¯ï¼Œå…¶ä¸­åŒ…å«æ¥æ”¶è®¾å¤‡çš„ IP åœ°å€ã€‚ æœ¬åœ°ç½‘æ®µä¸Šçš„æ‰€æœ‰è®¾å¤‡éƒ½ä¼šçœ‹åˆ°è¯¥æ¶ˆæ¯ï¼Œä½†åªæœ‰å…·æœ‰è¯¥ IP åœ°å€çš„è®¾å¤‡ä¼šä½¿ç”¨åŒ…å«å…¶ MAC åœ°å€çš„ ARP å›å¤æ¶ˆæ¯è¿›è¡Œå“åº”ã€‚ å‘é€è®¾å¤‡ç°åœ¨æœ‰è¶³å¤Ÿçš„ä¿¡æ¯å°†æ•°æ®åŒ…å‘é€åˆ°æ¥æ”¶è®¾å¤‡ã€‚</li>
</ol>
</blockquote>
<p><code>ARPè¿‡ç¨‹çš„è§£é‡Šï¼š</code></p>
<blockquote>
<p>å‡è®¾ä¸»æœº A æƒ³ä¸ä¸»æœº B é€šä¿¡ã€‚ä¸»æœº A çŸ¥é“ä¸»æœº B çš„ IP åœ°å€ï¼Œä½†ä¸çŸ¥é“ä¸»æœº B çš„ MAC åœ°å€ã€‚ä¸ºäº†æ‰¾å‡ºä¸»æœºBçš„MACåœ°å€ï¼Œä¸»æœºAå‘é€ä¸€ä¸ªARPè¯·æ±‚ï¼Œåˆ—å‡ºä¸»æœºBçš„IPåœ°å€ä½œä¸ºç›®çš„IPåœ°å€ï¼ŒMACåœ°å€ä¸ºFF:FF:FF:FF:FF:FFï¼ˆä»¥å¤ªç½‘å¹¿æ’­ï¼‰ .äº¤æ¢æœºä¼šå°†å¸§è½¬å‘åˆ°æ‰€æœ‰æ¥å£ã€‚<br>ç½‘æ®µä¸Šçš„æ¯ä¸ªè®¾å¤‡éƒ½ä¼šæ”¶åˆ°è¯¥æ•°æ®åŒ…ï¼Œä½†ç”±äºç›®æ ‡ IP åœ°å€æ˜¯ä¸»æœº B çš„ IP åœ°å€ï¼Œå› æ­¤åªæœ‰ä¸»æœº B ä¼šå›å¤ ARP å›å¤æ•°æ®åŒ…ï¼Œå¹¶åˆ—å‡ºå…¶ MAC åœ°å€ã€‚</p>
</blockquote>
<p><code>Linuxä¸­çš„arpå‘½ä»¤æ˜¯ä»€ä¹ˆ</code></p>
<blockquote>
<p>ARP ä»£è¡¨â€œåœ°å€è§£æåè®®â€ï¼Œæ˜¯ä¸€ç§ç”¨äºå°† IP åœ°å€æ˜ å°„åˆ°å±€åŸŸç½‘ä¸Šçš„ç‰©ç† MAC åœ°å€çš„åè®®ã€‚</p>
</blockquote>
<h3 id="arpå¸¸ç”¨å‘½ä»¤"><a href="#arpå¸¸ç”¨å‘½ä»¤" class="headerlink" title="arpå¸¸ç”¨å‘½ä»¤"></a>arpå¸¸ç”¨å‘½ä»¤</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 1.æŸ¥çœ‹ Linux ä¸Šçš„ ARP è¡¨</span></span><br><span class="line">arp -a</span><br><span class="line"><span class="comment">#è¾“å‡ºï¼šç¬¬ä¸€åˆ—æ˜¯IPåœ°å€ï¼Œç¬¬äºŒåˆ—å¯¹åº”MACåœ°å€ã€‚</span></span><br><span class="line">gateway (172.16.31.253) at ee:ff:ff:ff:ff:se [ether] on eth0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. æŒ‡å®š IP åœ°å€æ¥æŸ¥æ‰¾ç‰¹å®š IP åœ°å€çš„ ARP ç¼“å­˜æ¡ç›®</span></span><br><span class="line">arp -a &lt;IPåœ°å€&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#3. åˆ é™¤arpè¡¨ä¸­æŒ‡å®šçš„ IP åœ°å€</span></span><br><span class="line">arp -d 192.168.67.23</span><br><span class="line"></span><br><span class="line"><span class="comment">#4. åˆ é™¤æ‰€æœ‰</span></span><br><span class="line">arp -d *</span><br><span class="line"></span><br><span class="line"><span class="comment">#5. æ·»åŠ é™æ€æ¡ç›®å°†IPåœ°å€è§£æä¸ºç‰©ç†åœ°å€</span></span><br><span class="line">arp -s 192.168.67.15 00-a5-00-34-c3-09</span><br></pre></td></tr></tbody></table></figure>]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux, ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>nginxå¸¸ç”¨é…ç½®</title>
    <url>/looking/1e3b64b9.html</url>
    <content><![CDATA[<p class="p center logo large">Nginx</p>
<p class="p center small">nginxå¸¸ç”¨é…ç½®</p>

<mark class="hl-label green">nginxå¸¸ç”¨å‘½ä»¤</mark> 
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">nginx -s reload  <span class="comment"># å‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œçƒ­é‡å¯</span></span><br><span class="line">nginx -s reopen   <span class="comment"># é‡å¯ Nginx</span></span><br><span class="line">nginx -s stop    <span class="comment"># å¿«é€Ÿå…³é—­</span></span><br><span class="line">nginx -s quit    <span class="comment"># ç­‰å¾…å·¥ä½œè¿›ç¨‹å¤„ç†å®Œæˆåå…³é—­</span></span><br><span class="line">nginx -T         <span class="comment"># æŸ¥çœ‹å½“å‰ Nginx æœ€ç»ˆçš„é…ç½®</span></span><br><span class="line">nginx -t         <span class="comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é—®é¢˜</span></span><br></pre></td></tr></tbody></table></figure>

<div class="note green no-icon flat"><p>Nginxæ ¸å¿ƒé…ç½®</p>
</div>
<mark class="hl-label green">nginx.confé…ç½®æ–‡ä»¶ç»“æ„</mark> 
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># mainæ®µé…ç½®ä¿¡æ¯</span></span><br><span class="line">user  nginx;                        <span class="comment"># è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤å³æ˜¯nginxï¼Œå¯ä»¥ä¸è¿›è¡Œè®¾ç½®</span></span><br><span class="line">worker_processes  auto;             <span class="comment"># Nginx è¿›ç¨‹æ•°ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºå’Œ CPU æ ¸æ•°ä¸€æ ·</span></span><br><span class="line">error_log  /var/log/nginx/error.log warn;   <span class="comment"># Nginx çš„é”™è¯¯æ—¥å¿—å­˜æ”¾ç›®å½•</span></span><br><span class="line">pid        /var/run/nginx.pid;      <span class="comment"># Nginx æœåŠ¡å¯åŠ¨æ—¶çš„ pid å­˜æ”¾ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># eventsæ®µé…ç½®ä¿¡æ¯</span></span><br><span class="line">events {</span><br><span class="line">    use epoll;     <span class="comment"># ä½¿ç”¨epollçš„I/Oæ¨¡å‹(å¦‚æœä½ ä¸çŸ¥é“Nginxè¯¥ä½¿ç”¨å“ªç§è½®è¯¢æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„)</span></span><br><span class="line">    worker_connections 1024;   <span class="comment"># æ¯ä¸ªè¿›ç¨‹å…è®¸æœ€å¤§å¹¶å‘æ•°</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># httpæ®µé…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># é…ç½®ä½¿ç”¨æœ€é¢‘ç¹çš„éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜ã€æ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½åœ¨è¿™é‡Œè®¾ç½®</span></span><br><span class="line">http { </span><br><span class="line">    <span class="comment"># è®¾ç½®æ—¥å¿—æ¨¡å¼</span></span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;   <span class="comment"># Nginxè®¿é—®æ—¥å¿—å­˜æ”¾ä½ç½®</span></span><br><span class="line"></span><br><span class="line">    sendfile            on;   <span class="comment"># å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼</span></span><br><span class="line">    tcp_nopush          on;   <span class="comment"># å‡å°‘ç½‘ç»œæŠ¥æ–‡æ®µçš„æ•°é‡</span></span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;   <span class="comment"># ä¿æŒè¿æ¥çš„æ—¶é—´ï¼Œä¹Ÿå«è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’</span></span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;      <span class="comment"># æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨</span></span><br><span class="line">    default_type        application/octet-stream;   <span class="comment"># é»˜è®¤æ–‡ä»¶ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;   <span class="comment"># åŠ è½½å­é…ç½®é¡¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è´Ÿè½½å‡è¡¡é…ç½®ä¿¡æ¯</span></span><br><span class="line">    upstream httpnz {</span><br><span class="line">        server 192.168.66.1 weight=1 down;  <span class="comment">#weightæƒé‡ï¼Œé»˜è®¤ä¸º1ï¼Œdownè¡¨ç¤ºä¸å¯ç”¨</span></span><br><span class="line">        server 192.168.66.2 weight=5 backup;    <span class="comment">#backupè¡¨ç¤ºå¤‡ç”¨</span></span><br><span class="line">        server 192.168.66.3 weight=10;  <span class="comment"># weightæƒé‡ï¼Œé»˜è®¤ä¸º1</span></span><br><span class="line">        }</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># serveræ®µé…ç½®ä¿¡æ¯</span></span><br><span class="line">    server {</span><br><span class="line">      listen       80;       <span class="comment"># é…ç½®ç›‘å¬çš„ç«¯å£</span></span><br><span class="line">      server_name  localhost;    <span class="comment"># é…ç½®çš„åŸŸå</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># locationæ®µé…ç½®ä¿¡æ¯</span></span><br><span class="line">      location / {</span><br><span class="line">        root   /usr/share/nginx/html;  <span class="comment"># ç½‘ç«™æ ¹ç›®å½•</span></span><br><span class="line">        index  index.html index.htm;   <span class="comment"># é»˜è®¤é¦–é¡µæ–‡ä»¶</span></span><br><span class="line">        deny 172.168.22.11;   <span class="comment"># ç¦æ­¢è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall</span></span><br><span class="line">        allow 172.168.33.44ï¼›<span class="comment"># å…è®¸è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      location /api {</span><br><span class="line">        proxy_pass http://httpnz;</span><br><span class="line">      }</span><br><span class="line">      </span><br><span class="line">      error_page 500 502 503 504 /50x.html;  <span class="comment"># é»˜è®¤50xå¯¹åº”çš„è®¿é—®é¡µé¢</span></span><br><span class="line">      error_page 400 404 error.html;   <span class="comment"># åŒä¸Š</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>é…ç½®æ–‡ä»¶è§£æ:<br>main å…¨å±€é…ç½®ï¼Œå¯¹å…¨å±€ç”Ÿæ•ˆï¼›<br>events é…ç½®å½±å“ Nginx æœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼›<br>http é…ç½®ä»£ç†ï¼Œç¼“å­˜ï¼Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ï¼›<br>server é…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°ï¼Œä¸€ä¸ª http å—ä¸­å¯ä»¥æœ‰å¤šä¸ª server å—ï¼›<br>location ç”¨äºé…ç½®åŒ¹é…çš„ uri ï¼›<br>upstream é…ç½®åç«¯æœåŠ¡å™¨å…·ä½“åœ°å€ï¼Œè´Ÿè½½å‡è¡¡é…ç½®ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ï¼›</p>
</blockquote>
<mark class="hl-label default">ç”¨ä¸€å¼ å›¾æ¸…æ™°çš„å±•ç¤ºå®ƒçš„å±‚çº§ç»“æ„ï¼š</mark> 
<details class="folding-tag"><summary> nginxå±‚çº§ç»“æ„å›¾ </summary>
              <div class="content">
              <p><img src="https://pic.imgdb.cn/item/66876026d9c307b7e92c6ae2.png" alt="nginxå±‚çº§æ¶æ„"></p>
              </div>
            </details>

<mark class="hl-label red">nginx.confé…ç½®æ–‡ä»¶çš„è¯­æ³•è§„åˆ™</mark> 
<blockquote>
<p>é…ç½®æ–‡ä»¶ç”±æŒ‡ä»¤ä¸æŒ‡ä»¤å—æ„æˆ<br>æ¯æ¡æŒ‡ä»¤ä»¥ â€œ;â€ åˆ†å·ç»“å°¾ï¼ŒæŒ‡ä»¤ä¸å‚æ•°é—´ä»¥ç©ºæ ¼ç¬¦å·åˆ†éš”<br>æŒ‡ä»¤å—ä»¥ {} å¤§æ‹¬å·å°†å¤šæ¡æŒ‡ä»¤ç»„ç»‡åœ¨ä¸€èµ·<br>include è¯­å¥å…è®¸ç»„åˆå¤šä¸ªé…ç½®æ–‡ä»¶ä»¥æå‡å¯ç»´æŠ¤æ€§<br>é€šè¿‡ # ç¬¦å·æ·»åŠ æ³¨é‡Šï¼Œæé«˜å¯è¯»æ€§<br>é€šè¿‡ $ ç¬¦å·ä½¿ç”¨å˜é‡<br>éƒ¨åˆ†æŒ‡ä»¤çš„å‚æ•°æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¾‹å¦‚å¸¸ç”¨çš„ locationæŒ‡ä»¤</p>
</blockquote>
<mark class="hl-label default">é…ç½®æ–‡ä»¶mainæ®µæ ¸å¿ƒå‚æ•°</mark> 
<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>user</p>
            </div>
<blockquote>
<p>æŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šuser USERNAME [GROUP]</span></span><br><span class="line"><span class="attribute">user</span> nginx lion; <span class="comment"># ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion</span></span><br></pre></td></tr></tbody></table></figure>
<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>pid</p>
            </div>
<blockquote>
<p>æŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">pid</span> /opt/nginx/logs/nginx.pid <span class="comment"># masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>worker_rlimit_nofile_number</p>
            </div>
<blockquote>
<p>æŒ‡å®šworkerå­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">20480</span>; <span class="comment"># å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>worker_rlimit_core</p>
            </div>
<blockquote>
<p>æŒ‡å®šworkerå­è¿›ç¨‹å¯ä»¥äº§ç”Ÿæœ€å¤§coreæ–‡ä»¶å¤§å°ã€‚ç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">worker_rlimit_core</span> <span class="number">50M</span>; <span class="comment"># å­˜æ”¾å¤§å°é™åˆ¶</span></span><br><span class="line"><span class="attribute">working_directory</span> /opt/nginx/tmp; <span class="comment"># å­˜æ”¾ç›®å½•</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>worker_processes_number</p>
            </div>
<blockquote>
<p>æŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span> <span class="number">4</span>; <span class="comment"># æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡</span></span><br><span class="line"><span class="attribute">worker_processes</span> auto; <span class="comment"># ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>worker_cpu_affinity</p>
            </div>
<blockquote>
<p>å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚<br>å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">worker_cpu_affinity</span> <span class="number">0001</span> <span class="number">0010</span> <span class="number">0100</span> <span class="number">1000</span>; <span class="comment"># 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>worker_priority</p>
            </div>
<blockquote>
<p>æŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚<br>Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼›nice å€¼èŒƒå›´ä¸º -20 åˆ° +19 ã€‚</p>
<blockquote>
<p><strong>å¤‡æ³¨ï¼š</strong>åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</p>
</blockquote>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">worker_priority</span> -<span class="number">10</span>; <span class="comment"># 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>worker_shutdown_timeout</p>
            </div>
<blockquote>
<p>æŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">worker_shutdown_timeout</span> <span class="number">5s</span>;</span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>timer_resolution</p>
            </div>
<blockquote>
<p>worker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™<br>åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">timer_resolution</span> 100ms;</span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox green checked"><input type="checkbox" checked="checked">
            <p>daemon</p>
            </div>
<blockquote>
<p>æŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">daemon</span> <span class="literal">off</span>; <span class="comment"># é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼</span></span><br></pre></td></tr></tbody></table></figure>

<mark class="hl-label green">é…ç½®æ–‡ä»¶eventsæ®µæ ¸å¿ƒå‚æ•°</mark> 
<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>use</p>
            </div>
<blockquote>
<p>Nginx ä½¿ç”¨ä½•ç§äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚<br>method å¯é€‰å€¼ä¸ºï¼šselectã€pollã€kqueueã€epollã€/dev/pollã€eventport</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">use</span> method; <span class="comment"># ä¸æ¨èé…ç½®å®ƒï¼Œè®©nginxè‡ªå·±é€‰æ‹©</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>worker_connections</p>
            </div>
<blockquote>
<p>worker å­è¿›ç¨‹èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">worker_connections</span> <span class="number">1024</span> <span class="comment"># æ¯ä¸ªå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ä¸º1024</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>accept_mutex</p>
            </div>
<blockquote>
<p>æ˜¯å¦æ‰“å¼€è´Ÿè½½å‡è¡¡äº’æ–¥é”</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">accept_mutex</span> <span class="literal">on</span> <span class="comment"># é»˜è®¤æ˜¯offå…³é—­çš„ï¼Œè¿™é‡Œæ¨èæ‰“å¼€</span></span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>server_nameæŒ‡ä»¤</p>
            </div>
<blockquote>
<p>æŒ‡å®šè™šæ‹Ÿä¸»æœºåŸŸå<br>åŸŸååŒ¹é…çš„å››ç§å†™æ³•ï¼š</p>
<blockquote>
<p>ç²¾ç¡®åŒ¹é…ï¼šserver_name <a href="http://www.nginx.com/">http://www.nginx.com</a> ;<br>å·¦ä¾§é€šé…ï¼šserver_name <em>.<a href="http://nginx.com/">http://nginx.com</a> ;<br>å³ä¾§ç»Ÿé…ï¼šserver_name <a href="http://www.nginx/">www.nginx</a>.</em> ;<br>æ­£åˆ™åŒ¹é…ï¼šserver_name ~^www.nginx.*$ ;<br>åŒ¹é…ä¼˜å…ˆçº§ï¼šç²¾ç¡®åŒ¹é… &gt; å·¦ä¾§é€šé…ç¬¦åŒ¹é… &gt; å³ä¾§é€šé…ç¬¦åŒ¹é… &gt; æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p>
</blockquote>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šserver_name name1 name2 name3</span></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="attribute">server_name</span> www.nginx.com;</span><br></pre></td></tr></tbody></table></figure>
<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>server_nameé…ç½®å®ä¾‹ï¼š</p>
            </div>
<div class="checkbox plus green checked"><input type="checkbox" checked="checked">
            <p>/etc/nginx/nginx.conf</p>
            </div>
<div class="tabs" id="server_nameé…ç½®å®ä¾‹"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="server_nameé…ç½®å®ä¾‹-1">åŸŸåå·¦åŒ¹é…</button><button type="button" class="tab " data-href="server_nameé…ç½®å®ä¾‹-2">åŸŸåå³åŒ¹é…</button><button type="button" class="tab " data-href="server_nameé…ç½®å®ä¾‹-3">æ­£åˆ™åŒ¹é…</button><button type="button" class="tab " data-href="server_nameé…ç½®å®ä¾‹-4">åŸŸåç²¾ç¡®åŒ¹é…</button><button type="button" class="tab " data-href="server_nameé…ç½®å®ä¾‹-5">è®¿é—®åˆ†æ</button></ul><div class="tab-contents"><div class="tab-item-content active" id="server_nameé…ç½®å®ä¾‹-1"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">  <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span>  <span class="regexp">*.nginx-test.com</span>;</span><br><span class="line">  <span class="attribute">root</span>  /usr/share/nginx/html/nginx-test/left-match/;</span><br><span class="line">  <span class="section">location</span> / {</span><br><span class="line">    <span class="attribute">index</span> index.html;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="server_nameé…ç½®å®ä¾‹-2"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">  <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span>  <span class="regexp">www.nginx-test.*</span>;</span><br><span class="line">  <span class="attribute">root</span>  /usr/share/nginx/html/nginx-test/right-match/;</span><br><span class="line">  <span class="section">location</span> / {</span><br><span class="line">    <span class="attribute">index</span> index.html;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="server_nameé…ç½®å®ä¾‹-3"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">  <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span>  ~^.*\.nginx-test\..*$;</span><br><span class="line">  <span class="attribute">root</span>  /usr/share/nginx/html/nginx-test/reg-match/;</span><br><span class="line">  <span class="section">location</span> / {</span><br><span class="line">    <span class="attribute">index</span> index.html;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="server_nameé…ç½®å®ä¾‹-4"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">  <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span>  www.nginx-test.com;</span><br><span class="line">  <span class="attribute">root</span>  /usr/share/nginx/html/nginx-test/all-match/;</span><br><span class="line">  <span class="section">location</span> / {</span><br><span class="line">    <span class="attribute">index</span> index.html;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="server_nameé…ç½®å®ä¾‹-5"><blockquote>
<p>å½“è®¿é—® <a href="http://www.nginx-test.com/">http://www.nginx-test.com</a> æ—¶ï¼Œéƒ½å¯ä»¥è¢«åŒ¹é…ä¸Šï¼Œå› æ­¤é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„â€œå®Œå…¨åŒ¹é…â€ï¼›<br>å½“è®¿é—® <a href="http://mail.nginx-test.com/">http://mail.nginx-test.com</a> æ—¶ï¼Œä¼šè¿›è¡Œâ€œå·¦åŒ¹é…â€ï¼›<br>å½“è®¿é—® <a href="http://www.nginx-test.org/">http://www.nginx-test.org</a> æ—¶ï¼Œä¼šè¿›è¡Œâ€œå³åŒ¹é…â€ï¼›<br>å½“è®¿é—® <a href="http://doc.nginx-test.com/">http://doc.nginx-test.com</a> æ—¶ï¼Œä¼šè¿›è¡Œâ€œå·¦åŒ¹é…â€ï¼›<br>å½“è®¿é—® <a href="http://www.nginx-test.cn/">http://www.nginx-test.cn</a> æ—¶ï¼Œä¼šè¿›è¡Œâ€œå³åŒ¹é…â€ï¼›<br>å½“è®¿é—® fe.nginx-test.club æ—¶ï¼Œä¼šè¿›è¡Œâ€œæ­£åˆ™åŒ¹é…â€ï¼›</p>
</blockquote></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>


<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®</p>
            </div>
<div class="tabs" id="æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®-1">root</button><button type="button" class="tab " data-href="æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®-2">alias</button></ul><div class="tab-contents"><div class="tab-item-content active" id="æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®-1"><blockquote>
<p>æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®ï¼Œå®ƒå¯ä»¥å†™åœ¨ http ã€ server ã€ location ç­‰é…ç½®ä¸­ã€‚<br>#å½“ç”¨æˆ·è®¿é—® <a href="http://www.test.com/image/1.png">www.test.com/image/1.png</a> æ—¶ï¼Œå®é™…åœ¨æœåŠ¡å™¨æ‰¾çš„è·¯å¾„æ˜¯ /opt/nginx/static/image/1.png</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#root path</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾‹å¦‚ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="section">location</span> /image {</span><br><span class="line">  <span class="attribute">root</span> /opt/nginx/static;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®-2"><blockquote>
<p>å®ƒä¹Ÿæ˜¯æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®ï¼Œå®ƒåªèƒ½å†™åœ¨ location ä¸­ã€‚<br>#å½“ç”¨æˆ·è®¿é—® <a href="http://www.test.com/image/1.png">www.test.com/image/1.png</a> æ—¶ï¼Œå®é™…åœ¨æœåŠ¡å™¨æ‰¾çš„è·¯å¾„æ˜¯ /opt/nginx/static/image/1.png</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section">location</span> /image {</span><br><span class="line">  <span class="attribute">alias</span> /opt/nginx/static/image/;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>
<div class="note warning simple"><p>æ³¨æ„ï¼šroot ä¼šå°†å®šä¹‰è·¯å¾„ä¸ URI å åŠ ï¼Œ alias åˆ™åªå–å®šä¹‰è·¯å¾„ã€‚</p>
</div>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>locationå—</p>
            </div>
<div class="tabs" id="locationå—"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="locationå—-1">é…ç½®è·¯å¾„</button><button type="button" class="tab " data-href="locationå—-2">åŒ¹é…è§„åˆ™</button><button type="button" class="tab " data-href="locationå—-3">å®ä¾‹</button><button type="button" class="tab " data-href="locationå—-4">locationä¸­çš„åæ–œçº¿</button></ul><div class="tab-contents"><div class="tab-item-content active" id="locationå—-1"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section">location</span> [ = | <span class="regexp">~ |</span> <span class="regexp">~* |</span><span class="regexp"> ^~</span> ] uri {</span><br><span class="line">  ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="locationå—-2"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line">= ç²¾ç¡®åŒ¹é…ï¼›</span><br><span class="line">~ æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™ï¼›</span><br><span class="line">~* æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼›</span><br><span class="line">^~ åŒ¹é…åˆ°å³åœæ­¢æœç´¢ï¼›</span><br><span class="line">åŒ¹é…ä¼˜å…ˆçº§ï¼š=  &gt; ^~  &gt; ~  &gt; ~*  &gt; ä¸å¸¦ä»»ä½•å­—ç¬¦ã€‚</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="locationå—-3"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">  <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span>  www.nginx-test.com;</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># åªæœ‰å½“è®¿é—® www.nginx-test.com/match_all/ æ—¶æ‰ä¼šåŒ¹é…åˆ°/usr/share/nginx/html/match_all/index.html</span></span><br><span class="line">  <span class="section">location</span> = /match_all/ {</span><br><span class="line">      <span class="attribute">root</span>  /usr/share/nginx/html</span><br><span class="line">      index index.html</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># å½“è®¿é—® www.nginx-test.com/1.jpg ç­‰è·¯å¾„æ—¶ä¼šå» /usr/share/nginx/images/1.jpg æ‰¾å¯¹åº”çš„èµ„æº</span></span><br><span class="line">  location <span class="regexp">~ \.(jpeg|jpg|png|svg)$</span> {</span><br><span class="line">    <span class="attribute">root</span> /usr/share/nginx/images;</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># å½“è®¿é—® www.nginx-test.com/bbs/ æ—¶ä¼šåŒ¹é…ä¸Š /usr/share/nginx/html/bbs/index.html</span></span><br><span class="line">  <span class="section">location</span><span class="regexp"> ^~</span> /bbs/ {</span><br><span class="line">    <span class="attribute">root</span> /usr/share/nginx/html;</span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="locationå—-4"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">location</span> /test {</span><br><span class="line">  ...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> /test/ {</span><br><span class="line">  ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>ä¸å¸¦ / å½“è®¿é—® <a href="http://www.nginx-test.com/test">http://www.nginx-test.com/test</a> æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼›å¦‚æœæ²¡æœ‰ test ç›®å½•ï¼Œ nginx  åˆ™ä¼šæ‰¾æ˜¯å¦æœ‰ test æ–‡ä»¶ã€‚</p>
</blockquote>
<blockquote>
<p>å¸¦ / å½“è®¿é—® <a href="http://www.nginx-test.com/test">http://www.nginx-test.com/test</a> æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼Œå¦‚æœæ²¡æœ‰å®ƒä¹Ÿä¸ä¼šå»æ‰¾æ˜¯å¦å­˜åœ¨ test æ–‡ä»¶ã€‚</p>
</blockquote></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>return</p>
            </div>
<blockquote>
<p>åœæ­¢å¤„ç†è¯·æ±‚ï¼Œç›´æ¥è¿”å›å“åº”ç æˆ–é‡å®šå‘åˆ°å…¶ä»– URL ï¼›æ‰§è¡Œ return æŒ‡ä»¤åï¼Œ location ä¸­åç»­æŒ‡ä»¤å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#return code [text];</span></span><br><span class="line"><span class="comment">#return code URL;</span></span><br><span class="line"><span class="comment">#return URL;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾‹å¦‚ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / {</span><br><span class="line">  <span class="attribute">return</span> <span class="number">404</span>; <span class="comment"># ç›´æ¥è¿”å›çŠ¶æ€ç </span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / {</span><br><span class="line">  <span class="attribute">return</span> <span class="number">404</span> <span class="string">"pages not found"</span>; <span class="comment"># è¿”å›çŠ¶æ€ç  + ä¸€æ®µæ–‡æœ¬</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / {</span><br><span class="line">  <span class="attribute">return</span> <span class="number">302</span> /bbs ; <span class="comment"># è¿”å›çŠ¶æ€ç  + é‡å®šå‘åœ°å€</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / {</span><br><span class="line">  <span class="attribute">return</span> https://www.baidu.com ; <span class="comment"># è¿”å›é‡å®šå‘åœ°å€</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>rewrite</p>
            </div>
<blockquote>
<p>æ ¹æ®æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è§„åˆ™ï¼Œé‡å†™ URL ã€‚</p>
</blockquote>
<div class="tabs" id="rewrite"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="rewrite-1">è¯­æ³•</button><button type="button" class="tab " data-href="rewrite-2">ä¸Šä¸‹æ–‡æ ‡ç­¾</button><button type="button" class="tab " data-href="rewrite-3">å®ä¾‹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="rewrite-1"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼š</span></span><br><span class="line"><span class="attribute">rewrite</span> æ­£åˆ™è¡¨è¾¾å¼ è¦æ›¿æ¢çš„å†…å®¹ [flag];</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>flag å¯é€‰å€¼çš„å«ä¹‰ï¼š<br>last é‡å†™åçš„ URL å‘èµ·æ–°è¯·æ±‚ï¼Œå†æ¬¡è¿›å…¥ server æ®µï¼Œé‡è¯• location çš„ä¸­çš„åŒ¹é…ï¼›<br>break ç›´æ¥ä½¿ç”¨é‡å†™åçš„ URL ï¼Œä¸å†åŒ¹é…å…¶å®ƒ location ä¸­è¯­å¥ï¼›<br>redirect è¿”å›302ä¸´æ—¶é‡å®šå‘ï¼›<br>permanent è¿”å›301æ°¸ä¹…é‡å®šå‘ï¼›</p>
</blockquote></div><div class="tab-item-content" id="rewrite-2"><p>#ä¸Šä¸‹æ–‡(æ ‡ç­¾)ï¼š</p>
<blockquote>
<p>å¯ä»¥å†™åœ¨:<br>server{}å—<br>location{}å—<br>if{}å—</p>
</blockquote></div><div class="tab-item-content" id="rewrite-3"><blockquote>
<p>å¦‚ï¼š</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">rewirte</span> /images/(.*\.jpg)$ /pic/<span class="variable">$1</span>; <span class="comment"># $1æ˜¯å‰é¢æ‹¬å·(.*\.jpg)çš„åå‘å¼•ç”¨</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ï¼š</p>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line">server{</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span> fe.lion.club; <span class="comment"># è¦åœ¨æœ¬åœ°hostsæ–‡ä»¶è¿›è¡Œé…ç½®</span></span><br><span class="line">  <span class="attribute">root</span> html;</span><br><span class="line">  <span class="section">location</span> /search {</span><br><span class="line">    <span class="attribute">rewrite</span><span class="regexp"> ^/(.*)</span> https://www.baidu.com <span class="literal">redirect</span>;</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> /images {</span><br><span class="line">    <span class="attribute">rewrite</span> /images/(.*) /pics/<span class="variable">$1</span>;</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> /pics {</span><br><span class="line">    <span class="attribute">rewrite</span> /pics/(.*) /photos/<span class="variable">$1</span>;</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> /photos {</span><br><span class="line">  </span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>å½“è®¿é—® fe.lion.club/search æ—¶ï¼Œä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é‡å®šå‘åˆ° <a href="https://www.baidu.com./">https://www.baidu.comã€‚</a></li>
<li>å½“è®¿é—® fe.lion.club/images/1.jpg æ—¶ï¼Œç¬¬ä¸€æ­¥é‡å†™ URL ä¸º fe.lion.club/pics/1.jpg ï¼Œæ‰¾åˆ° pics çš„ location ï¼Œç»§ç»­é‡å†™ URL ä¸º fe.lion.club/photos/1.jpg ï¼Œæ‰¾åˆ° /photos çš„ location åï¼Œå» html/photos ç›®å½•ä¸‹å¯»æ‰¾ 1.jpg é™æ€èµ„æºã€‚</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>ifæŒ‡ä»¤</p>
            </div>
<div class="tabs" id="ifæŒ‡ä»¤"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="ifæŒ‡ä»¤-1">è¯­æ³•</button><button type="button" class="tab " data-href="ifæŒ‡ä»¤-2">ä¸Šä¸‹æ–‡</button><button type="button" class="tab " data-href="ifæŒ‡ä»¤-3">å®ä¾‹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="ifæŒ‡ä»¤-1"><figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attribute">if</span> (condition) {...}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>condition åˆ¤æ–­æ¡ä»¶ï¼š</p>
<ul>
<li>$variable ä»…ä¸ºå˜é‡æ—¶ï¼Œå€¼ä¸ºç©ºæˆ–ä»¥0å¼€å¤´å­—ç¬¦ä¸²éƒ½ä¼šè¢«å½“åš false å¤„ç†ï¼›</li>
<li>= æˆ– != ç›¸ç­‰æˆ–ä¸ç­‰ï¼›</li>
<li>~ æ­£åˆ™åŒ¹é…ï¼›</li>
<li>! ~ éæ­£åˆ™åŒ¹é…ï¼›</li>
<li>~* æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼›</li>
<li>-f æˆ– ! -f æ£€æµ‹æ–‡ä»¶å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼›</li>
<li>-d æˆ– ! -d æ£€æµ‹ç›®å½•å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼›</li>
<li>-e æˆ– ! -e æ£€æµ‹æ–‡ä»¶ã€ç›®å½•ã€ç¬¦å·é“¾æ¥ç­‰å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼›</li>
<li>-x æˆ– ! -x æ£€æµ‹æ–‡ä»¶å¯ä»¥æ‰§è¡Œæˆ–ä¸å¯æ‰§è¡Œï¼›</li>
</ul>
</blockquote></div><div class="tab-item-content" id="ifæŒ‡ä»¤-2"><ul>
<li>server{}<br>æˆ–</li>
<li>location{}</li>
</ul></div><div class="tab-item-content" id="ifæŒ‡ä»¤-3"><ol>
<li>æ£€æµ‹å®¢æˆ·ç«¯æµè§ˆå™¨ç±»å‹<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line">if($<span class="attribute">http_user_agent</span> <span class="regexp">~ Chrome)</span>{</span><br><span class="line">  <span class="attribute">rewrite</span> /(.*)/browser/<span class="variable">$1</span> <span class="literal">break</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>å¦‚æœè®¿é—® /images/ åˆ™é‡å†™ URL ä¸º /pics/<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">server</span> {</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">8080</span>;</span><br><span class="line">  <span class="attribute">server_name</span> localhost;</span><br><span class="line">  <span class="attribute">root</span> html;</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> / {</span><br><span class="line">    <span class="attribute">if</span> ( <span class="variable">$uri</span> = <span class="string">"/images/"</span> ){</span><br><span class="line">      <span class="attribute">rewrite</span> (.*) /pics/ <span class="literal">break</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<ul>
<li>å½“è®¿é—® localhost:8080/images/ æ—¶ï¼Œä¼šè¿›å…¥ if åˆ¤æ–­é‡Œé¢æ‰§è¡Œ rewrite å‘½ä»¤ã€‚</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<div class="checkbox red checked"><input type="checkbox" checked="checked">
            <p>autoindex</p>
            </div>
<blockquote>
<p>ç”¨æˆ·è¯·æ±‚ä»¥ / ç»“å°¾æ—¶ï¼Œåˆ—å‡ºç›®å½•ç»“æ„ï¼Œå¯ä»¥ç”¨äºå¿«é€Ÿæ­å»ºé™æ€èµ„æºä¸‹è½½ç½‘ç«™ã€‚<br>autoindex.conf é…ç½®ä¿¡æ¯ï¼š</p>
</blockquote>
<figure class="highlight nginx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section">server</span> {</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span> fe.lion-test.club;</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> /download/ {</span><br><span class="line">    <span class="attribute">root</span> /opt/source;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">autoindex</span> <span class="literal">on</span>; <span class="comment"># æ‰“å¼€ autoindexï¼Œï¼Œå¯é€‰å‚æ•°æœ‰ on | off</span></span><br><span class="line">    <span class="attribute">autoindex_exact_size</span> <span class="literal">on</span>; <span class="comment"># ä¿®æ”¹ä¸ºoffï¼Œä»¥KBã€MBã€GBæ˜¾ç¤ºæ–‡ä»¶å¤§å°ï¼Œé»˜è®¤ä¸ºonï¼Œä»¥bytesæ˜¾ç¤ºå‡ºâ½‚ä»¶çš„ç¡®åˆ‡â¼¤â¼©</span></span><br><span class="line">    <span class="attribute">autoindex_format</span> html; <span class="comment"># ä»¥htmlçš„æ–¹å¼è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¯é€‰å‚æ•°æœ‰ html | json | xml</span></span><br><span class="line">    <span class="attribute">autoindex_localtime</span> <span class="literal">off</span>; <span class="comment"># æ˜¾ç¤ºçš„â½‚ä»¶æ—¶é—´ä¸ºâ½‚ä»¶çš„æœåŠ¡å™¨æ—¶é—´ã€‚é»˜è®¤ä¸ºoffï¼Œæ˜¾ç¤ºçš„â½‚ä»¶æ—¶é—´ä¸ºGMTæ—¶é—´</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>å½“è®¿é—® <a href="http://fe.xxx.com/download/">http://fe.xxx.com/download/</a> æ—¶ï¼Œä¼šæŠŠæœåŠ¡å™¨ /opt/source/download/ è·¯å¾„ä¸‹çš„æ–‡ä»¶å±•ç¤ºå‡ºæ¥ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>markdownè¯­æ³•</title>
    <url>/looking/f134a8e5.html</url>
    <content><![CDATA[<h1 id="markdown-è¯­æ³•"><a href="#markdown-è¯­æ³•" class="headerlink" title="markdown è¯­æ³•"></a>markdown è¯­æ³•</h1><p>å®˜ç½‘ï¼š<a href="https://markdown.com.cn/basic-syntax/">https://markdown.com.cn/basic-syntax/</a><br>åœ¨çº¿ä½“éªŒï¼š<a href="https://markdown.com.cn/editor/">https://markdown.com.cn/editor/</a></p>
<h2 id="1-æ ‡é¢˜è¯­æ³•"><a href="#1-æ ‡é¢˜è¯­æ³•" class="headerlink" title="1.æ ‡é¢˜è¯­æ³•"></a>1.æ ‡é¢˜è¯­æ³•</h2><p>è¦åˆ›å»ºæ ‡é¢˜ï¼Œè¯·åœ¨å•è¯æˆ–çŸ­è¯­å‰é¢æ·»åŠ äº•å· (#) ã€‚<br>â€œ#â€çš„æ•°é‡ä»£è¡¨äº†æ ‡é¢˜çš„çº§åˆ«ã€‚<br>ä¾‹å¦‚ï¼Œæ·»åŠ ä¸‰ä¸ª # è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªä¸‰çº§æ ‡é¢˜ <code>&lt;h3&gt; </code></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">(ä¾‹å¦‚ï¼š### My Header)ã€‚</span><br><span class="line"># è¿™æ˜¯ä¸€çº§æ ‡é¢˜</span><br><span class="line">## è¿™æ˜¯äºŒçº§æ ‡é¢˜</span><br><span class="line">### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### è¿™æ˜¯å››çº§æ ‡é¢˜</span><br><span class="line">##### è¿™æ˜¯äº”çº§æ ‡é¢˜</span><br><span class="line">###### è¿™æ˜¯å…­çº§æ ‡é¢˜</span><br></pre></td></tr></tbody></table></figure>
<h3 id="å¯é€‰è¯­æ³•"><a href="#å¯é€‰è¯­æ³•" class="headerlink" title="å¯é€‰è¯­æ³•"></a>å¯é€‰è¯­æ³•</h3><p>è¿˜å¯ä»¥åœ¨æ–‡æœ¬ä¸‹æ–¹æ·»åŠ ä»»æ„æ•°é‡çš„ == å·æ¥æ ‡è¯†ä¸€çº§æ ‡é¢˜ï¼Œæˆ–è€… â€“ å·æ¥æ ‡è¯†äºŒçº§æ ‡é¢˜ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ä¸€çº§æ ‡é¢˜</span><br><span class="line">===============</span><br><span class="line"></span><br><span class="line">æˆ–</span><br><span class="line"></span><br><span class="line">äºŒçº§æ ‡é¢˜</span><br><span class="line">---------------</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸åŒçš„ Markdown åº”ç”¨ç¨‹åºå¤„ç† # å’Œæ ‡é¢˜ä¹‹é—´çš„ç©ºæ ¼æ–¹å¼å¹¶ä¸ä¸€è‡´ã€‚ä¸ºäº†å…¼å®¹è€ƒè™‘ï¼Œè¯·ç”¨ä¸€ä¸ªç©ºæ ¼åœ¨ # å’Œæ ‡é¢˜ä¹‹é—´è¿›è¡Œåˆ†éš”ã€‚</p>
<h2 id="2-æ®µè½è¯­æ³•"><a href="#2-æ®µè½è¯­æ³•" class="headerlink" title="2.æ®µè½è¯­æ³•"></a>2.æ®µè½è¯­æ³•</h2><p>è¦åˆ›å»ºæ®µè½ï¼Œè¯·ä½¿ç”¨ç©ºç™½è¡Œå°†ä¸€è¡Œæˆ–å¤šè¡Œæ–‡æœ¬è¿›è¡Œåˆ†éš”</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">I really like using Markdown.</span><br><span class="line"></span><br><span class="line">I think I'll use it to format all of my documents from now on.</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ï¼š<br>I really like using Markdown.</p>
<p>I think Iâ€™ll use it to format all of my documents from now on.</p>
<h2 id="3-æ¢è¡Œè¯­æ³•"><a href="#3-æ¢è¡Œè¯­æ³•" class="headerlink" title="3.æ¢è¡Œè¯­æ³•"></a>3.æ¢è¡Œè¯­æ³•</h2><p>åœ¨ä¸€è¡Œçš„æœ«å°¾æ·»åŠ ä¸¤ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ï¼Œç„¶åæŒ‰å›è½¦é”®,å³å¯åˆ›å»ºä¸€ä¸ªæ¢è¡Œ<code>&lt;br&gt;</code>ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">This is the first line.  </span><br><span class="line">And this is the second line.</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ï¼š<br>This is the first line.<br>And this is the second line.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">å‡ ä¹æ¯ä¸ª Markdown åº”ç”¨ç¨‹åºéƒ½æ”¯æŒä¸¤ä¸ªæˆ–å¤šä¸ªç©ºæ ¼è¿›è¡Œæ¢è¡Œï¼Œç§°ä¸º ç»“å°¾ç©ºæ ¼ï¼ˆtrailing whitespace) çš„æ–¹å¼ï¼Œ</span><br><span class="line">ä½†è¿™æ˜¯æœ‰äº‰è®®çš„ï¼Œå› ä¸ºå¾ˆéš¾åœ¨ç¼–è¾‘å™¨ä¸­ç›´æ¥çœ‹åˆ°ç©ºæ ¼ï¼Œå¹¶ä¸”å¾ˆå¤šäººåœ¨æ¯ä¸ªå¥å­åé¢éƒ½ä¼šæœ‰æ„æˆ–æ— æ„åœ°æ·»åŠ ä¸¤ä¸ªç©ºæ ¼ã€‚</span><br><span class="line">ç”±äºè¿™ä¸ªåŸå› ï¼Œä½ å¯èƒ½è¦ä½¿ç”¨é™¤ç»“å°¾ç©ºæ ¼ä»¥å¤–çš„å…¶å®ƒæ–¹å¼æ¥æ¢è¡Œã€‚</span><br><span class="line">å¹¸è¿çš„æ˜¯ï¼Œå‡ ä¹æ¯ä¸ª Markdown åº”ç”¨ç¨‹åºéƒ½æ”¯æŒå¦ä¸€ç§æ¢è¡Œæ–¹å¼ï¼šHTML çš„ &lt;br&gt; æ ‡ç­¾ã€‚</span><br><span class="line">ä¸ºäº†å…¼å®¹æ€§ï¼Œè¯·åœ¨è¡Œå°¾æ·»åŠ â€œç»“å°¾ç©ºæ ¼â€æˆ– HTML çš„ &lt;br&gt; æ ‡ç­¾æ¥å®ç°æ¢è¡Œã€‚</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">First line with the HTML tag after.&lt;br&gt;</span><br><span class="line">And the next line.</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ï¼š<br>First line with the HTML tag after.<br><br>And the next line.</p>
<h2 id="4-å¼ºè°ƒè¯­æ³•"><a href="#4-å¼ºè°ƒè¯­æ³•" class="headerlink" title="4.å¼ºè°ƒè¯­æ³•"></a>4.å¼ºè°ƒè¯­æ³•</h2><h3 id="ç²—ä½“ï¼ˆBoldï¼‰"><a href="#ç²—ä½“ï¼ˆBoldï¼‰" class="headerlink" title="ç²—ä½“ï¼ˆBoldï¼‰"></a>ç²—ä½“ï¼ˆBoldï¼‰</h3><p>é€šè¿‡å°†æ–‡æœ¬è®¾ç½®ä¸ºç²—ä½“æˆ–æ–œä½“æ¥å¼ºè°ƒå…¶é‡è¦æ€§ã€‚<br>#è¦åŠ ç²—æ–‡æœ¬ï¼Œè¯·åœ¨å•è¯æˆ–çŸ­è¯­çš„å‰åå„æ·»åŠ ä¸¤ä¸ªæ˜Ÿå·ï¼ˆasterisksï¼‰æˆ–ä¸‹åˆ’çº¿ï¼ˆunderscoresï¼‰<br>#å¦‚éœ€åŠ ç²—ä¸€ä¸ªå•è¯æˆ–çŸ­è¯­çš„ä¸­é—´éƒ¨åˆ†ç”¨ä»¥è¡¨ç¤ºå¼ºè°ƒçš„è¯ï¼Œè¯·åœ¨è¦åŠ ç²—éƒ¨åˆ†çš„ä¸¤ä¾§å„æ·»åŠ ä¸¤ä¸ªæ˜Ÿå·ï¼ˆasterisksï¼‰</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">I just love **bold text**.   </span><br><span class="line">I just love __bold text__.</span><br><span class="line">Love**is**bold</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br>I just love <strong>bold text</strong>.<br>I just love <strong>bold text</strong>.<br>Love<strong>is</strong>bold</p>
<h3 id="æ–œä½“ï¼ˆItalicï¼‰"><a href="#æ–œä½“ï¼ˆItalicï¼‰" class="headerlink" title="æ–œä½“ï¼ˆItalicï¼‰"></a>æ–œä½“ï¼ˆItalicï¼‰</h3><p>è¦ç”¨æ–œä½“æ˜¾ç¤ºæ–‡æœ¬ï¼Œè¯·åœ¨å•è¯æˆ–çŸ­è¯­å‰åæ·»åŠ ä¸€ä¸ªæ˜Ÿå·ï¼ˆasteriskï¼‰æˆ–ä¸‹åˆ’çº¿ï¼ˆunderscoreï¼‰ã€‚<br>è¦æ–œä½“çªå‡ºå•è¯çš„ä¸­é—´éƒ¨åˆ†ï¼Œè¯·åœ¨å­—æ¯å‰åå„æ·»åŠ ä¸€ä¸ªæ˜Ÿå·ï¼Œä¸­é—´ä¸è¦å¸¦ç©ºæ ¼ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Italicized text is the *cat's meow*.</span><br><span class="line">Italicized text is the _cat's meow_.</span><br><span class="line">A*cat*meow</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br>Italicized text is the <em>catâ€™s meow</em>.<br>Italicized text is the <em>catâ€™s meow</em>.<br>A<em>cat</em>meow</p>
<h3 id="ç²—ä½“ï¼ˆBoldï¼‰å’Œæ–œä½“ï¼ˆItalicï¼‰"><a href="#ç²—ä½“ï¼ˆBoldï¼‰å’Œæ–œä½“ï¼ˆItalicï¼‰" class="headerlink" title="ç²—ä½“ï¼ˆBoldï¼‰å’Œæ–œä½“ï¼ˆItalicï¼‰"></a>ç²—ä½“ï¼ˆBoldï¼‰å’Œæ–œä½“ï¼ˆItalicï¼‰</h3><p>è¦åŒæ—¶ç”¨ç²—ä½“å’Œæ–œä½“çªå‡ºæ˜¾ç¤ºæ–‡æœ¬ï¼Œè¯·åœ¨å•è¯æˆ–çŸ­è¯­çš„å‰åå„æ·»åŠ ä¸‰ä¸ªæ˜Ÿå·æˆ–ä¸‹åˆ’çº¿ã€‚<br>è¦åŠ ç²—å¹¶ç”¨æ–œä½“æ˜¾ç¤ºå•è¯æˆ–çŸ­è¯­çš„ä¸­é—´éƒ¨åˆ†ï¼Œè¯·åœ¨è¦çªå‡ºæ˜¾ç¤ºçš„éƒ¨åˆ†å‰åå„æ·»åŠ ä¸‰ä¸ªæ˜Ÿå·ï¼Œä¸­é—´ä¸è¦å¸¦ç©ºæ ¼ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">This text is ***really important***.</span><br><span class="line">This text is ___really important___.</span><br><span class="line">This text is __*really important*__.</span><br><span class="line">This text is **_really important_**.</span><br><span class="line">This is really***very***important text.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹:<br>This text is <em><strong>really important</strong></em>.<br>This text is <em><strong>really important</strong></em>.<br>This text is <strong><em>really important</em></strong>.<br>This text is <strong><em>really important</em></strong>.<br>This is really<em><strong>very</strong></em>important text.</p>
<h2 id="å¼•ç”¨è¯­æ³•"><a href="#å¼•ç”¨è¯­æ³•" class="headerlink" title="å¼•ç”¨è¯­æ³•"></a>å¼•ç”¨è¯­æ³•</h2><p>è¦åˆ›å»ºå—å¼•ç”¨ï¼Œè¯·åœ¨æ®µè½å‰æ·»åŠ ä¸€ä¸ª &gt; ç¬¦å·</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&gt; Dorothy followed her through many of the beautiful rooms in her castle.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹:</p>
<blockquote>
<p>Dorothy followed her through many of the beautiful rooms in her castle.</p>
</blockquote>
<h3 id="å¤šä¸ªæ®µè½çš„å—å¼•ç”¨"><a href="#å¤šä¸ªæ®µè½çš„å—å¼•ç”¨" class="headerlink" title="å¤šä¸ªæ®µè½çš„å—å¼•ç”¨"></a>å¤šä¸ªæ®µè½çš„å—å¼•ç”¨</h3><p>å—å¼•ç”¨å¯ä»¥åŒ…å«å¤šä¸ªæ®µè½ã€‚ä¸ºæ®µè½ä¹‹é—´çš„ç©ºç™½è¡Œæ·»åŠ ä¸€ä¸ª &gt; ç¬¦å·</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&gt; Dorothy followed her through many of the beautiful rooms in her castle.</span><br><span class="line">&gt;</span><br><span class="line">&gt; The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹:</p>
<blockquote>
<p>Dorothy followed her through many of the beautiful rooms in her castle.</p>
<p>The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.</p>
</blockquote>
<h3 id="åµŒå¥—å—å¼•ç”¨"><a href="#åµŒå¥—å—å¼•ç”¨" class="headerlink" title="åµŒå¥—å—å¼•ç”¨"></a>åµŒå¥—å—å¼•ç”¨</h3><p>å—å¼•ç”¨å¯ä»¥åµŒå¥—ã€‚åœ¨è¦åµŒå¥—çš„æ®µè½å‰æ·»åŠ ä¸€ä¸ª &gt;&gt; ç¬¦å·ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&gt; Dorothy followed her through many of the beautiful rooms in her castle.</span><br><span class="line">&gt;</span><br><span class="line">&gt;&gt; The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹:</p>
<blockquote>
<p>Dorothy followed her through many of the beautiful rooms in her castle.</p>
<blockquote>
<p>The Witch bade her clean the pots and kettles and sweep the floor and keep the fire fed with wood.</p>
</blockquote>
</blockquote>
<h3 id="å¸¦æœ‰å…¶å®ƒå…ƒç´ çš„å—å¼•ç”¨"><a href="#å¸¦æœ‰å…¶å®ƒå…ƒç´ çš„å—å¼•ç”¨" class="headerlink" title="å¸¦æœ‰å…¶å®ƒå…ƒç´ çš„å—å¼•ç”¨"></a>å¸¦æœ‰å…¶å®ƒå…ƒç´ çš„å—å¼•ç”¨</h3><p>å—å¼•ç”¨å¯ä»¥åŒ…å«å…¶ä»– Markdown æ ¼å¼çš„å…ƒç´ ã€‚å¹¶éæ‰€æœ‰å…ƒç´ éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä½ éœ€è¦è¿›è¡Œå®éªŒä»¥æŸ¥çœ‹å“ªäº›å…ƒç´ æœ‰æ•ˆ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&gt; #### The quarterly results look great!</span><br><span class="line">&gt;</span><br><span class="line">&gt; - Revenue was off the chart.</span><br><span class="line">&gt; - Profits were higher than ever.</span><br><span class="line">&gt;</span><br><span class="line">&gt;  *Everything* is going according to **plan**.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š</p>
<blockquote>
<h4 id="The-quarterly-results-look-great"><a href="#The-quarterly-results-look-great" class="headerlink" title="The quarterly results look great!"></a>The quarterly results look great!</h4><ul>
<li>Revenue was off the chart.</li>
<li>Profits were higher than ever.</li>
</ul>
<p> <em>Everything</em> is going according to <strong>plan</strong>.</p>
</blockquote>
<h2 id="åˆ—è¡¨è¯­æ³•"><a href="#åˆ—è¡¨è¯­æ³•" class="headerlink" title="åˆ—è¡¨è¯­æ³•"></a>åˆ—è¡¨è¯­æ³•</h2><p>å¯ä»¥å°†å¤šä¸ªæ¡ç›®ç»„ç»‡æˆæœ‰åºæˆ–æ— åºåˆ—è¡¨</p>
<h3 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h3><p>è¦åˆ›å»ºæœ‰åºåˆ—è¡¨ï¼Œè¯·åœ¨æ¯ä¸ªåˆ—è¡¨é¡¹å‰æ·»åŠ æ•°å­—å¹¶ç´§è·Ÿä¸€ä¸ªè‹±æ–‡å¥ç‚¹ã€‚<br>æ•°å­—ä¸å¿…æŒ‰æ•°å­¦é¡ºåºæ’åˆ—ï¼Œä½†æ˜¯åˆ—è¡¨åº”å½“ä»¥æ•°å­— 1 èµ·å§‹ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">1. First item</span><br><span class="line">2. Second item</span><br><span class="line">3. Third item</span><br><span class="line">4. Fourth item</span><br><span class="line"></span><br><span class="line">1. First item</span><br><span class="line">1. Second item</span><br><span class="line">1. Third item</span><br><span class="line">1. Fourth item</span><br><span class="line"></span><br><span class="line">1. First item</span><br><span class="line">8. Second item</span><br><span class="line">3. Third item</span><br><span class="line">5. Fourth item</span><br><span class="line"></span><br><span class="line">1. First item</span><br><span class="line">2. Second item</span><br><span class="line">3. Third item</span><br><span class="line">    1. Indented item</span><br><span class="line">    2. Indented item</span><br><span class="line">4. Fourth item</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ol>
<li><p>First item</p>
</li>
<li><p>Second item</p>
</li>
<li><p>Third item</p>
</li>
<li><p>Fourth item</p>
</li>
<li><p>First item</p>
</li>
<li><p>Second item</p>
</li>
<li><p>Third item</p>
</li>
<li><p>Fourth item</p>
</li>
<li><p>First item</p>
</li>
<li><p>Second item</p>
</li>
<li><p>Third item</p>
</li>
<li><p>Fourth item</p>
</li>
<li><p>First item</p>
</li>
<li><p>Second item</p>
</li>
<li><p>Third item</p>
<ol>
<li>Indented item</li>
<li>Indented item</li>
</ol>
</li>
<li><p>Fourth item</p>
</li>
</ol>
<h3 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h3><p>è¦åˆ›å»ºæ— åºåˆ—è¡¨ï¼Œè¯·åœ¨æ¯ä¸ªåˆ—è¡¨é¡¹å‰é¢æ·»åŠ ç ´æŠ˜å· (-)ã€æ˜Ÿå· (*) æˆ–åŠ å· (+) ã€‚<br>ç¼©è¿›ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—è¡¨é¡¹å¯åˆ›å»ºåµŒå¥—åˆ—è¡¨ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">- First item</span><br><span class="line">- Second item</span><br><span class="line">- Third item</span><br><span class="line">- Fourth item</span><br><span class="line"></span><br><span class="line">* First item</span><br><span class="line">* Second item</span><br><span class="line">* Third item</span><br><span class="line">* Fourth item</span><br><span class="line"></span><br><span class="line">+ First item</span><br><span class="line">+ Second item</span><br><span class="line">+ Third item</span><br><span class="line">+ Fourth item</span><br><span class="line"></span><br><span class="line">- First item</span><br><span class="line">- Second item</span><br><span class="line">- Third item</span><br><span class="line">    - Indented item</span><br><span class="line">    - Indented item</span><br><span class="line">- Fourth item</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ul>
<li>First item</li>
<li>Second item</li>
<li>Third item</li>
<li>Fourth item</li>
</ul>
<ul>
<li>First item</li>
<li>Second item</li>
<li>Third item</li>
<li>Fourth item</li>
</ul>
<ul>
<li>First item</li>
<li>Second item</li>
<li>Third item</li>
<li>Fourth item</li>
</ul>
<ul>
<li>First item</li>
<li>Second item</li>
<li>Third item<ul>
<li>Indented item</li>
<li>Indented item</li>
</ul>
</li>
<li>Fourth item</li>
</ul>
<h3 id="åœ¨åˆ—è¡¨ä¸­åµŒå¥—å…¶ä»–å…ƒç´ "><a href="#åœ¨åˆ—è¡¨ä¸­åµŒå¥—å…¶ä»–å…ƒç´ " class="headerlink" title="åœ¨åˆ—è¡¨ä¸­åµŒå¥—å…¶ä»–å…ƒç´ "></a>åœ¨åˆ—è¡¨ä¸­åµŒå¥—å…¶ä»–å…ƒç´ </h3><p>è¦åœ¨ä¿ç•™åˆ—è¡¨è¿ç»­æ€§çš„åŒæ—¶åœ¨åˆ—è¡¨ä¸­æ·»åŠ å¦ä¸€ç§å…ƒç´ ï¼Œè¯·å°†è¯¥å…ƒç´ ç¼©è¿›å››ä¸ªç©ºæ ¼æˆ–ä¸€ä¸ªåˆ¶è¡¨ç¬¦</p>
<h4 id="æ®µè½"><a href="#æ®µè½" class="headerlink" title="æ®µè½"></a>æ®µè½</h4><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">*   This is the first list item.</span><br><span class="line">*   Here's the second list item.</span><br><span class="line"></span><br><span class="line">    I need to add another paragraph below the second list item.</span><br><span class="line"></span><br><span class="line">*   And here's the third list item.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ¸²æŸ“æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ul>
<li><p>This is the first list item.</p>
</li>
<li><p>Hereâ€™s the second list item.</p>
<p>I need to add another paragraph below the second list item.</p>
</li>
<li><p>And hereâ€™s the third list item.</p>
</li>
</ul>
<h4 id="å¼•ç”¨å—"><a href="#å¼•ç”¨å—" class="headerlink" title="å¼•ç”¨å—"></a>å¼•ç”¨å—</h4><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">*   This is the first list item.</span><br><span class="line">*   Here's the second list item.</span><br><span class="line"></span><br><span class="line">    &gt; A blockquote would look great below the second list item.</span><br><span class="line"></span><br><span class="line">*   And here's the third list item.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ¸²æŸ“æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ul>
<li><p>This is the first list item.</p>
</li>
<li><p>Hereâ€™s the second list item.</p>
<blockquote>
<p>A blockquote would look great below the second list item.</p>
</blockquote>
</li>
<li><p>And hereâ€™s the third list item.</p>
</li>
</ul>
<h4 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h4><p>ä»£ç å—é€šå¸¸é‡‡ç”¨å››ä¸ªç©ºæ ¼æˆ–ä¸€ä¸ªåˆ¶è¡¨ç¬¦ç¼©è¿›ã€‚å½“å®ƒä»¬è¢«æ”¾åœ¨åˆ—è¡¨ä¸­æ—¶ï¼Œè¯·å°†å®ƒä»¬ç¼©è¿›å…«ä¸ªç©ºæ ¼æˆ–ä¸¤ä¸ªåˆ¶è¡¨ç¬¦ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">1.  Open the file.</span><br><span class="line">2.  Find the following code block on line 21:</span><br><span class="line"></span><br><span class="line">        &lt;html&gt;</span><br><span class="line">          &lt;head&gt;</span><br><span class="line">            &lt;title&gt;Test&lt;/title&gt;</span><br><span class="line">          &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">3.  Update the title to match the name of your website.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ¸²æŸ“æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ol>
<li><p>Open the file.</p>
</li>
<li><p>Find the following code block on line 21:</p>
<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Test&lt;/title&gt;
  &lt;/head&gt;
</code></pre>
</li>
<li><p>Update the title to match the name of your website.</p>
</li>
</ol>
<h4 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h4><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">1.  Open the file containing the Linux mascot.</span><br><span class="line">2.  Marvel at its beauty.</span><br><span class="line"></span><br><span class="line">    ![Tux, the Linux mascot](https://img.shields.io/badge/è¿™æ˜¯-å›¾ç‰‡é“¾æ¥-blue)</span><br><span class="line">    ![Tux, the Linux mascot](/img/512.png)</span><br><span class="line"></span><br><span class="line">3.  Close the file.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ¸²æŸ“æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ol>
<li><p>Open the file containing the Linux mascot.</p>
</li>
<li><p>Marvel at its beauty.</p>
<p><img src="https://img.shields.io/badge/%E8%BF%99%E6%98%AF-%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5-blue" alt="Tux, the Linux mascot"><br><img src="/img/512.png" alt="Tux, the Linux mascot"></p>
</li>
<li><p>Close the file.</p>
</li>
</ol>
<h4 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h4><p>æ‚¨å¯ä»¥å°†æ— åºåˆ—è¡¨åµŒå¥—åœ¨æœ‰åºåˆ—è¡¨ä¸­ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">1. First item</span><br><span class="line">2. Second item</span><br><span class="line">3. Third item</span><br><span class="line">    - Indented item</span><br><span class="line">    - Indented item</span><br><span class="line">4. Fourth item</span><br></pre></td></tr></tbody></table></figure>
<p>#æ¸²æŸ“æ•ˆæœå¦‚ä¸‹:</p>
<ol>
<li>First item</li>
<li>Second item</li>
<li>Third item<ul>
<li>Indented item</li>
<li>Indented item</li>
</ul>
</li>
<li>Fourth item</li>
</ol>
<h2 id="ä»£ç è¯­æ³•"><a href="#ä»£ç è¯­æ³•" class="headerlink" title="ä»£ç è¯­æ³•"></a>ä»£ç è¯­æ³•</h2><p>è¦å°†å•è¯æˆ–çŸ­è¯­è¡¨ç¤ºä¸ºä»£ç ï¼Œè¯·å°†å…¶åŒ…è£¹åœ¨åå¼•å· (<code>) ä¸­ã€‚ ```At the command prompt, type </code>nano<code>.``` #æ¸²æŸ“æ•ˆæœå¦‚ä¸‹: At the command prompt, type </code>nano`.</p>
<h3 id="è½¬ä¹‰åå¼•å·"><a href="#è½¬ä¹‰åå¼•å·" class="headerlink" title="è½¬ä¹‰åå¼•å·"></a>è½¬ä¹‰åå¼•å·</h3><p>å¦‚æœä½ è¦è¡¨ç¤ºä¸ºä»£ç çš„å•è¯æˆ–çŸ­è¯­ä¸­åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªåå¼•å·ï¼Œåˆ™å¯ä»¥é€šè¿‡å°†å•è¯æˆ–çŸ­è¯­åŒ…è£¹åœ¨åŒåå¼•å·(``)ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">``Use `code` in your Markdown file.``</span><br></pre></td></tr></tbody></table></figure>
<p>#æ¸²æŸ“æ•ˆæœå¦‚ä¸‹:<br><code>Use `code` in your Markdown file.</code></p>
<h3 id="ä»£ç å—-1"><a href="#ä»£ç å—-1" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h3><p>è¦åˆ›å»ºä»£ç å—ï¼Œè¯·å°†ä»£ç å—çš„æ¯ä¸€è¡Œç¼©è¿›è‡³å°‘å››ä¸ªç©ºæ ¼æˆ–ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  123</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>#æ¸²æŸ“æ•ˆæœå¦‚ä¸‹:<br>    <br>      <br>      123<br>      <br>    </p>
<p>Note: è¦åˆ›å»ºä¸ç”¨ç¼©è¿›çš„ä»£ç å—ï¼Œè¯·ä½¿ç”¨ å›´æ å¼ä»£ç å—<a href="https://markdown.com.cn/extended-syntax/fenced-code-blocks.html">fenced code blocks</a></p>
<h2 id="åˆ†éš”çº¿è¯­æ³•"><a href="#åˆ†éš”çº¿è¯­æ³•" class="headerlink" title="åˆ†éš”çº¿è¯­æ³•"></a>åˆ†éš”çº¿è¯­æ³•</h2><p>è¦åˆ›å»ºåˆ†éš”çº¿ï¼Œè¯·åœ¨å•ç‹¬ä¸€è¡Œä¸Šä½¿ç”¨ä¸‰ä¸ªæˆ–å¤šä¸ªæ˜Ÿå· (***)ã€ç ´æŠ˜å· (â€”) æˆ–ä¸‹åˆ’çº¿ (___) ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å«å…¶ä»–å†…å®¹ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">***</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">_________________</span><br></pre></td></tr></tbody></table></figure>
<p>#ä»¥ä¸Šä¸‰ä¸ªåˆ†éš”çº¿çš„æ¸²æŸ“æ•ˆæœçœ‹èµ·æ¥éƒ½ä¸€æ ·ï¼š<br>#å¦‚ä¸‹ï¼š<br>Try to put a blank line beforeâ€¦</p>
<hr>
<p>â€¦and after a horizontal rule.</p>
<h2 id="é“¾æ¥è¯­æ³•"><a href="#é“¾æ¥è¯­æ³•" class="headerlink" title="é“¾æ¥è¯­æ³•"></a>é“¾æ¥è¯­æ³•</h2><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">é“¾æ¥æ–‡æœ¬æ”¾åœ¨ä¸­æ‹¬å·å†…ï¼Œé“¾æ¥åœ°å€æ”¾åœ¨åé¢çš„æ‹¬å·ä¸­ï¼Œé“¾æ¥titleå¯é€‰ã€‚</span><br><span class="line"></span><br><span class="line">è¶…é“¾æ¥Markdownè¯­æ³•ä»£ç ï¼š[è¶…é“¾æ¥æ˜¾ç¤ºå](è¶…é“¾æ¥åœ°å€ "è¶…é“¾æ¥title")</span><br><span class="line"></span><br><span class="line">å¯¹åº”çš„HTMLä»£ç ï¼š&lt;a href="è¶…é“¾æ¥åœ°å€" title="è¶…é“¾æ¥title"&gt;è¶…é“¾æ¥æ˜¾ç¤ºå&lt;/a&gt;</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ [Markdownè¯­æ³•](https://markdown.com.cn)ã€‚</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br>è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ <a href="https://markdown.com.cn/">Markdownè¯­æ³•</a>ã€‚</p>
<h3 id="ç»™é“¾æ¥å¢åŠ -Title"><a href="#ç»™é“¾æ¥å¢åŠ -Title" class="headerlink" title="ç»™é“¾æ¥å¢åŠ  Title"></a>ç»™é“¾æ¥å¢åŠ  Title</h3><p>é“¾æ¥titleæ˜¯å½“é¼ æ ‡æ‚¬åœåœ¨é“¾æ¥ä¸Šæ—¶ä¼šå‡ºç°çš„æ–‡å­—ï¼Œè¿™ä¸ªtitleæ˜¯å¯é€‰çš„ï¼Œå®ƒæ”¾åœ¨åœ†æ‹¬å·ä¸­é“¾æ¥åœ°å€åé¢ï¼Œè·Ÿé“¾æ¥åœ°å€ä¹‹é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ [Markdownè¯­æ³•](https://markdown.com.cn "æœ€å¥½çš„markdownæ•™ç¨‹")ã€‚</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br>è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ <a href="https://markdown.com.cn/" title="æœ€å¥½çš„markdownæ•™ç¨‹">Markdownè¯­æ³•</a>ã€‚</p>
<h3 id="ç½‘å€å’ŒEmailåœ°å€"><a href="#ç½‘å€å’ŒEmailåœ°å€" class="headerlink" title="ç½‘å€å’ŒEmailåœ°å€"></a>ç½‘å€å’ŒEmailåœ°å€</h3><p>ä½¿ç”¨å°–æ‹¬å·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŠŠURLæˆ–è€…emailåœ°å€å˜æˆå¯ç‚¹å‡»çš„é“¾æ¥</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;https://markdown.com.cn&gt;</span><br><span class="line">&lt;fake@example.com&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br><a href="https://markdown.com.cn/">https://markdown.com.cn</a><br><a href="mailto:fake@example.com">fake@example.com</a></p>
<h3 id="å¸¦æ ¼å¼åŒ–çš„é“¾æ¥"><a href="#å¸¦æ ¼å¼åŒ–çš„é“¾æ¥" class="headerlink" title="å¸¦æ ¼å¼åŒ–çš„é“¾æ¥"></a>å¸¦æ ¼å¼åŒ–çš„é“¾æ¥</h3><p>å¼ºè°ƒ é“¾æ¥, åœ¨é“¾æ¥è¯­æ³•å‰åå¢åŠ æ˜Ÿå·ã€‚ è¦å°†é“¾æ¥è¡¨ç¤ºä¸ºä»£ç ï¼Œè¯·åœ¨æ–¹æ‹¬å·ä¸­æ·»åŠ åå¼•å·ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">I love supporting the **[EFF](https://eff.org)**.</span><br><span class="line">This is the *[Markdown Guide](https://www.markdownguide.org)*.</span><br><span class="line">See the section on [`code`](#code).</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br>I love supporting the <strong><a href="https://eff.org/">EFF</a></strong>.<br>This is the <em><a href="https://www.markdownguide.org/">Markdown Guide</a></em>.<br>See the section on <a href="#code"><code>code</code></a>.</p>
<h3 id="å¼•ç”¨ç±»å‹é“¾æ¥"><a href="#å¼•ç”¨ç±»å‹é“¾æ¥" class="headerlink" title="å¼•ç”¨ç±»å‹é“¾æ¥"></a>å¼•ç”¨ç±»å‹é“¾æ¥</h3><p>å¼•ç”¨æ ·å¼é“¾æ¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„é“¾æ¥ï¼Œå®ƒä½¿URLåœ¨Markdownä¸­æ›´æ˜“äºæ˜¾ç¤ºå’Œé˜…è¯»ã€‚<br>å‚è€ƒæ ·å¼é“¾æ¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šä¸æ–‡æœ¬ä¿æŒå†…è”çš„éƒ¨åˆ†ä»¥åŠå­˜å‚¨åœ¨æ–‡ä»¶ä¸­å…¶ä»–ä½ç½®çš„éƒ¨åˆ†ï¼Œä»¥ä½¿æ–‡æœ¬æ˜“äºé˜…è¯»ã€‚</p>
<h4 id="é“¾æ¥çš„ç¬¬ä¸€éƒ¨åˆ†æ ¼å¼"><a href="#é“¾æ¥çš„ç¬¬ä¸€éƒ¨åˆ†æ ¼å¼" class="headerlink" title="é“¾æ¥çš„ç¬¬ä¸€éƒ¨åˆ†æ ¼å¼"></a>é“¾æ¥çš„ç¬¬ä¸€éƒ¨åˆ†æ ¼å¼</h4><p>å¼•ç”¨ç±»å‹çš„é“¾æ¥çš„ç¬¬ä¸€éƒ¨åˆ†ä½¿ç”¨ä¸¤ç»„æ‹¬å·è¿›è¡Œæ ¼å¼è®¾ç½®ã€‚ç¬¬ä¸€ç»„æ–¹æ‹¬å·åŒ…å›´åº”æ˜¾ç¤ºä¸ºé“¾æ¥çš„æ–‡æœ¬ã€‚<br>ç¬¬äºŒç»„æ‹¬å·æ˜¾ç¤ºäº†ä¸€ä¸ªæ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾ç”¨äºæŒ‡å‘æ‚¨å­˜å‚¨åœ¨æ–‡æ¡£å…¶ä»–ä½ç½®çš„é“¾æ¥ã€‚<br>å°½ç®¡ä¸æ˜¯å¿…éœ€çš„ï¼Œå¯ä»¥åœ¨ç¬¬ä¸€ç»„å’Œç¬¬äºŒç»„æ‹¬å·ä¹‹é—´åŒ…å«ä¸€ä¸ªç©ºæ ¼ã€‚ç¬¬äºŒç»„æ‹¬å·ä¸­çš„æ ‡ç­¾ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥åŒ…å«å­—æ¯ï¼Œæ•°å­—ï¼Œç©ºæ ¼æˆ–æ ‡ç‚¹ç¬¦å·ã€‚<br>ä»¥ä¸‹ç¤ºä¾‹æ ¼å¼å¯¹äºé“¾æ¥çš„ç¬¬ä¸€éƒ¨åˆ†æ•ˆæœç›¸åŒï¼š<br>*[hobbit-hole][1]<br>*[hobbit-hole] [1]</p>
<h4 id="é“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†æ ¼å¼"><a href="#é“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†æ ¼å¼" class="headerlink" title="é“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†æ ¼å¼"></a>é“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†æ ¼å¼</h4><p>å¼•ç”¨ç±»å‹é“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†ä½¿ç”¨ä»¥ä¸‹å±æ€§è®¾ç½®æ ¼å¼ï¼š<br>æ”¾åœ¨æ‹¬å·ä¸­çš„æ ‡ç­¾ï¼Œå…¶åç´§è·Ÿä¸€ä¸ªå†’å·å’Œè‡³å°‘ä¸€ä¸ªç©ºæ ¼ï¼ˆä¾‹å¦‚<code>[label]:</code>ï¼‰ã€‚<br>é“¾æ¥çš„URLï¼Œå¯ä»¥é€‰æ‹©å°†å…¶æ‹¬åœ¨å°–æ‹¬å·ä¸­ã€‚<br>é“¾æ¥çš„å¯é€‰æ ‡é¢˜ï¼Œå¯ä»¥å°†å…¶æ‹¬åœ¨åŒå¼•å·ï¼Œå•å¼•å·æˆ–æ‹¬å·ä¸­ã€‚<br>ä»¥ä¸‹ç¤ºä¾‹æ ¼å¼å¯¹äºé“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†æ•ˆæœç›¸åŒ<br>Â·[1]: <a href="https://en.wikipedia.org/wiki/Hobbit#Lifestyle">https://en.wikipedia.org/wiki/Hobbit#Lifestyle</a><br>Â·[1]: <a href="https://en.wikipedia.org/wiki/Hobbit#Lifestyle">https://en.wikipedia.org/wiki/Hobbit#Lifestyle</a> â€œHobbit lifestylesâ€<br>Â·[1]: <a href="https://en.wikipedia.org/wiki/Hobbit#Lifestyle">https://en.wikipedia.org/wiki/Hobbit#Lifestyle</a> â€˜Hobbit lifestylesâ€™<br>Â·[1]: <a href="https://en.wikipedia.org/wiki/Hobbit#Lifestyle">https://en.wikipedia.org/wiki/Hobbit#Lifestyle</a> (Hobbit lifestyles)<br>Â·[1]: <a href="https://en.wikipedia.org/wiki/Hobbit#Lifestyle">https://en.wikipedia.org/wiki/Hobbit#Lifestyle</a> â€œHobbit lifestylesâ€<br>Â·[1]: <a href="https://en.wikipedia.org/wiki/Hobbit#Lifestyle">https://en.wikipedia.org/wiki/Hobbit#Lifestyle</a> â€˜Hobbit lifestylesâ€™<br>Â·[1]: <a href="https://en.wikipedia.org/wiki/Hobbit#Lifestyle">https://en.wikipedia.org/wiki/Hobbit#Lifestyle</a> (Hobbit lifestyles)</p>
<p>å¯ä»¥å°†é“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†æ”¾åœ¨Markdownæ–‡æ¡£ä¸­çš„ä»»ä½•ä½ç½®ã€‚æœ‰äº›äººå°†å®ƒä»¬æ”¾åœ¨å‡ºç°çš„æ®µè½ä¹‹åï¼Œæœ‰äº›äººåˆ™å°†å®ƒä»¬æ”¾åœ¨æ–‡æ¡£çš„æœ«å°¾ï¼ˆä¾‹å¦‚å°¾æ³¨æˆ–è„šæ³¨ï¼‰ã€‚</p>
<h4 id="é“¾æ¥æœ€ä½³å®è·µ"><a href="#é“¾æ¥æœ€ä½³å®è·µ" class="headerlink" title="é“¾æ¥æœ€ä½³å®è·µ"></a>é“¾æ¥æœ€ä½³å®è·µ</h4><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[link](https://www.example.com/my%20great%20page)</span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://www.example.com/my%20great%20page">link</a></p>
<h2 id="å›¾ç‰‡è¯­æ³•"><a href="#å›¾ç‰‡è¯­æ³•" class="headerlink" title="å›¾ç‰‡è¯­æ³•"></a>å›¾ç‰‡è¯­æ³•</h2><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¦æ·»åŠ å›¾åƒï¼Œè¯·ä½¿ç”¨æ„Ÿå¹å· (!), ç„¶ååœ¨æ–¹æ‹¬å·å¢åŠ æ›¿ä»£æ–‡æœ¬ï¼Œå›¾ç‰‡é“¾æ¥æ”¾åœ¨åœ†æ‹¬å·é‡Œï¼Œæ‹¬å·é‡Œçš„é“¾æ¥åå¯ä»¥å¢åŠ ä¸€ä¸ªå¯é€‰çš„å›¾ç‰‡æ ‡é¢˜æ–‡æœ¬ã€‚</span><br><span class="line">æ’å…¥å›¾ç‰‡Markdownè¯­æ³•ä»£ç ï¼š![å›¾ç‰‡alt](å›¾ç‰‡é“¾æ¥ "å›¾ç‰‡title")ã€‚</span><br><span class="line">å¯¹åº”çš„HTMLä»£ç ï¼š&lt;img src="å›¾ç‰‡é“¾æ¥" alt="å›¾ç‰‡alt" title="å›¾ç‰‡title"&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![è¿™æ˜¯å›¾ç‰‡](/assets/img/philly-magic-garden.jpg "Magic Gardens")</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/images/tag.png" alt="è¿™æ˜¯å›¾ç‰‡" title="Magic Gardens"></p>
<h3 id="é“¾æ¥å›¾ç‰‡"><a href="#é“¾æ¥å›¾ç‰‡" class="headerlink" title="é“¾æ¥å›¾ç‰‡"></a>é“¾æ¥å›¾ç‰‡</h3><p>ç»™å›¾ç‰‡å¢åŠ é“¾æ¥ï¼Œè¯·å°†å›¾åƒçš„Markdown æ‹¬åœ¨æ–¹æ‹¬å·ä¸­ï¼Œç„¶åå°†é“¾æ¥æ·»åŠ åœ¨åœ†æ‹¬å·ä¸­ã€‚<br>ç‚¹å‡»å›¾ç‰‡è·³è½¬åˆ°é“¾æ¥åœ°å€ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[![å›¾ç‰‡](/images/tag.png "Shiprock")](https://markdown.com.cn)</span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://markdown.com.cn/"><img src="/images/tag.png" alt="å›¾ç‰‡" title="Shiprock"></a></p>
<h2 id="è½¬ä¹‰å­—ç¬¦è¯­æ³•"><a href="#è½¬ä¹‰å­—ç¬¦è¯­æ³•" class="headerlink" title="è½¬ä¹‰å­—ç¬¦è¯­æ³•"></a>è½¬ä¹‰å­—ç¬¦è¯­æ³•</h2><p>è¦æ˜¾ç¤ºåŸæœ¬ç”¨äºæ ¼å¼åŒ– Markdown æ–‡æ¡£çš„å­—ç¬¦ï¼Œè¯·åœ¨å­—ç¬¦å‰é¢æ·»åŠ åæ–œæ å­—ç¬¦ \ ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">\* Without the backslash, this would be a bullet in an unordered list.</span><br></pre></td></tr></tbody></table></figure>
<p>#æ•ˆæœå¦‚ä¸‹ï¼š<br>* Without the backslash, this would be a bullet in an unordered list.</p>
<h3 id="å¯åšè½¬ä¹‰çš„å­—ç¬¦"><a href="#å¯åšè½¬ä¹‰çš„å­—ç¬¦" class="headerlink" title="å¯åšè½¬ä¹‰çš„å­—ç¬¦"></a>å¯åšè½¬ä¹‰çš„å­—ç¬¦</h3><p>ä»¥ä¸‹åˆ—å‡ºçš„å­—ç¬¦éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨åæ–œæ å­—ç¬¦ä»è€Œè¾¾åˆ°è½¬ä¹‰ç›®çš„ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Character	Name</span><br><span class="line">\	backslash</span><br><span class="line">`	backtick (see also escaping backticks in code)</span><br><span class="line">*	asterisk</span><br><span class="line">_	underscore</span><br><span class="line">{ }	curly braces</span><br><span class="line">[ ]	brackets</span><br><span class="line">( )	parentheses</span><br><span class="line">#	pound sign</span><br><span class="line">+	plus sign</span><br><span class="line">-	minus sign (hyphen)</span><br><span class="line">.	dot</span><br><span class="line">!	exclamation mark</span><br><span class="line">|	pipe (see also escaping pipe in tables)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬ä¹‰"><a href="#ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬ä¹‰" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬ä¹‰"></a>ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬ä¹‰</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">åœ¨ HTML æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªå­—ç¬¦éœ€è¦ç‰¹æ®Šå¤„ç†ï¼š &lt; å’Œ &amp; ã€‚ &lt; ç¬¦å·ç”¨äºèµ·å§‹æ ‡ç­¾ï¼Œ&amp; ç¬¦å·åˆ™ç”¨äºæ ‡è®° HTML å®ä½“ï¼Œ</span><br><span class="line">å¦‚æœä½ åªæ˜¯æƒ³è¦ä½¿ç”¨è¿™äº›ç¬¦å·ï¼Œä½ å¿…é¡»è¦ä½¿ç”¨å®ä½“çš„å½¢å¼ï¼Œåƒæ˜¯ &amp;lt; å’Œ &amp;amp;ã€‚</span><br><span class="line">&amp; ç¬¦å·å…¶å®å¾ˆå®¹æ˜“è®©å†™ä½œç½‘é¡µæ–‡ä»¶çš„äººæ„Ÿåˆ°å›°æ‰°ï¼Œå¦‚æœä½ è¦æ‰“ã€ŒAT&amp;Tã€ ï¼Œä½ å¿…é¡»è¦å†™æˆã€ŒAT&amp;amp;Tã€ ï¼Œè¿˜å¾—è½¬æ¢ç½‘å€å†…çš„ &amp; ç¬¦å·</span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœä½ è¦é“¾æ¥åˆ°ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">http://images.google.com/images?num=30&amp;q=larry+bird</span><br></pre></td></tr></tbody></table></figure>
<p>ä½ å¿…é¡»è¦æŠŠç½‘å€è½¬æˆï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">http://images.google.com/images?num=30&amp;amp;q=larry+bird</span><br></pre></td></tr></tbody></table></figure>
<p>æ‰èƒ½æ”¾åˆ°é“¾æ¥æ ‡ç­¾çš„ href å±æ€§é‡Œã€‚ä¸ç”¨è¯´ä¹ŸçŸ¥é“è¿™å¾ˆå®¹æ˜“å¿˜è®°ï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯ HTML æ ‡å‡†æ£€æŸ¥æ‰€æ£€æŸ¥åˆ°çš„é”™è¯¯ä¸­ï¼Œæ•°é‡æœ€å¤šçš„ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Markdown å…è®¸ä½ ç›´æ¥ä½¿ç”¨è¿™äº›ç¬¦å·ï¼Œå®ƒå¸®ä½ è‡ªåŠ¨è½¬ä¹‰å­—ç¬¦ã€‚</span><br><span class="line">å¦‚æœä½ ä½¿ç”¨ &amp; ç¬¦å·çš„ä½œä¸º HTML å®ä½“çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå®ƒä¸ä¼šè¢«è½¬æ¢ï¼Œ</span><br><span class="line">è€Œåœ¨å…¶å®ƒæƒ…å†µä¸‹ï¼Œå®ƒåˆ™ä¼šè¢«è½¬æ¢æˆ &amp;amp;ã€‚æ‰€ä»¥ä½ å¦‚æœè¦åœ¨æ–‡ä»¶ä¸­æ’å…¥ä¸€ä¸ªè‘—ä½œæƒçš„ç¬¦å·ï¼Œ</span><br><span class="line">ä½ å¯ä»¥è¿™æ ·å†™ï¼š</span><br><span class="line">&amp;copy;</span><br><span class="line"></span><br><span class="line">Markdown å°†ä¸ä¼šå¯¹è¿™æ®µæ–‡å­—åšä¿®æ”¹ï¼Œä½†æ˜¯å¦‚æœä½ è¿™æ ·å†™ï¼š</span><br><span class="line">AT&amp;T</span><br><span class="line"></span><br><span class="line">Markdown å°±ä¼šå°†å®ƒè½¬ä¸ºï¼š</span><br><span class="line">AT&amp;amp;T</span><br><span class="line"></span><br><span class="line">ç±»ä¼¼çš„çŠ¶å†µä¹Ÿä¼šå‘ç”Ÿåœ¨ &lt; ç¬¦å·ä¸Šï¼Œå› ä¸º Markdown æ”¯æŒ è¡Œå†… HTML ï¼Œ</span><br><span class="line">å¦‚æœä½ ä½¿ç”¨ &lt; ç¬¦å·ä½œä¸º HTML æ ‡ç­¾çš„åˆ†éš”ç¬¦ï¼Œ</span><br><span class="line">é‚£ Markdown ä¹Ÿä¸ä¼šå¯¹å®ƒåšä»»ä½•è½¬æ¢ï¼Œä½†æ˜¯å¦‚æœä½ æ˜¯å†™ï¼š</span><br><span class="line">4 &lt; 5</span><br><span class="line">Markdown å°†ä¼šæŠŠå®ƒè½¬æ¢ä¸ºï¼š</span><br><span class="line">4 &amp;lt; 5</span><br><span class="line"></span><br><span class="line">éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Markdown çš„å—çº§å…ƒç´ å’Œå†…è”å…ƒç´ ä¸­ï¼Œ &lt; å’Œ &amp; ä¸¤ä¸ªç¬¦å·éƒ½ä¼šè¢«è‡ªåŠ¨è½¬æ¢æˆ HTML å®ä½“ï¼Œ</span><br><span class="line">è¿™é¡¹ç‰¹æ€§è®©ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ Markdown å†™ HTMLã€‚ï¼ˆåœ¨ HTML è¯­æ³•ä¸­ï¼Œä½ è¦æ‰‹åŠ¨æŠŠæ‰€æœ‰çš„ &lt; å’Œ &amp; éƒ½è½¬æ¢ä¸º HTML å®ä½“ã€‚ï¼‰</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Markdown-å†…åµŒ-HTML-æ ‡ç­¾"><a href="#Markdown-å†…åµŒ-HTML-æ ‡ç­¾" class="headerlink" title="Markdown å†…åµŒ HTML æ ‡ç­¾"></a>Markdown å†…åµŒ HTML æ ‡ç­¾</h2><p>å¯¹äº Markdown æ¶µç›–èŒƒå›´ä¹‹å¤–çš„æ ‡ç­¾ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶é‡Œé¢ç”¨ HTML æœ¬èº«ã€‚<br>å¦‚éœ€ä½¿ç”¨ HTMLï¼Œä¸éœ€è¦é¢å¤–æ ‡æ³¨è¿™æ˜¯ HTML æˆ–æ˜¯ Markdownï¼Œåªéœ€ HTML æ ‡ç­¾æ·»åŠ åˆ° Markdown æ–‡æœ¬ä¸­å³å¯ã€‚</p>
<h3 id="è¡Œçº§å…§è”æ ‡ç­¾"><a href="#è¡Œçº§å…§è”æ ‡ç­¾" class="headerlink" title="è¡Œçº§å…§è”æ ‡ç­¾"></a>è¡Œçº§å…§è”æ ‡ç­¾</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">HTML çš„è¡Œçº§å…§è”æ ‡ç­¾å¦‚ &lt;span&gt;ã€&lt;cite&gt;ã€&lt;del&gt; ä¸å—é™åˆ¶ï¼Œå¯ä»¥åœ¨ Markdown çš„æ®µè½ã€åˆ—è¡¨æˆ–æ˜¯æ ‡é¢˜é‡Œä»»æ„ä½¿ç”¨ã€‚</span><br><span class="line">ä¾ç…§ä¸ªäººä¹ æƒ¯ï¼Œç”šè‡³å¯ä»¥ä¸ç”¨ Markdown æ ¼å¼ï¼Œè€Œé‡‡ç”¨ HTML æ ‡ç­¾æ¥æ ¼å¼åŒ–ã€‚</span><br><span class="line">ä¾‹å¦‚ï¼šå¦‚æœæ¯”è¾ƒå–œæ¬¢ HTML çš„ &lt;a&gt; æˆ– &lt;img&gt; æ ‡ç­¾ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ ‡ç­¾ï¼Œè€Œä¸ç”¨ Markdown æä¾›çš„é“¾æ¥æˆ–æ˜¯å›¾ç‰‡è¯­æ³•ã€‚</span><br><span class="line">å½“ä½ éœ€è¦æ›´æ”¹å…ƒç´ çš„å±æ€§æ—¶ï¼ˆä¾‹å¦‚ä¸ºæ–‡æœ¬æŒ‡å®šé¢œè‰²æˆ–æ›´æ”¹å›¾åƒçš„å®½åº¦ï¼‰ï¼Œä½¿ç”¨ HTML æ ‡ç­¾æ›´æ–¹ä¾¿äº›ã€‚</span><br><span class="line"></span><br><span class="line">HTML è¡Œçº§å…§è”æ ‡ç­¾å’ŒåŒºå—æ ‡ç­¾ä¸åŒï¼Œåœ¨å…§è”æ ‡ç­¾çš„èŒƒå›´å†…ï¼Œ Markdown çš„è¯­æ³•æ˜¯å¯ä»¥è§£æçš„ã€‚</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">This **word** is bold. This &lt;em&gt;word&lt;/em&gt; is italic.</span><br></pre></td></tr></tbody></table></figure>
<p>#è¾“å‡ºå¦‚ä¸‹ï¼š<br>This <strong>word</strong> is bold. This <em>word</em> is italic.</p>
<h3 id="åŒºå—æ ‡ç­¾"><a href="#åŒºå—æ ‡ç­¾" class="headerlink" title="åŒºå—æ ‡ç­¾"></a>åŒºå—æ ‡ç­¾</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">åŒºå—å…ƒç´ â”€â”€æ¯”å¦‚ &lt;div&gt;ã€&lt;table&gt;ã€&lt;pre&gt;ã€&lt;p&gt; ç­‰æ ‡ç­¾ï¼Œå¿…é¡»åœ¨å‰ååŠ ä¸Šç©ºè¡Œï¼Œä»¥ä¾¿äºå†…å®¹åŒºåˆ†ã€‚</span><br><span class="line">è€Œä¸”è¿™äº›å…ƒç´ çš„å¼€å§‹ä¸ç»“å°¾æ ‡ç­¾ï¼Œä¸å¯ä»¥ç”¨ tab æˆ–æ˜¯ç©ºç™½æ¥ç¼©è¿›ã€‚</span><br><span class="line">Markdown ä¼šè‡ªåŠ¨è¯†åˆ«è¿™åŒºå—å…ƒç´ ï¼Œé¿å…åœ¨åŒºå—æ ‡ç­¾å‰ååŠ ä¸Šæ²¡æœ‰å¿…è¦çš„ &lt;p&gt; æ ‡ç­¾ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ï¼Œåœ¨ Markdown æ–‡ä»¶é‡ŒåŠ ä¸Šä¸€æ®µ HTML è¡¨æ ¼ï¼š</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">This is a regular paragraph.</span><br><span class="line"></span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;<span class="built_in">tr</span>&gt;</span><br><span class="line">        &lt;td&gt;Foo&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">This is another regular paragraph.</span><br></pre></td></tr></tbody></table></figure>
<p>è¯·æ³¨æ„ï¼ŒMarkdown è¯­æ³•åœ¨ HTML åŒºå—æ ‡ç­¾ä¸­å°†ä¸ä¼šè¢«è¿›è¡Œå¤„ç†ã€‚<br>ä¾‹å¦‚ï¼Œä½ æ— æ³•åœ¨ HTML åŒºå—å†…ä½¿ç”¨ Markdown å½¢å¼çš„<em>å¼ºè°ƒ</em></p>
<h3 id="HTML-ç”¨æ³•æœ€ä½³å®è·µ"><a href="#HTML-ç”¨æ³•æœ€ä½³å®è·µ" class="headerlink" title="HTML ç”¨æ³•æœ€ä½³å®è·µ"></a>HTML ç”¨æ³•æœ€ä½³å®è·µ</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">å‡ºäºå®‰å…¨åŸå› ï¼Œå¹¶éæ‰€æœ‰ Markdown åº”ç”¨ç¨‹åºéƒ½æ”¯æŒåœ¨ Markdown æ–‡æ¡£ä¸­æ·»åŠ  HTMLã€‚</span><br><span class="line">å¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥çœ‹ç›¸åº” Markdown åº”ç”¨ç¨‹åºçš„æ‰‹å†Œã€‚æŸäº›åº”ç”¨ç¨‹åºåªæ”¯æŒ HTML æ ‡ç­¾çš„å­é›†ã€‚</span><br><span class="line"></span><br><span class="line">å¯¹äº HTML çš„å—çº§å…ƒç´  &lt;div&gt;ã€&lt;table&gt;ã€&lt;pre&gt; å’Œ &lt;p&gt;ï¼Œè¯·åœ¨å…¶å‰åä½¿ç”¨ç©ºè¡Œï¼ˆblank linesï¼‰ä¸å…¶å®ƒå†…å®¹è¿›è¡Œåˆ†éš”ã€‚</span><br><span class="line">å°½é‡ä¸è¦ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼ˆtabsï¼‰æˆ–ç©ºæ ¼ï¼ˆspacesï¼‰å¯¹ HTML æ ‡ç­¾åšç¼©è¿›ï¼Œå¦åˆ™å°†å½±å“æ ¼å¼ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨ HTML å—çº§æ ‡ç­¾å†…ä¸èƒ½ä½¿ç”¨ Markdown è¯­æ³•ã€‚ä¾‹å¦‚ &lt;p&gt;italic and **bold**&lt;/p&gt; å°†ä¸èµ·ä½œç”¨ã€‚</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>ä¸ªäººåšå®¢</tag>
        <tag>markdownè¯­æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>rainmeterè‡ªå®šä¹‰ä¸ªæ€§åŒ–windowsæ¡Œé¢</title>
    <url>/looking/1c9e63ed.html</url>
    <content><![CDATA[<p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong><br><img src="https://pic.imgdb.cn/item/667f9fead9c307b7e91156ee.png" alt="æ¡Œé¢æ•ˆæœ"><br><strong>ä¸»é¢˜åŒ…</strong>:<br><a href="https://www.alipan.com/s/p645sPEZxhF">æå–ç ï¼š6ij4</a></p>
<p><strong>å¦‚æœä½¿ç”¨æˆ‘çš„çš®è‚¤åŒ…ï¼Œåªéœ€ä¸‹è½½ä¸»é¢˜åŒ…è§£å‹åå°†ç›®å½•æ”¾åˆ°<em>C:\Users\Administrator\Documents\Rainmeter\Skins</em>å³å¯</strong></p>
<h2 id="1-ä¸‹è½½rainmeter"><a href="#1-ä¸‹è½½rainmeter" class="headerlink" title="1.ä¸‹è½½rainmeter"></a>1.ä¸‹è½½rainmeter</h2><p><a href="https://www.rainmeter.net/download">ä¸‹è½½åœ°å€</a></p>
<h2 id="2-å®‰è£…-ä¸€ç›´æŒ‰ä¸‹ä¸€æ­¥å³å¯"><a href="#2-å®‰è£…-ä¸€ç›´æŒ‰ä¸‹ä¸€æ­¥å³å¯" class="headerlink" title="2.å®‰è£… ä¸€ç›´æŒ‰ä¸‹ä¸€æ­¥å³å¯"></a>2.å®‰è£… ä¸€ç›´æŒ‰ä¸‹ä¸€æ­¥å³å¯</h2><ul>
<li>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://pic.imgdb.cn/item/667fa11bd9c307b7e912d511.png" alt="å®‰è£…"></li>
</ul>
<h2 id="3-ä¸‹è½½ä¸»é¢˜"><a href="#3-ä¸‹è½½ä¸»é¢˜" class="headerlink" title="3.ä¸‹è½½ä¸»é¢˜"></a>3.ä¸‹è½½ä¸»é¢˜</h2><ul>
<li><p>è¿™é‡Œæœ‰å¾ˆå¤šä¸»é¢˜ï¼Œå¯ä»¥æŒ‰è‡ªå·±çš„é£æ ¼ä¸‹è½½å®‰è£…å³å¯<br><a href="https://zhutix.com/tag/rainmeter/?post_order=views">ä¸‹è½½åœ°å€</a></p>
</li>
<li><p>æˆ‘è¿™é‡Œä¸‹è½½</p>
<ul>
<li>Welfare</li>
<li>RetrOcOlOr</li>
</ul>
</li>
<li><p>ç„¶ååœ¨è¿™ä¸ªåŸºç¡€ä¸Šè‡ªå®šä¹‰è‡ªå·±çš„æ¡Œé¢</p>
</li>
</ul>
<h2 id="4-è‡ªå®šä¹‰æ¡Œé¢ï¼ˆä»£ç çš„è§£æï¼‰"><a href="#4-è‡ªå®šä¹‰æ¡Œé¢ï¼ˆä»£ç çš„è§£æï¼‰" class="headerlink" title="4.è‡ªå®šä¹‰æ¡Œé¢ï¼ˆä»£ç çš„è§£æï¼‰"></a>4.è‡ªå®šä¹‰æ¡Œé¢ï¼ˆä»£ç çš„è§£æï¼‰</h2><ul>
<li><p>å›¾æ ‡ä»£ç ï¼š<br><img src="https://pic.imgdb.cn/item/667fa368d9c307b7e9169882.png"></p>
</li>
<li><p>ä»£ç è§£æï¼šï¼ˆæ³¨æ„è¿™æ˜¯rainmeterçš„å®‰è£…è·¯å¾„ï¼‰</p>
<ul>
<li><p>åœ¨ä¸»é¢˜æ–‡ä»¶ä¸­ï¼šC:\Users\Administrator\Documents\Welfare@Resources\Variables.inc æ‰¾åˆ°è¿™ä¸ªå˜é‡æ–‡ä»¶æ‰“å¼€ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">; Rainmeter Variables</span><br><span class="line">[Variables]</span><br><span class="line">Author=Morteza Nasirivand</span><br><span class="line">Language=English</span><br><span class="line">Location=IRXX0018</span><br><span class="line">Unit=f</span><br><span class="line">Format=H</span><br><span class="line">Hidden=0</span><br><span class="line">Hidden2=1</span><br><span class="line">Player=WMP</span><br><span class="line"></span><br><span class="line">;å›¾æ ‡å˜é‡</span><br><span class="line">;å¦‚æœæœ‰å¤šä¸ªå›¾æ ‡æŒ‰è¿™ä¸ªæ ¼å¼æ·»åŠ å³å¯</span><br><span class="line"></span><br><span class="line">;å¦‚è¿™é‡Œæ˜¯ æˆ‘çš„ç”µè„‘ æ‰“å¼€çš„å›¾æ ‡</span><br><span class="line">LinkIcon1NameAndPath=#@#\MyComputer.png			;å›¾æ ‡åŸå§‹çŠ¶æ€</span><br><span class="line">HoverIcon1NameAndPath=#@#\MyComputer-1.png		;é¼ æ ‡æ”¾åˆ°å›¾æ ‡åçš„å˜åŒ–çš„å›¾æ ‡</span><br><span class="line">Link1Text=myComputer							;å›¾æ ‡å</span><br><span class="line">LinkLocationPath1=["shell:MyComputerFolder"]	;ç‚¹å‡»å›¾æ ‡ååšçš„åŠ¨ä½œã€å¦‚æ‰“å¼€ç›¸åº”çš„åº”ç”¨æˆ–é“¾æ¥ç½‘ç«™</span><br><span class="line"></span><br><span class="line">LinkIcon2NameAndPath=#@#\google-1.png</span><br><span class="line">HoverIcon2NameAndPath=#@#\google.png</span><br><span class="line">Link2Text=google</span><br><span class="line">LinkLocationPath2=["C:\Program Files\Google\Chrome\Application\chrome.exe"]</span><br><span class="line"></span><br><span class="line">LinkIcon3NameAndPath=#@#\github.png</span><br><span class="line">HoverIcon3NameAndPath=#@#\github-4.png</span><br><span class="line">Link3Text=github.com</span><br><span class="line">LinkLocationPath3=!Execute ["https://github.com"]</span><br><span class="line"></span><br><span class="line">PythonImgPath1=#@#\python-3.png</span><br><span class="line">PythonImgPath2=#@#\python-5.png</span><br><span class="line">PythonLinkText=pycharm</span><br><span class="line">PythonAppPath=!Execute ["D:\install\pycharm\PyCharm 2022.2.5\bin\pycharm64"]</span><br><span class="line"></span><br><span class="line">LinkIcon5NameAndPath=#@#\gmail-1.png</span><br><span class="line">HoverIcon5NameAndPath=#@#\gmail.png</span><br><span class="line">Link5Text=gmail</span><br><span class="line">LinkLocationPath5=!Execute ["https://mail.google.com/mail/u/1/#inbox/"]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">LinkIcon6NameAndPath=#@#\youtube-1.png</span><br><span class="line">HoverIcon6NameAndPath=#@#\youtube-2.png</span><br><span class="line">Link6Text=youtube</span><br><span class="line">LinkLocationPath6=!Execute ["https://www.youtube.com/"]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">LinkIcon7NameAndPath=#@#\terminal-1.png</span><br><span class="line">HoverIcon7NameAndPath=#@#\terminal-2.png</span><br><span class="line">Link7Text=youtube</span><br><span class="line">LinkLocationPath7=!Execute ["wt"]</span><br><span class="line"></span><br><span class="line">LinkIcon8NameAndPath=#@#\music.png</span><br><span class="line">HoverIcon8NameAndPath=#@#\music-1.png</span><br><span class="line">Link8Text=kugou</span><br><span class="line">LinkLocationPath8=!Execute ["D:\install\kugou\KGMusic\KuGou.exe"]</span><br><span class="line"></span><br><span class="line">LinkIcon9NameAndPath=#@#\bi-1.png</span><br><span class="line">HoverIcon9NameAndPath=#@#\bi.png</span><br><span class="line">Link9Text=bilibili</span><br><span class="line">LinkLocationPath9=!Execute ["https://www.bilibili.com/"]</span><br><span class="line"></span><br><span class="line">LinkIcon10NameAndPath=#@#\wechat.png</span><br><span class="line">HoverIcon10NameAndPath=#@#\wechat-1.png</span><br><span class="line">Link10Text=wechat</span><br><span class="line">LinkLocationPath10=!Execute ["D:\install\wechat\WeChat.exe"]</span><br><span class="line"></span><br><span class="line">LinkIcon11NameAndPath=#@#\note.png</span><br><span class="line">HoverIcon11NameAndPath=#@#\note-1.png</span><br><span class="line">Link11Text=joplin</span><br><span class="line">LinkLocationPath11=!Execute ["C:\Program Files\Joplin\Joplin.exe"]</span><br><span class="line"></span><br><span class="line">ClashImgPath1=#@#\vpn-3.png</span><br><span class="line">ClashImgPath2=#@#\vpn-1.png</span><br><span class="line">ClashLinkText=clash</span><br><span class="line">ClashAppPath=!Execute ["D:\OperationTools\Clash.for.Windows-0.20.39-win\Clash for Windows"]</span><br><span class="line"></span><br><span class="line">VmwareImgPath1=#@#\vm-2.png</span><br><span class="line">VmwareImgPath2=#@#\vm-2.png</span><br><span class="line">VmwareLinkText=vmware</span><br><span class="line">VmwareAppPath=!Execute ["D:\installsoft\VM\vmware.exe"]</span><br><span class="line"></span><br><span class="line">XtermImgPath1=#@#\xterm-1.png</span><br><span class="line">XtermImgPath2=#@#\xterm-2.png</span><br><span class="line">XtermLinkText=vmware</span><br><span class="line">XtermAppPath=!Execute ["D:\install\Xterm\MobaXterm\MobaXterm"]</span><br><span class="line"></span><br><span class="line">TeleImgPath1=#@#\telegram.png</span><br><span class="line">TeleImgPath2=#@#\telegram-2.png</span><br><span class="line">TeleLinkText=telegram</span><br><span class="line">TeleAppPath=!Execute ["D:\install\telegram\Telegram Desktop\Telegram.exe"]</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>æ‰“å¼€ C:\Users\Administrator\Documents\Rainmeter\Skins\Welfare\Links</p>
</li>
<li><p>è¿™æ˜¯æ¡Œé¢å›¾æ ‡çš„é…ç½®æ–‡ä»¶</p>
</li>
<li><p>ä»£ç è§£æï¼š</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[Rainmeter]</span><br><span class="line">Update=-1</span><br><span class="line">Author=Morteza Nasirivand</span><br><span class="line">DynamicWindowSize=1</span><br><span class="line">AccurateText=1</span><br><span class="line"></span><br><span class="line">[Metadata]</span><br><span class="line">Name=</span><br><span class="line">Author=</span><br><span class="line">Information=</span><br><span class="line">License=</span><br><span class="line">Version=</span><br><span class="line"></span><br><span class="line">;NOTES:</span><br><span class="line">;If you are not familiar with Rainmeter from earlier,please don't edit anything!</span><br><span class="line">;It's too complicated and sensitive,if you don't know what you doing!</span><br><span class="line"></span><br><span class="line">[Variables]</span><br><span class="line">@include=#@#Variables.inc</span><br><span class="line">IconTimeWaiting=4</span><br><span class="line">TextTimeWaiting=8</span><br><span class="line">Size1=0</span><br><span class="line">Size2=0</span><br><span class="line">Size3=0</span><br><span class="line">Size4=0</span><br><span class="line">Size5=0</span><br><span class="line">Size6=0</span><br><span class="line">Size7=0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;-------------------------------------------------------------</span><br><span class="line">;-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">;è¿™é‡Œè®¾ç½®åº•éƒ¨çš„æ°´å¹³çº¿ SolidColor=12,201,255 é¢œè‰²</span><br><span class="line">;Meter=Image: è¿™ä¸ªå‚æ•°æŒ‡å®šäº†å…ƒç´ ç±»å‹ï¼Œå³ä¸€ä¸ªå›¾åƒå…ƒç´ ï¼Œå°½ç®¡åœ¨è¿™ç§æƒ…å†µä¸‹å®ƒè¢«ç”¨æ¥è¡¨ç¤ºä¸€æ¡çº¿</span><br><span class="line">;X=20 å’Œ Y=68: å®šä¹‰äº†çº¿æ¡åœ¨å±å¹•ä¸Šçš„ä½ç½®</span><br><span class="line">;W=60 å’Œ H=3: è¿™äº›å‚æ•°å®šä¹‰äº†çº¿æ¡çš„å®½åº¦å’Œé«˜åº¦</span><br><span class="line">[MeterLine]</span><br><span class="line">Meter=Image</span><br><span class="line">X=20</span><br><span class="line">Y=68</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=12,201,255</span><br><span class="line"></span><br><span class="line">[MeterLine2]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=218,165,32</span><br><span class="line"></span><br><span class="line">[MeterLine3]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=65,105,225</span><br><span class="line"></span><br><span class="line">[MeterPython]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=218, 112, 214</span><br><span class="line"></span><br><span class="line">[MeterLine5]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=0,100,0</span><br><span class="line"></span><br><span class="line">[MeterLine6]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=178, 34, 34</span><br><span class="line"></span><br><span class="line">[MeterLine7]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=50,205,50</span><br><span class="line"></span><br><span class="line">[MeterLine8]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=48, 25, 52</span><br><span class="line"></span><br><span class="line">[MeterLine9]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=255, 127, 80</span><br><span class="line"></span><br><span class="line">[MeterLine10]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=34, 139, 34</span><br><span class="line"></span><br><span class="line">;joplin</span><br><span class="line">[MeterLine11]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=255,255,0</span><br><span class="line"></span><br><span class="line">[MeterClashLine]</span><br><span class="line">Meter=Image</span><br><span class="line">X=60r</span><br><span class="line">Y=r</span><br><span class="line">W=60</span><br><span class="line">H=3</span><br><span class="line">SolidColor=240, 128, 128</span><br><span class="line">;-------------------------------------------------------------</span><br><span class="line">;-------------------------------------------------------------</span><br><span class="line">;è¿™é‡Œè®¾ç½®å›¾æ ‡æ•ˆæœ</span><br><span class="line">;å˜é‡éƒ½ä¿å­˜åœ¨Variables.inc ä¸­ã€å¼€å¤´ä½¿ç”¨ @include=#@#Variables.inc è°ƒç”¨äº†</span><br><span class="line">;ImageName=#LinkIcon1NameAndPath# æ˜¾ç¤ºçš„å›¾ç‰‡ã€å›¾ç‰‡è·¯å¾„å­˜åœ¨å˜é‡LinkIcon1NameAndPath ä¸­</span><br><span class="line">;LeftMouseUpAction="#LinkLocationPath1#" å®šä¹‰äº†å½“ç”¨æˆ·åœ¨å›¾åƒä¸Šæ‰§è¡Œå·¦é”®ç‚¹å‡»æ—¶æ‰€æ‰§è¡Œçš„åŠ¨ä½œ</span><br><span class="line">;MouseOverAction  é¼ æ ‡æ”¾åœ¨å›¾ç‰‡ä¸Šçš„æ•ˆæœ</span><br><span class="line">;MouseLeaveAction é¼ æ ‡ç¦»å¼€å›¾ç‰‡çš„æ•ˆæœ</span><br><span class="line">;Meter=Image: è¿™ä¸ªå‚æ•°å‘Šè¯‰Rainmeterè¿™ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå›¾åƒã€‚</span><br><span class="line">;X=40 å’Œ Y=30: å®šä¹‰äº†å›¾åƒåœ¨å±å¹•ä¸Šçš„ä½ç½®ã€‚Xæ˜¯æ°´å¹³ä½ç½®ï¼ŒYæ˜¯å‚ç›´ä½ç½®</span><br><span class="line">;W=25: å®šä¹‰äº†å›¾åƒçš„å®½åº¦ã€‚</span><br><span class="line">;AntiAlias=1: è¿™ä¸ªå‚æ•°å¯ç”¨äº†å›¾åƒçš„æŠ—é”¯é½¿åŠŸèƒ½ï¼Œä½¿å›¾åƒè¾¹ç¼˜æ›´åŠ å¹³æ»‘</span><br><span class="line">;PreserveAspectRatio=1: è¿™ä¸ªå‚æ•°è®¾ç½®ä¸º1æ—¶ï¼Œä¿æŒå›¾åƒçš„é•¿å®½æ¯”ï¼Œä»¥ç¡®ä¿å›¾åƒåœ¨æ”¹å˜å¤§å°æ—¶ä¸ä¼šå¤±çœŸ</span><br><span class="line">;Group=Icons: è¿™ä¸ªå‚æ•°å°†è¯¥å›¾åƒå…ƒç´ åˆ†ç»„åˆ°ä¸€ä¸ªåä¸º "Icons" çš„ç»„ä¸­ï¼Œè¿™æœ‰åŠ©äºç®¡ç†å’Œå¸ƒå±€Rainmeterçš®è‚¤ä¸­çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">;æ‰“å¼€æˆ‘çš„ç”µè„‘</span><br><span class="line">[MeterIcon1]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon1NameAndPath#</span><br><span class="line">X=40</span><br><span class="line">Y=30</span><br><span class="line">W=30</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath1#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon1 ImageAlpha 150][!UpdateMeter MeterIcon1][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon1 ImageAlpha 255][!UpdateMeter MeterIcon1][!Redraw]</span><br><span class="line"></span><br><span class="line">;å›¾æ ‡å‡¸èµ·æ•ˆæœ</span><br><span class="line">MouseOverAction=[!SetOption MeterIcon1 ImageName "#HoverIcon1NameAndPath#"][!SetOption MeterIcon1 Y "15"][!SetOption MeterIcon1 W "50"][!UpdateMeter MeterIcon1][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon1 ImageName "#LinkIcon1NameAndPath#"][!SetOption MeterIcon1 Y "30"][!SetOption MeterIcon1 W "30"][!UpdateMeter MeterIcon1][!Redraw]</span><br><span class="line"></span><br><span class="line">;google</span><br><span class="line">[MeterIcon2]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon2NameAndPath#</span><br><span class="line">X=100</span><br><span class="line">Y=30</span><br><span class="line">W=30</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath2#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon2 ImageAlpha 150][!UpdateMeter MeterIcon2][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon2 ImageAlpha 255][!UpdateMeter MeterIcon2][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon2 ImageName "#HoverIcon2NameAndPath#"][!SetOption MeterIcon2 Y "15"][!SetOption MeterIcon2 W "50"][!UpdateMeter MeterIcon2][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon2 ImageName "#LinkIcon2NameAndPath#"][!SetOption MeterIcon2 Y "30"][!SetOption MeterIcon2 W "30"][!UpdateMeter MeterIcon2][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterIcon3]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon3NameAndPath#</span><br><span class="line">X=156</span><br><span class="line">Y=27</span><br><span class="line">W=38</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath3#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon3 ImageAlpha 150][!UpdateMeter MeterIcon3][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon3 ImageAlpha 255][!UpdateMeter MeterIcon3][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon3 ImageName "#HoverIcon3NameAndPath#"][!SetOption MeterIcon3 Y "15"][!SetOption MeterIcon3 W "50"][!UpdateMeter MeterIcon3][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon3 ImageName "#LinkIcon3NameAndPath#"][!SetOption MeterIcon3 Y "27"][!SetOption MeterIcon3 W "38"][!UpdateMeter MeterIcon3][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterPychrm]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#PythonImgPath1#</span><br><span class="line">X=215</span><br><span class="line">Y=25</span><br><span class="line">W=36</span><br><span class="line">LeftMouseUpAction="#PythonAppPath#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">MouseOverAction=[!SetOption MeterPychrm ImageName "#PythonImgPath2#"][!SetOption MeterPychrm Y "15"][!SetOption MeterPychrm W "50"][!UpdateMeter MeterPychrm][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterPychrm ImageName "#PythonImgPath1#"][!SetOption MeterPychrm Y "25"][!SetOption MeterPychrm W "38"][!UpdateMeter MeterPychrm][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterIcon5]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon5NameAndPath#</span><br><span class="line">X=272</span><br><span class="line">Y=30</span><br><span class="line">W=35</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath5#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon5 ImageAlpha 150][!UpdateMeter MeterIcon5][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon5 ImageAlpha 255][!UpdateMeter MeterIcon5][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon5 ImageName "#HoverIcon5NameAndPath#"][!SetOption MeterIcon5 Y "15"][!SetOption MeterIcon5 W "50"][!UpdateMeter MeterIcon5][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon5 ImageName "#LinkIcon5NameAndPath#"][!SetOption MeterIcon5 Y "30"][!SetOption MeterIcon5 W "35"][!UpdateMeter MeterIcon5][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterIcon6]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon6NameAndPath#</span><br><span class="line">X=340</span><br><span class="line">Y=30</span><br><span class="line">W=25</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath6#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon6 ImageAlpha 150][!UpdateMeter MeterIcon6][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon6 ImageAlpha 255][!UpdateMeter MeterIcon6][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon6 ImageName "#HoverIcon6NameAndPath#"][!SetOption MeterIcon6 Y "15"][!SetOption MeterIcon6 W "50"][!UpdateMeter MeterIcon6][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon6 ImageName "#LinkIcon6NameAndPath#"][!SetOption MeterIcon6 Y "30"][!SetOption MeterIcon6 W "30"][!UpdateMeter MeterIcon6][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterIcon7]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon7NameAndPath#</span><br><span class="line">X=400</span><br><span class="line">Y=30</span><br><span class="line">W=25</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath7#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon7 ImageAlpha 150][!UpdateMeter MeterIcon7][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon7 ImageAlpha 255][!UpdateMeter MeterIcon7][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon7 ImageName "#HoverIcon7NameAndPath#"][!SetOption MeterIcon7 Y "15"][!SetOption MeterIcon7 W "50"][!UpdateMeter MeterIcon7][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon7 ImageName "#LinkIcon7NameAndPath#"][!SetOption MeterIcon7 Y "30"][!SetOption MeterIcon7 W "30"][!UpdateMeter MeterIcon7][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterIcon8]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon8NameAndPath#</span><br><span class="line">X=460</span><br><span class="line">Y=30</span><br><span class="line">W=25</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath8#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon8 ImageAlpha 150][!UpdateMeter MeterIcon8][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon8 ImageAlpha 255][!UpdateMeter MeterIcon8][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon8 ImageName "#HoverIcon8NameAndPath#"][!SetOption MeterIcon8 Y "15"][!SetOption MeterIcon8 W "50"][!UpdateMeter MeterIcon8][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon8 ImageName "#LinkIcon8NameAndPath#"][!SetOption MeterIcon8 Y "30"][!SetOption MeterIcon8 W "30"][!UpdateMeter MeterIcon8][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterIcon9]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon9NameAndPath#</span><br><span class="line">X=520</span><br><span class="line">Y=30</span><br><span class="line">W=25</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath9#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon9 ImageAlpha 150][!UpdateMeter MeterIcon9][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon9 ImageAlpha 255][!UpdateMeter MeterIcon9][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon9 ImageName "#HoverIcon9NameAndPath#"][!SetOption MeterIcon9 Y "15"][!SetOption MeterIcon9 W "50"][!UpdateMeter MeterIcon9][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon9 ImageName "#LinkIcon9NameAndPath#"][!SetOption MeterIcon9 Y "30"][!SetOption MeterIcon9 W "30"][!UpdateMeter MeterIcon9][!Redraw]</span><br><span class="line"></span><br><span class="line">[MeterIcon10]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon10NameAndPath#</span><br><span class="line">X=580</span><br><span class="line">Y=30</span><br><span class="line">W=30</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath10#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line"></span><br><span class="line">;é€æ˜</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon10 ImageAlpha 150][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon10 ImageAlpha 255][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterIcon10 ImageName "#HoverIcon10NameAndPath#"][!SetOption MeterIcon10 Y "15"][!SetOption MeterIcon10 W "50"][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon10 ImageName "#LinkIcon10NameAndPath#"][!SetOption MeterIcon10 Y "30"][!SetOption MeterIcon10 W "30"][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line"></span><br><span class="line">;joplin</span><br><span class="line">[MeterIcon11]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#LinkIcon11NameAndPath#</span><br><span class="line">X=640</span><br><span class="line">Y=30</span><br><span class="line">W=30</span><br><span class="line">LeftMouseUpAction="#LinkLocationPath11#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line"></span><br><span class="line">;é€æ˜</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon10 ImageAlpha 150][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon10 ImageAlpha 255][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line"></span><br><span class="line">;å›¾æ ‡å˜å¤§å˜å°çš„æ•ˆæœ</span><br><span class="line">MouseOverAction=[!SetOption MeterIcon11 ImageName "#HoverIcon11NameAndPath#"][!SetOption MeterIcon11 Y "15"][!SetOption MeterIcon11 W "50"][!UpdateMeter MeterIcon11][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterIcon11 ImageName "#LinkIcon11NameAndPath#"][!SetOption MeterIcon11 Y "30"][!SetOption MeterIcon11 W "30"][!UpdateMeter MeterIcon11][!Redraw]</span><br><span class="line"></span><br><span class="line">;clash</span><br><span class="line">[MeterClash]</span><br><span class="line">Meter=Image</span><br><span class="line">ImageName=#ClashImgPath1#</span><br><span class="line">X=700</span><br><span class="line">Y=30</span><br><span class="line">W=30</span><br><span class="line">;LeftMouseUpAction é¼ æ ‡å·¦é”®ç‚¹å‡»çš„åŠ¨ä½œ-è¿è¡Œexe</span><br><span class="line">LeftMouseUpAction="#ClashAppPath#"</span><br><span class="line">AntiAlias=1</span><br><span class="line">PreserveAspectRatio=1</span><br><span class="line">Group=Icons</span><br><span class="line"></span><br><span class="line">;é€æ˜</span><br><span class="line">;MouseOverAction=[!SetOption MeterIcon10 ImageAlpha 150][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line">;MouseLeaveAction=[!SetOption MeterIcon10 ImageAlpha 255][!UpdateMeter MeterIcon10][!Redraw]</span><br><span class="line"></span><br><span class="line">MouseOverAction=[!SetOption MeterClash ImageName "#ClashImgPath2#"][!SetOption MeterClash Y "15"][!SetOption MeterClash W "50"][!UpdateMeter MeterClash][!Redraw]</span><br><span class="line">MouseLeaveAction=[!SetOption MeterClash ImageName "#ClashImgPath1#"][!SetOption MeterClash Y "30"][!SetOption MeterClash W "30"][!UpdateMeter MeterClash][!Redraw]</span><br><span class="line">;-------------------------------------------------------------</span><br><span class="line">;-------------------------------------------------------------</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œæ›´æ”¹è‡ªå·±éœ€è¦çš„é“¾æ¥å’Œå›¾æ ‡è·¯å¾„å³å¯ï¼Œ ï¼›å·ä¸ºæ³¨é‡Š</strong></p>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>rainmeter</tag>
      </tags>
  </entry>
  <entry>
    <title>windowså’Œofficeå¥—é¤æ¿€æ´»å·¥å…·</title>
    <url>/looking/41ec75e8.html</url>
    <content><![CDATA[<h1 id="æ­¤æ–‡ç« åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š"><a href="#æ­¤æ–‡ç« åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š" class="headerlink" title="æ­¤æ–‡ç« åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š"></a>æ­¤æ–‡ç« åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</h1><ul>
<li>Mirosoftå¥—é¤æ¿€æ´»å·¥å…·</li>
<li>Windowsç³»ç»Ÿæ¿€æ´»å·¥å…·</li>
</ul>
<h2 id="Mirosoftå¥—é¤æ¿€æ´»å·¥å…·"><a href="#Mirosoftå¥—é¤æ¿€æ´»å·¥å…·" class="headerlink" title="Mirosoftå¥—é¤æ¿€æ´»å·¥å…·"></a>Mirosoftå¥—é¤æ¿€æ´»å·¥å…·</h2><ol>
<li><a href="https://otp.landian.vip/zh-cn/download.html">ä¸‹è½½:<strong>Office Tool Plus</strong></a></li>
<li>é€‰æ‹©å¯¹åº”çš„é•œåƒå’Œå¯¹åº”çš„ç‰ˆæœ¬ç‚¹å‡»ä¸‹è½½å³å¯ï¼š<br><img src="https://pic.imgdb.cn/item/66804492d9c307b7e9181107.png" alt="å®˜ç½‘"></li>
<li>ä¸‹è½½å®‰è£…å‹ç¼©åŒ…åè§£å‹ï¼Œæ‰¾åˆ° <strong>Office Tool Plus.exe</strong> å³é”®ç®¡ç†å‘˜è¿è¡Œï¼š<br><img src="https://pic.imgdb.cn/item/66804546d9c307b7e918f812.png" alt="è§£å‹åŒ…çš„æ–‡ä»¶"></li>
<li>æ‰“å¼€åº”ç”¨åã€é€‰æ‹©éƒ¨ç½²çš„äº§å“ï¼š<br><img src="https://pic.imgdb.cn/item/66804676d9c307b7e91a229b.png" alt="é€‰æ‹©éƒ¨ç½²çš„äº§å“"></li>
<li>æ¿€æ´»</li>
</ol>
<ul>
<li>æ–¹æ³•1ï¼š<br><img src="https://pic.imgdb.cn/item/66804782d9c307b7e91b7037.png" alt="æ¿€æ´»äº§å“"></li>
<li>æ–¹æ³•2ï¼š<br>å¦‚æœæ–¹æ³•1æ¿€æ´»å¤±è´¥ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨æ–¹æ³•2æ¿€æ´»ï¼š<br>åœ¨å·¥å…·ä¸­æŒ‰ __ctrl+shift+p__ï¼Œå†è¾“å…¥ <strong>ospp /insLicID MondoVolume /sethst:kms.loli.best /setprt:1688 /act</strong><br><img src="https://pic.imgdb.cn/item/66804924d9c307b7e91cf6be.png" alt="æ¿€æ´»æ–¹æ³•2"></li>
</ul>
<ol start="6">
<li>æ‰“å¼€ç›¸åº”çš„äº§å“æŸ¥çœ‹æ˜¯å¦å·²æ¿€æ´»</li>
</ol>
<hr>
<h2 id="Windowsç³»ç»Ÿæ¿€æ´»å·¥å…·"><a href="#Windowsç³»ç»Ÿæ¿€æ´»å·¥å…·" class="headerlink" title="Windowsç³»ç»Ÿæ¿€æ´»å·¥å…·"></a>Windowsç³»ç»Ÿæ¿€æ´»å·¥å…·</h2><ul>
<li>è¿™æ˜¯ä¸€ä¸ªgithubå¼€æºçš„é¡¹ç›®ï¼Œè·å¾—äº†84.6k stat<br><a href="https://github.com/massgravel/Microsoft-Activation-Scripts">åŸé¡¹ç›®åœ°å€</a><br><img src="https://camo.githubusercontent.com/4de5ba22ebf14d7e4d9a63b770d2ac02c2958f92b0c045ba4ce8b86c6e216f68/68747470733a2f2f6d61737367726176652e6465762f696d672f6c6f676f5f736d616c6c2e706e67" alt="githubå›¾æ ‡"><br><strong>æ­¤è½¯ä»¶æ˜¯ç”±GitHubæ‰˜ç®¡ï¼Œå¹¶å·²ç»è·å–æœ€è¿‘æ›´æ–°ã€‚æ¿€æ´»å·¥å…·é›†åˆäº†KMS38/HWID/æ¿€æ´»180å¤©ç­‰ç­‰ã€‚è¿˜å¯ä»¥æ¿€æ´»Windows OfficeåŠå…¬è½¯ä»¶ï¼Œæœ¬åšå®¢æ¨èä½¿ç”¨HWIDæ–¹å¼æ¿€æ´»ç³»ç»Ÿã€‚</strong></li>
</ul>
<h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><ul>
<li>æ–¹æ³•ä¸€ï¼š</li>
</ul>
<ol>
<li>PowerShell å‘½ä»¤è¡Œå®‰è£… (<strong>æ¨è</strong>)<blockquote>
<p>æ‰“å¼€ä½ çš„ Windowsï¼Œå³é”®å•å‡» Windows å¼€å§‹èœå•å¹¶é€‰æ‹© PowerShell æˆ–ç»ˆç«¯ï¼ˆä¸æ˜¯ CMDï¼‰ã€‚å¤åˆ¶å¹¶ç²˜è´´å¦‚ä¸‹ä»£ç ï¼Œç„¶åæŒ‰å›è½¦é”®ï¼š<br><img src="https://pic.imgdb.cn/item/66804f47d9c307b7e92446e6.png" alt="powershell"></p>
</blockquote>
<figure class="highlight powershell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">irm</span> https://get.activated.win | <span class="built_in">iex</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœç¬¬ä¸€æ¬¡æ‰§è¡ŒæŠ¥é”™ï¼Œå…³é—­ååœ¨æ‰§è¡Œå³å¯</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>æ‰§è¡Œå‘½ä»¤åä¼šå¼¹å‡ºçª—å£ï¼š<br><img src="https://pic.imgdb.cn/item/66804f47d9c307b7e9244713.png" alt="çª—å£"></li>
<li>æŒ‰ç…§ä¸Šå›¾é€‰æ‹©ç›¸åº”<strong>æ•°å­—</strong>çš„æ¿€æ´»æ–¹å¼å³å¯</li>
</ol>
<ul>
<li>æ–¹æ³•äºŒï¼šï¼ˆä¸å»ºè®®ï¼‰</li>
</ul>
<ol>
<li>ä¸‹è½½æºæ–‡ä»¶ <blockquote>
<p>ä» GitHub ä¸Šä¸‹è½½å¼€æºæ–‡ä»¶ã€‚<br>è§£å‹ç¼©ä¸‹è½½çš„ zip æ–‡ä»¶ã€‚<br>åœ¨è§£å‹çš„æ–‡ä»¶ä¸­æ‰¾åˆ°åä¸º All-In-One-Version çš„æ–‡ä»¶å¤¹ã€‚<br>è¿è¡Œåä¸º MAS_AIO.cmd çš„æ–‡ä»¶ã€‚<br>æŒ‰ç…§å±å¹•ä¸Šçš„è¯´æ˜å³å¯è½»æ¾æ¿€æ´»æ‚¨çš„è½¯ä»¶ã€‚<br><img src="https://pic.imgdb.cn/item/66805084d9c307b7e92567a5.png" alt="githubæºæ–‡ä»¶"></p>
</blockquote>
</li>
</ol>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>office</tag>
      </tags>
  </entry>
  <entry>
    <title>vmwareè™šæ‹Ÿæœºç½‘ç»œé…ç½®</title>
    <url>/looking/300f2b.html</url>
    <content><![CDATA[<h2 id="vmwarme-ç½‘ç»œç±»å‹"><a href="#vmwarme-ç½‘ç»œç±»å‹" class="headerlink" title="vmwarme ç½‘ç»œç±»å‹"></a>vmwarme ç½‘ç»œç±»å‹</h2><blockquote>
<p>VMwareè™šæ‹Ÿæœºæœ‰ä¸‰ç§ç½‘ç»œæ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯<strong>Bridged(æ¡¥æ¥æ¨¡å¼)<strong>ã€</strong>NAT(ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼)<strong>ã€</strong>Host-only(ä¸»æœºæ¨¡å¼)</strong><br>VMware workstationå®‰è£…å¥½ä¹‹åä¼šå¤šå‡ºä¸¤ä¸ªç½‘ç»œè¿æ¥,åˆ†åˆ«æ˜¯:<br><strong>VMware Network Adapter VMnet1</strong><br><strong>VMware Network Adapter VMnet8</strong><br>ä¸Šé¢è¿™ä¸¤ä¸ªæ˜¯å¯ä»¥åœ¨ä¸»æœºçš„ç½‘ç»œè¿æ¥ä¸­å¯ä»¥æŸ¥çœ‹åˆ°çš„ï¼Œ<br>è¿˜æœ‰ä¸€ä¸ªæ˜¯<strong>VMnet0</strong>ï¼Œå¯ä»¥åœ¨virtual network editorä¸­çœ‹åˆ°<br>è¿™ä¸‰ä¸ªè™šæ‹Ÿç½‘ç»œéƒ½æ˜¯VMwareå®‰è£…å¥½ä¹‹åè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ã€‚</p>
<blockquote>
<p>å…¶ä¸­VMnet0ç”¨äºBridgedæ¨¡å¼ï¼ŒVMnet1ç”¨äºHost-onlyæ¨¡å¼ï¼ŒVmnet8ç”¨äºNATæ¨¡å¼ã€‚VMnet8å’ŒVMnet1æä¾›DHCPæœåŠ¡ï¼ŒVMnet0é»˜è®¤åˆ™ä¸æä¾›ã€‚</p>
</blockquote>
</blockquote>
<p><strong>å›¾ä¸€</strong><br><img src="https://pic.imgdb.cn/item/667eddecd9c307b7e93831e0.png" alt="bridged" title="å›¾ä¸€"></p>
<h2 id="1-Bridged-æ¡¥æ¥æ¨¡å¼-VMnet0"><a href="#1-Bridged-æ¡¥æ¥æ¨¡å¼-VMnet0" class="headerlink" title="1. Bridged æ¡¥æ¥æ¨¡å¼ (VMnet0)"></a>1. Bridged æ¡¥æ¥æ¨¡å¼ (VMnet0)</h2><blockquote>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒVMWareè™šæ‹Ÿå‡ºæ¥çš„æ“ä½œç³»ç»Ÿå°±åƒæ˜¯å±€åŸŸç½‘ä¸­çš„ä¸€å°<strong>ç‹¬ç«‹çš„ä¸»æœº</strong>ï¼Œå®ƒå¯ä»¥è®¿é—®ç½‘å†…ä»»ä½•ä¸€å°æœºå™¨ï¼Œä½ éœ€è¦æ‰‹å·¥ä¸ºè™šæ‹Ÿç³»ç»Ÿé…ç½®IPåœ°å€ã€å­ç½‘æ©ç ï¼Œè€Œä¸”è¿˜è¦å’Œå®¿ä¸»æœºå™¨å¤„äºåŒç½‘æ®µï¼Œè¿™æ ·è™šæ‹Ÿç³»ç»Ÿæ‰èƒ½å’Œå®¿ä¸»æœºå™¨è¿›è¡Œé€šä¿¡ï¼Œè™šæ‹Ÿç³»ç»Ÿå’Œå®¿ä¸»æœºå™¨çš„å…³ç³»ï¼Œå°±åƒè¿æ¥åœ¨åŒä¸€ä¸ªHubä¸Šçš„ä¸¤å°ç”µè„‘ã€‚ä»ç½‘ç»œæŠ€æœ¯ä¸Šç†è§£ç›¸å½“äºåœ¨å®¿ä¸»æœºå‰ç«¯åŠ è®¾äº†ä¸€ä¸ªè™šæ‹Ÿäº¤æ¢æœºï¼Œç„¶åå®¿ä¸»æœºå’Œæ‰€æœ‰è™šæ‹Ÿæœºå…±äº«è¿™ä¸ªäº¤æ¢æœºã€‚</p>
</blockquote>
<ul>
<li>å¦‚æœä½ æƒ³åˆ©ç”¨VMWareåœ¨å±€åŸŸç½‘å†…æ–°å»ºä¸€ä¸ªè™šæ‹ŸæœåŠ¡å™¨ï¼Œä¸ºå±€åŸŸç½‘ç”¨æˆ·æä¾›ç½‘ç»œæœåŠ¡ï¼Œå°±åº”è¯¥é€‰æ‹©æ¡¥æ¥æ¨¡å¼ã€‚</li>
</ul>
<h3 id="1-1-æ¡¥æ¥æ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®"><a href="#1-1-æ¡¥æ¥æ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®" class="headerlink" title="1.1 æ¡¥æ¥æ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®"></a>1.1 æ¡¥æ¥æ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®</h3><blockquote>
<ol>
<li>è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®ï¼šæ¡¥æ¥æ¨¡å¼ï¼ˆé€‰æ‹©å›¾ä¸€ä¸­çš„æ¡¥æ¥æ¨¡å¼ï¼‰</li>
<li>æŸ¥çœ‹æœ¬æœºçš„ä»¥å¤ªç½‘ç½‘ç»œè®¾ç½®ï¼šipconfig </li>
<li>é…ç½®è™šæ‹Ÿæœºç½‘ç»œï¼š<ul>
<li>vim /etc/sysconfig/network-scripts/ifcfg-eth0</li>
<li>ipåœ°å€å’Œæœ¬æœºåŒä¸€ä¸ªç½‘æ®µ</li>
<li>ç½‘å…³åœ°å€ã€å­ç½‘æ©ç ã€DNSå’Œæœ¬æœºä¸€æ ·å³å¯</li>
<li>é‡å¯è™šæ‹Ÿæœºç½‘å¡</li>
<li>æµ‹è¯•ï¼šping æœ¬æœºæˆ–å¤–ç½‘</li>
</ul>
</li>
</ol>
</blockquote>
<h2 id="2-NAT-ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼-VMnet8"><a href="#2-NAT-ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼-VMnet8" class="headerlink" title="2. NAT ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼ (VMnet8)"></a>2. NAT ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼ (VMnet8)</h2><blockquote>
<p>NATï¼ˆNetwork Address Translationï¼‰ç½‘ç»œåœ°å€è½¬æ¢ï¼Œæ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œå®ƒå…è®¸ä¸€ä¸ªç½‘ç»œä¸­çš„è®¡ç®—æœºé€šè¿‡ä¸€ä¸ªå…¬å…±ç½‘ç»œï¼ˆå¦‚äº’è”ç½‘ï¼‰æ¥é€šä¿¡ã€‚<br>NATæŠ€æœ¯é€šè¿‡å°†ä¸€ä¸ªç§æœ‰IPåœ°å€è½¬æ¢ä¸ºä¸€ä¸ªå…¬å…±IPåœ°å€æ¥å®ç°é€šä¿¡ã€‚<br>NATæŠ€æœ¯å°†ä¸€ä¸ªç§æœ‰IPåœ°å€è½¬æ¢ä¸ºä¸€ä¸ªå…¬å…±IPåœ°å€æ¥å®ç°é€šä¿¡ã€‚<br>è¿™é‡Œçš„è™šæ‹ŸæœºNETæ¨¡å¼ï¼š</p>
<blockquote>
<p>å°±æ˜¯è®©è™šæ‹Ÿç³»ç»Ÿå€ŸåŠ©NATçš„åŠŸèƒ½ï¼Œé€šè¿‡å®¿ä¸»æœºæ‰€åœ¨çš„ç½‘ç»œæ¥è®¿é—®å…¬ç½‘ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹å®¿ä¸»æœºæˆä¸ºåŒç½‘å¡ä¸»æœºï¼ŒåŒæ—¶å‚ä¸ç°æœ‰çš„å®¿ä¸»å±€åŸŸç½‘å’Œæ–°å»ºçš„è™šæ‹Ÿå±€åŸŸç½‘ï¼Œä½†ç”±äºåŠ è®¾äº†ä¸€ä¸ªè™šæ‹Ÿçš„NATæœåŠ¡å™¨ï¼Œä½¿å¾—è™šæ‹Ÿå±€åŸŸç½‘å†…çš„è™šæ‹Ÿæœºåœ¨å¯¹å¤–è®¿é—®æ—¶ï¼Œä½¿ç”¨çš„åˆ™æ˜¯å®¿ä¸»æœºçš„IPåœ°å€ï¼Œè¿™æ ·ä»å¤–éƒ¨ç½‘ç»œæ¥çœ‹ï¼Œåªèƒ½çœ‹åˆ°å®¿ä¸»æœºï¼Œå®Œå…¨çœ‹ä¸åˆ°æ–°å»ºçš„è™šæ‹Ÿå±€åŸŸç½‘ã€‚</p>
</blockquote>
</blockquote>
<blockquote>
<p>é‡‡ç”¨NATæ¨¡å¼æœ€å¤§çš„ä¼˜åŠ¿æ˜¯è™šæ‹Ÿç³»ç»Ÿæ¥å…¥äº’è”ç½‘éå¸¸ç®€å•ï¼Œä½ ä¸éœ€è¦è¿›è¡Œä»»ä½•å…¶ä»–çš„é…ç½®ï¼Œåªéœ€è¦å®¿ä¸»æœºå™¨èƒ½è®¿é—®äº’è”ç½‘å³å¯ã€‚</p>
</blockquote>
<ul>
<li>å¦‚æœä½ æƒ³åˆ©ç”¨VMWareå®‰è£…ä¸€ä¸ªæ–°çš„è™šæ‹Ÿç³»ç»Ÿï¼Œåœ¨è™šæ‹Ÿç³»ç»Ÿä¸­ä¸ç”¨è¿›è¡Œä»»ä½•æ‰‹å·¥é…ç½®å°±èƒ½ç›´æ¥è®¿é—®äº’è”ç½‘ï¼Œå»ºè®®ä½ é‡‡ç”¨NATæ¨¡å¼ã€‚</li>
</ul>
<h3 id="2-1-NATæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®"><a href="#2-1-NATæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®" class="headerlink" title="2.1 NATæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®"></a>2.1 NATæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®</h3><blockquote>
<ol>
<li>æ£€æŸ¥å®¿ä¸»æœºçš„VMware DHCP Service å’ŒVMwareNAT Serviceä¸¤ä¸ªæœåŠ¡æ˜¯å¦å¯åŠ¨ï¼š<br><img src="https://pic.imgdb.cn/item/667ee2b1d9c307b7e94130f2.png" alt="ä»»åŠ¡ç®¡ç†å™¨"></li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>è™šæ‹Ÿæœºç½‘ç»œé€‰æ‹©è®¾ç½®ï¼šNATæ¨¡å¼ï¼ˆé€‰æ‹©å›¾ä¸€ä¸­çš„NATæ¨¡å¼ï¼‰</li>
<li>è™šæ‹Ÿæœºä¸­ç½‘ç»œé…ç½®ï¼šå› ä¸ºNATæœ‰DHCPæœåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†BOOTPROTOå‚æ•°è®¾ç½®ä¸ºdhcpå°±å¯ä»¥äº†ï¼Œç”±dhcpæœåŠ¡å™¨åˆ†é…IPåœ°å€ã€‚</li>
<li>æ³¨æ„å¦‚æœè™šæ‹Ÿæœºä¸­ç½‘å¡é…ç½®ä¸­æœ‰ <strong>ONBOOT</strong> å‚æ•°ä¸ºnoï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºç½‘å¡ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¯åŠ¨ç½‘å¡ã€å¯ä»¥ç›´æ¥æ³¨é”€æ‰</li>
</ol>
</blockquote>
<ul>
<li><p>é»˜è®¤æƒ…å†µä¸‹VMwareå’Œè™šæ‹Ÿæœºçš„é…ç½®éƒ½ä¸éœ€è¦ä¿®æ”¹ï¼Œæ‰€ä»¥NATæ¨¡å¼æ˜¯æœ€ç®€å•çš„</p>
</li>
<li><p>é»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨åˆ†é…ï¼Œå½“ç„¶ä½ ä¹Ÿä¹Ÿå¯ä»¥è‡ªè¡Œé…ç½®ç½‘æ®µå’Œç½‘å…³ã€å¦‚ä¸‹å›¾ï¼š<br><img src="https://pic.imgdb.cn/item/667ee8a1d9c307b7e94ab6ac.png" alt="é…ç½®è‡ªå®šä¹‰netç½‘ç»œ"></p>
</li>
<li><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœå°†æœ¬æœºçš„<strong>VMnet8</strong>ç½‘å¡ç¦æ‰çš„è¯å°±æ— æ³•åœ¨æœ¬æœºè¿œç¨‹ï¼ˆsshï¼‰åˆ°è™šæ‹Ÿä¸»æœºäº†ã€ä½†æ˜¯å¯ä»¥pingé€š<br>Â· <em>è¿™å°±æ˜¯NETæ¨¡å¼ã€åˆ©ç”¨è™šæ‹Ÿçš„NETè®¾å¤‡ä»¥åŠè™šæ‹Ÿçš„DHCPæœåŠ¡å™¨æ¥ä½¿è™šæ‹Ÿæœºè¿æ¥å¤–ç½‘ã€è€ŒVMnet8è™šæ‹Ÿç½‘å¡æ˜¯ç”¨æ¥ä¸è™šæ‹Ÿæœºé€šä¿¡çš„</em></p>
</li>
</ul>
<h2 id="3-Host-only-ä»…ä¸»æœºæ¨¡å¼-VMnet1"><a href="#3-Host-only-ä»…ä¸»æœºæ¨¡å¼-VMnet1" class="headerlink" title="3. Host-only ä»…ä¸»æœºæ¨¡å¼ (VMnet1)"></a>3. Host-only ä»…ä¸»æœºæ¨¡å¼ (VMnet1)</h2><ul>
<li>åœ¨æŸäº›ç‰¹æ®Šçš„ç½‘ç»œè°ƒè¯•ç¯å¢ƒä¸­ï¼Œè¦æ±‚å°†çœŸå®ç¯å¢ƒå’Œè™šæ‹Ÿç¯å¢ƒéš”ç¦»å¼€ï¼Œè¿™æ—¶ä½ å°±å¯é‡‡ç”¨host-onlyæ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹å®¿ä¸»æœºä¸Šçš„æ‰€æœ‰è™šæ‹Ÿæœºæ˜¯å¯ä»¥ç›¸äº’é€šä¿¡çš„ï¼Œä½†è™šæ‹Ÿæœºå’ŒçœŸå®çš„ç½‘ç»œæ˜¯è¢«éš”ç¦»å¼€çš„ã€‚</li>
<li>åœ¨è¿™ç§æ¨¡å¼ä¸‹æ–°å»ºäº†ä¸€ä¸ªç”±æ‰€æœ‰è™šæ‹Ÿæœºä¸å®¿ä¸»æœºæ‰€æ„æˆçš„å±€åŸŸç½‘ï¼Œä½†è¯¥å±€åŸŸç½‘ä¸å®¿ä¸»æœºæœ¬èº«æ‰€å¤„çš„ç°æœ‰å±€åŸŸç½‘æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå¦‚æœä¸åšé¢å¤–è·¯ç”±è®¾ç½®ï¼Œè¿™ä¸¤ä¸ªå±€åŸŸç½‘ä¹‹é—´ä¸ä¼šè¿é€šï¼Œå› æ­¤æ–°å»ºçš„å±€åŸŸç½‘å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå•ç‹¬ä»å±äºå½“å‰å®¿ä¸»æœºçš„ç§æœ‰ç½‘ç»œï¼Œå…¶æˆå‘˜ä¸ºå½“å‰å®¿ä¸»æœºå’Œç›¸å…³çš„æ‰€æœ‰è™šæ‹Ÿæœºã€‚</li>
<li>ä»ç½‘ç»œæŠ€æœ¯ä¸Šè®²ç›¸å½“äºä¸ºå®¿ä¸»æœºå¢æ·»äº†ä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œè®©å®¿ä¸»æœºå˜æˆä¸€å°åŒç½‘å¡ä¸»æœºï¼ˆå®¿ä¸»ç½‘å¡+è™šæ‹Ÿç½‘å¡ï¼‰ã€‚åŒæ—¶åœ¨å®¿ä¸»æœºåç«¯åŠ è®¾ä¸€ä¸ªè™šæ‹Ÿäº¤æ¢æœºï¼Œè®©å®¿ä¸»æœºå’Œæ‰€æœ‰è™šæ‹Ÿæœºæ„æˆå¦ä¸€ä¸ªè™šæ‹Ÿçš„å±€åŸŸç½‘ã€‚ç”±äºå…·å¤‡åŒç½‘å¡ï¼Œå®¿ä¸»æœºå¯åŒæ—¶å‚ä¸ä¸¤ä¸ªå±€åŸŸç½‘ï¼ˆç°æœ‰çš„å®¿ä¸»å±€åŸŸç½‘+æ–°å»ºçš„è™šæ‹Ÿå±€åŸŸç½‘ï¼‰ï¼Œåªä¸è¿‡ç¼ºçœæƒ…å†µä¸‹ä¸¤ä¸ªå±€åŸŸç½‘ä¸è¿é€šã€‚</li>
<li><strong>å¦‚æœä½ æƒ³åˆ©ç”¨VMWareåˆ›å»ºä¸€ä¸ªä¸ç½‘å†…å…¶ä»–æœºå™¨ç›¸éš”ç¦»çš„è™šæ‹Ÿç³»ç»Ÿï¼Œè¿›è¡ŒæŸäº›ç‰¹æ®Šçš„ç½‘ç»œè°ƒè¯•å·¥ä½œï¼Œå¯ä»¥é€‰æ‹©host-onlyæ¨¡å¼ã€‚</strong></li>
</ul>
<h3 id="3-1-Host-onlyæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®"><a href="#3-1-Host-onlyæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®" class="headerlink" title="3.1 Host-onlyæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®"></a>3.1 Host-onlyæ¨¡å¼ä¸‹çš„ç½‘ç»œè®¾ç½®</h3><ul>
<li>Host-onlyæ¨¡å¼ä¸‹æ˜¯ç”±VMnet1ç½‘å¡è´Ÿè´£çš„ï¼ŒVMnet1æä¾›DHCPæœåŠ¡ï¼Œæ‰€ä»¥è™šæ‹Ÿæœºä¸­æˆ‘ä»¬ä¸éœ€æ‰‹åŠ¨è®¾å®šIP<blockquote>
<ol>
<li>è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®ï¼šHost-onlyæ¨¡å¼å³å¯ï¼ˆé€‰æ‹©å›¾ä¸€ä¸­çš„Host-onlyæ¨¡å¼ï¼‰</li>
<li>é…ç½®å¥½åä¸»æœºå°±èƒ½pingé€šè™šæ‹Ÿæœºï¼Œä½†è™šæ‹Ÿæœºpingä¸»æœºæ—¶å°±è¦æ³¨æ„äº†ï¼Œä¸æ˜¯å»pingå®¿ä¸»ç½‘å¡äº§ç”Ÿçš„IPåœ°å€ï¼Œè€Œæ˜¯ç”±è™šæ‹Ÿç½‘å¡VMnet1äº§ç”Ÿçš„IPåœ°å€ï¼Œå®¿ä¸»æœºå‘½ä»¤è¡Œä¸­è¾“å…¥ipconfigå°±å¯çœ‹åˆ°VMnet1çš„äº§ç”Ÿçš„IPåœ°å€</li>
</ol>
</blockquote>
</li>
</ul>
<p><a href="https://blog.51cto.com/u_15169172/2710721">å¯å‚è€ƒ: https://blog.51cto.com/u_15169172/2710721</a></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>vmwareç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‡ç­¾è¯­æ³•</title>
    <url>/looking/630f8407.html</url>
    <content><![CDATA[<h2 id="tab-åˆ†æ "><a href="#tab-åˆ†æ " class="headerlink" title="tab åˆ†æ "></a>tab åˆ†æ </h2><div class="tabs" id="æ ‡ç­¾è¯­æ³•"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="æ ‡ç­¾è¯­æ³•-1">æ ‡ç­¾è¯­æ³•</button><button type="button" class="tab " data-href="æ ‡ç­¾è¯­æ³•-2">å‚æ•°é…ç½®</button><button type="button" class="tab " data-href="æ ‡ç­¾è¯­æ³•-3">æ ·å¼é¢„è§ˆ</button><button type="button" class="tab " data-href="æ ‡ç­¾è¯­æ³•-4">æºç æ ·ä¾‹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="æ ‡ç­¾è¯­æ³•-1"><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">{% tabs Unique name, [index] %}</span><br><span class="line"></span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line"></span><br><span class="line">Any content (support inline tags too).</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">{% endtabs %}</span><br></pre></td></tr></tbody></table></figure></div><div class="tab-item-content" id="æ ‡ç­¾è¯­æ³•-2"><ol>
<li>Unique name :<ul>
<li>é€‰é¡¹å¡å—æ ‡ç­¾çš„å”¯ä¸€åç§°ï¼Œä¸å¸¦é€—å·ã€‚</li>
<li>å°†åœ¨#id ä¸­ç”¨ä½œæ¯ä¸ªæ ‡ç­¾åŠå…¶ç´¢å¼•å·çš„å‰ç¼€ã€‚</li>
<li>å¦‚æœåç§°ä¸­åŒ…å«ç©ºæ ¼ï¼Œåˆ™å¯¹äºç”Ÿæˆ#idï¼Œæ‰€æœ‰ç©ºæ ¼å°†ç”±ç ´æŠ˜å·ä»£æ›¿ã€‚</li>
<li>ä»…å½“å‰å¸–å­/é¡µé¢çš„ URL å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼</li>
</ul>
</li>
<li>[index]:<ul>
<li>æ´»åŠ¨é€‰é¡¹å¡çš„ç´¢å¼•å·ã€‚</li>
<li>å¦‚æœæœªæŒ‡å®šï¼Œå°†é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼ˆ1ï¼‰ã€‚</li>
<li>å¦‚æœ index ä¸º-1ï¼Œåˆ™ä¸ä¼šé€‰æ‹©ä»»ä½•é€‰é¡¹å¡ã€‚</li>
<li>å¯é€‰å‚æ•°ã€‚</li>
</ul>
</li>
<li>[Tab caption]:<ul>
<li>å½“å‰é€‰é¡¹å¡çš„æ ‡é¢˜ã€‚</li>
<li>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œåˆ™å¸¦æœ‰åˆ¶è¡¨ç¬¦ç´¢å¼•åç¼€çš„å”¯ä¸€åç§°å°†ç”¨ä½œåˆ¶è¡¨ç¬¦çš„æ ‡é¢˜ã€‚</li>
<li>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œä½†æŒ‡å®šäº†å›¾æ ‡ï¼Œåˆ™æ ‡é¢˜å°†ä¸ºç©ºã€‚</li>
<li>å¯é€‰å‚æ•°ã€‚</li>
</ul>
</li>
<li>[@icon]: <ul>
<li>FontAwesome å›¾æ ‡åç§°ï¼ˆå…¨åï¼Œçœ‹èµ·æ¥åƒâ€œ fas fa-fontâ€ï¼‰ - å¯ä»¥æŒ‡å®šå¸¦ç©ºæ ¼æˆ–ä¸å¸¦ç©ºæ ¼ï¼› - ä¾‹å¦‚â€™Tab caption @iconâ€™ å’Œ â€˜Tab caption@iconâ€™. - å¯é€‰å‚æ•°ã€‚</li>
</ul>
</li>
</ol></div><div class="tab-item-content" id="æ ‡ç­¾è¯­æ³•-3"><div class="note info simple"><p>ç¬¬ä¸€ç§ï¼Œé¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p>
</div>
<div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">test1 1</button><button type="button" class="tab " data-href="test1-2">test1 2</button><button type="button" class="tab " data-href="test1-3">test1 3</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>é»˜è®¤æ˜¾ç¤ºæˆ‘tab1</strong></p></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<div class="note info simple"><p>ç¬¬äºŒç§ï¼Œé¢„è®¾é€‰æ‹©ç¬¬3ä¸ªtabæ ‡ç­¾</p>
</div>
<div class="tabs" id="test2"><ul class="nav-tabs"><button type="button" class="tab " data-href="test2-1">test2 1</button><button type="button" class="tab " data-href="test2-2">test2 2</button><button type="button" class="tab  active" data-href="test2-3">test2 3</button></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content active" id="test2-3"><p><strong>é»˜è®¤æ˜¾ç¤ºæˆ‘Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<div class="note info simple"><p>ç¬¬ä¸‰ç§ï¼Œæ²¡æœ‰é¢„è®¾å€¼ï¼ˆé»˜è®¤ä¸æ˜¾ç¤ºæ ‡ç­¾å†…å®¹ã€ç‚¹å‡»åæ‰å‡ºç°ï¼‰</p>
</div>
<div class="tabs" id="test3"><ul class="nav-tabs no-default"><button type="button" class="tab " data-href="test3-1">test3 1</button><button type="button" class="tab " data-href="test3-2">test3 2</button><button type="button" class="tab " data-href="test3-3">test3 3</button></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>ç‚¹æˆ‘æ‰èƒ½æ˜¾ç¤ºå†…å®¹1.</strong></p></div><div class="tab-item-content" id="test3-2"><p><strong>ç‚¹æˆ‘æ‰èƒ½æ˜¾ç¤ºå†…å®¹2.</strong></p></div><div class="tab-item-content" id="test3-3"><p><strong>ç‚¹æˆ‘æ‰èƒ½æ˜¾ç¤ºå†…å®¹3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<div class="note info simple"><p>ç¬¬å››ç§ï¼Œè‡ªå®šä¹‰ Tab å + åªæœ‰ icon + icon å’Œ Tab å</p>
</div>
<div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">ç¬¬ä¸€ä¸ªTab</button><button type="button" class="tab " data-href="test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button><button type="button" class="tab " data-href="test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab åå­—ä¸ºç¬¬ä¸€ä¸ª Tab</strong></p></div><div class="tab-item-content" id="test4-2"><p><strong>åªæœ‰å›¾æ ‡ æ²¡æœ‰ Tab åå­—</strong></p></div><div class="tab-item-content" id="test4-3"><p><strong>åå­—+icon</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div></div><div class="tab-item-content" id="æ ‡ç­¾è¯­æ³•-4"><div class="note info simple"><ul>
<li>ç¬¬ä¸€ç§ï¼Œé¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</li>
</ul>
</div>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">{% tabs test1 %}</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**é»˜è®¤æ˜¾ç¤ºæˆ‘tab1**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">{% endtabs %}</span><br></pre></td></tr></tbody></table></figure>
<div class="note info simple"><p>ç¬¬äºŒç§ï¼Œé¢„è®¾é€‰æ‹©ç¬¬3ä¸ªtabæ ‡ç­¾</p>
</div>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">{% tabs test2, 3 %}</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**é»˜è®¤æ˜¾ç¤ºæˆ‘Tab 3.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">{% endtabs %}</span><br></pre></td></tr></tbody></table></figure>

<div class="note info simple"><p>ç¬¬ä¸‰ç§ï¼Œæ²¡æœ‰é¢„è®¾å€¼ï¼ˆé»˜è®¤ä¸æ˜¾ç¤ºæ ‡ç­¾å†…å®¹ã€ç‚¹å‡»åæ‰å‡ºç°ï¼‰</p>
</div>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">{% tabs test3, -1 %}</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**ç‚¹æˆ‘æ‰èƒ½æ˜¾ç¤ºå†…å®¹1.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**ç‚¹æˆ‘æ‰èƒ½æ˜¾ç¤ºå†…å®¹2.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**ç‚¹æˆ‘æ‰èƒ½æ˜¾ç¤ºå†…å®¹3.**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">{% endtabs %}</span><br></pre></td></tr></tbody></table></figure>

<div class="note info simple"><p>ç¬¬å››ç§ï¼Œè‡ªå®šä¹‰ Tab å + åªæœ‰ icon + icon å’Œ Tab å</p>
</div>
<figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">{% tabs test4 %}</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**tab åå­—ä¸ºç¬¬ä¸€ä¸ª Tab**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**åªæœ‰å›¾æ ‡ æ²¡æœ‰ Tab åå­—**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line"></span><br><span class="line"><span class="strong">**åå­—+icon**</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">{% endtabs %}</span><br></pre></td></tr></tbody></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo,è¯­æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>wiresharkå…¥é—¨</title>
    <url>/looking/8e749f40.html</url>
    <content><![CDATA[<p><img src="https://www.wireshark.org/assets/img/sharkbytes.jpeg" alt="å®˜ç½‘å›¾æ ‡"><br><a href="https://www.wireshark.org/#downloadLink">å®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttps://www.wireshark.org/#downloadLink</a></p>
<p class="p center log large">01.WireSharkä»‹ç»</p>
<ul>
<li>wiresharkæ˜¯éå¸¸æµè¡Œçš„ç½‘ç»œå°åŒ…åˆ†æè½¯ä»¶ï¼Œç®€ç§°å°é²¨é±¼ï¼ŒåŠŸèƒ½ååˆ†å¼ºå¤§ã€‚</li>
<li>å¯ä»¥æˆªå–å„ç§ç½‘ç»œå°åŒ…ï¼Œæ˜¾ç¤ºç½‘ç»œå°åŒ…çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li>å¯¹åº”çš„ï¼Œlinuxä¸‹çš„æŠ“åŒ…å·¥å…·æ˜¯ tcpdump</li>
</ul>
<p class="p center log large">02.WireSharkæŠ“åŒ…åŸç†</p>
<blockquote>
<p>Wiresharkä½¿ç”¨WinPCAPä½œä¸ºæ¥å£ï¼Œç›´æ¥ä¸ç½‘å¡è¿›è¡Œæ•°æ®æŠ¥æ–‡äº¤æ¢<br>Wiresharkä½¿ç”¨çš„ç¯å¢ƒå¤§è‡´åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ç”µè„‘ç›´è¿ç½‘ç»œçš„å•æœºç¯å¢ƒï¼Œå¦å¤–ä¸€ç§å°±æ˜¯åº”ç”¨æ¯”è¾ƒå¤šçš„ç½‘ç»œç¯å¢ƒï¼Œå³è¿æ¥äº¤æ¢æœºçš„æƒ…å†µ<br>å•æœºæƒ…å†µä¸‹ï¼šWiresharkç›´æ¥æŠ“å–æœ¬æœºç½‘å¡çš„ç½‘ç»œæµé‡ã€‚<br>äº¤æ¢æœºæƒ…å†µä¸‹ï¼šWiresharké€šè¿‡ç«¯å£é•œåƒã€ARPæ¬ºéª—ç­‰æ–¹å¼è·å–å±€åŸŸç½‘ä¸­çš„ç½‘ç»œæµé‡<br>ç«¯å£é•œåƒï¼šåˆ©ç”¨äº¤æ¢æœºçš„æ¥å£ï¼Œå°†å±€åŸŸç½‘çš„ç½‘ç»œæµé‡è½¬å‘åˆ°æŒ‡å®šç”µè„‘çš„ç½‘å¡ä¸Šã€‚<br>ARPæ¬ºéª—ï¼šäº¤æ¢æœºæ ¹æ®MACåœ°å€è½¬å‘æ•°æ®ï¼Œä¼ªè£…å…¶ä»–ç»ˆç«¯çš„MACåœ°å€ï¼Œä»è€Œè·å–å±€åŸŸç½‘çš„ç½‘ç»œæµé‡ã€‚</p>
</blockquote>
<p class="p center log large">03.WiresharkæŠ“åŒ…ç¤ºä¾‹</p>
<ul>
<li>å…ˆä»‹ç»ä¸€ä¸ªä½¿ç”¨wiresharkå·¥å…·æŠ“å–pingå‘½ä»¤æ“ä½œçš„ç¤ºä¾‹ï¼Œå¯ä»¥ä¸Šæ‰‹æ“ä½œæ„Ÿå—ä¸€ä¸‹æŠ“åŒ…çš„å…·ä½“è¿‡ç¨‹ã€‚</li>
</ul>
<ol>
<li>æ‰“å¼€wiresharkï¼Œä¸»ç•Œé¢å¦‚ä¸‹ï¼š<br><img src="https://pic.imgdb.cn/item/668b60a5d9c307b7e94a11bc.png" alt="ä¸»ç•Œé¢"></li>
<li>é€‰æ‹©èœå•æ ä¸Š <strong>æ•è· -&gt; é€‰é¡¹ï¼Œå‹¾é€‰WLANç½‘å¡</strong>ã€‚è¿™é‡Œéœ€è¦æ ¹æ®å„è‡ªç”µè„‘ç½‘å¡ä½¿ç”¨æƒ…å†µé€‰æ‹©ï¼Œç®€å•çš„åŠæ³•å¯ä»¥çœ‹ä½¿ç”¨çš„IPå¯¹åº”çš„ç½‘å¡<br><img src="https://pic.imgdb.cn/item/668b61ffd9c307b7e94bbfde.png" alt="é€‰æ‹©å¯¹åº”çš„ç½‘å¡å¼€å§‹æŠ“åŒ…"></li>
<li>wiresharkå¯åŠ¨åï¼Œwiresharkå¤„äºæŠ“åŒ…çŠ¶æ€ä¸­ã€‚<br><img src="https://pic.imgdb.cn/item/668b627ed9c307b7e94c7647.png" alt="wiresharkæŠ“åŒ…çŠ¶æ€"></li>
<li>æ‰§è¡Œéœ€è¦æŠ“åŒ…çš„æ“ä½œï¼Œå¦‚åœ¨cmdçª—å£ä¸‹æ‰§è¡Œ <strong>ping <a href="http://www.baidu.com/">www.baidu.com</a></strong></li>
<li>æ“ä½œå®Œæˆåç›¸å…³æ•°æ®åŒ…å°±æŠ“å–åˆ°äº†ï¼ˆç­‰å¾…pingå®Œï¼‰ï¼Œå¯ä»¥ç‚¹å‡»å·¦ä¸Šè§’çš„ <strong>åœæ­¢æ•è·</strong> æŒ‰é’®</li>
<li>ä¸ºé¿å…å…¶ä»–æ— ç”¨çš„æ•°æ®åŒ…å½±å“åˆ†æï¼Œå¯ä»¥é€šè¿‡åœ¨è¿‡æ»¤æ è®¾ç½®è¿‡æ»¤æ¡ä»¶è¿›è¡Œæ•°æ®åŒ…åˆ—è¡¨è¿‡æ»¤ï¼Œè·å–ç»“æœå¦‚ä¸‹ã€‚<ul>
<li>è¯´æ˜ï¼š<strong>ip.addr == 120.232.145.185 and icmp</strong> è¡¨ç¤ºåªæ˜¾ç¤ºICPMåè®®ä¸”ä¸»æœºIPä¸º120.232.145.185çš„æ•°æ®åŒ…ã€‚</li>
<li>è¯´æ˜ï¼šåè®®åç§°<strong>icmp</strong>è¦å°å†™ã€‚<br><img src="https://pic.imgdb.cn/item/668b64dad9c307b7e9502cfa.png" alt="è¿‡æ»¤ipåŒ…"></li>
</ul>
</li>
<li>wiresharkæŠ“åŒ…å®Œæˆï¼Œå¹¶æŠŠæœ¬æ¬¡æŠ“åŒ…æˆ–è€…åˆ†æçš„ç»“æœè¿›è¡Œä¿å­˜ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚<br><img src="https://pic.imgdb.cn/item/668b86c2d9c307b7e98d3261.png" alt="ä¿å­˜æŠ“åŒ…è¿‡ç¨‹"></li>
</ol>
<p class="p center log large">04.WiresharkæŠ“åŒ…ç•Œé¢ä»‹ç»</p>
<p><img src="https://pic.imgdb.cn/item/668b872dd9c307b7e98db60f.png" alt="wiresharkç•Œé¢ä»‹ç»"></p>
<div class="note green no-icon flat"><p>Wireshark çš„ä¸»ç•Œé¢åŒ…å«6ä¸ªéƒ¨åˆ†ï¼š</p>
</div>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">èœå•æ ï¼šç”¨äºè°ƒè¯•ã€é…ç½®</span><br><span class="line">å·¥å…·æ ï¼šå¸¸ç”¨åŠŸèƒ½çš„å¿«æ·æ–¹å¼</span><br><span class="line">è¿‡æ»¤æ ï¼šæŒ‡å®šè¿‡æ»¤æ¡ä»¶ï¼Œè¿‡æ»¤æ•°æ®åŒ…</span><br><span class="line">æ•°æ®åŒ…åˆ—è¡¨ï¼šæ ¸å¿ƒåŒºåŸŸï¼Œæ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªæ•°æ®åŒ…</span><br><span class="line">æ•°æ®åŒ…è¯¦æƒ…ï¼šæ•°æ®åŒ…çš„è¯¦ç»†æ•°æ®</span><br><span class="line">æ•°æ®åŒ…å­—èŠ‚ï¼šæ•°æ®åŒ…å¯¹åº”çš„å­—èŠ‚æµï¼ŒäºŒè¿›åˆ¶</span><br></pre></td></tr></tbody></table></figure>
<p><strong>è¯´æ˜ï¼š</strong>æ•°æ®åŒ…åˆ—è¡¨åŒºä¸­ä¸åŒçš„åè®®ä½¿ç”¨äº†ä¸åŒçš„é¢œè‰²åŒºåˆ†ã€‚åè®®é¢œè‰²æ ‡è¯†å®šä½åœ¨ <strong>èœå•æ  è§†å›¾ â€“&gt; ç€è‰²è§„åˆ™ (View-&gt;Coloring Rules)</strong></p>
<ul>
<li>å¦‚ä¸‹å›¾ï¼š<br><img src="https://pic.imgdb.cn/item/668b892ad9c307b7e990fb27.png" alt="é¢œè‰²è§„åˆ™"></li>
</ul>
<mark class="hl-label green">WireSharkä¸»è¦åˆ†ä¸ºè¿™å‡ ä¸ªç•Œé¢</mark> 
<div class="tabs" id="ç•Œé¢"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="ç•Œé¢-1">01.Display Filter(æ˜¾ç¤ºè¿‡æ»¤å™¨)</button><button type="button" class="tab " data-href="ç•Œé¢-2">02.Packet List Pane(æ•°æ®åŒ…åˆ—è¡¨)</button><button type="button" class="tab " data-href="ç•Œé¢-3">03.Packet Details Pane(æ•°æ®åŒ…è¯¦ç»†ä¿¡æ¯)</button><button type="button" class="tab " data-href="ç•Œé¢-4">04.Dissector Pane(æ•°æ®åŒ…å­—èŠ‚åŒº)</button></ul><div class="tab-contents"><div class="tab-item-content active" id="ç•Œé¢-1"><ul>
<li>ç”¨äºè®¾ç½®è¿‡æ»¤æ¡ä»¶è¿›è¡Œæ•°æ®åŒ…åˆ—è¡¨è¿‡æ»¤ã€‚</li>
<li>èœå•è·¯å¾„ï¼šåˆ†æ â€“&gt; Display Filters<br><img src="https://pic.imgdb.cn/item/668ba655d9c307b7e9c0600a.png" alt="Display Filters"></li>
</ul></div><div class="tab-item-content" id="ç•Œé¢-2"><ul>
<li>æ˜¾ç¤ºæ•è·åˆ°çš„æ•°æ®åŒ…ï¼Œæ¯ä¸ªæ•°æ®åŒ…åŒ…å«: <strong>ç¼–å·ï¼Œæ—¶é—´æˆ³ï¼Œæºåœ°å€ï¼Œç›®æ ‡åœ°å€ï¼Œåè®®ï¼Œé•¿åº¦ï¼Œä»¥åŠæ•°æ®åŒ…ä¿¡æ¯</strong></li>
<li>ä¸åŒåè®®çš„æ•°æ®åŒ…ä½¿ç”¨äº†ä¸åŒçš„é¢œè‰²åŒºåˆ†æ˜¾ç¤ºã€‚<br><img src="https://pic.imgdb.cn/item/668ba72cd9c307b7e9c24670.png" alt="å›¾9"></li>
</ul></div><div class="tab-item-content" id="ç•Œé¢-3"><ul>
<li><p>æ•°æ®åŒ…è¯¦ç»†ä¿¡æ¯é¢æ¿æ˜¯æœ€é‡è¦çš„ï¼Œç”¨æ¥æŸ¥çœ‹åè®®ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µã€‚</p>
</li>
<li><p>å„è¡Œä¿¡æ¯åˆ†åˆ«ä¸ºï¼š</p>
<blockquote>
<ol>
<li>Frame:   ç‰©ç†å±‚çš„æ•°æ®å¸§æ¦‚å†µ</li>
<li>Ethernet II: æ•°æ®é“¾è·¯å±‚ä»¥å¤ªç½‘å¸§å¤´éƒ¨ä¿¡æ¯</li>
<li>Internet Protocol Version 4: äº’è”ç½‘å±‚IPåŒ…å¤´éƒ¨ä¿¡æ¯</li>
<li>Transmission Control Protocol:  ä¼ è¾“å±‚Tçš„æ•°æ®æ®µå¤´éƒ¨ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯TCP</li>
<li>Hypertext Transfer Protocol:  åº”ç”¨å±‚çš„ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯HTTPåè®®<br><img src="https://pic.imgdb.cn/item/668ba876d9c307b7e9c40730.png" alt="å›¾10"></li>
</ol>
</blockquote>
</li>
<li><p>TCPåŒ…çš„å…·ä½“å†…å®¹ï¼šä»ä¸‹å›¾ä¸­å¯çœ‹å‡ºæ•è·åˆ°åˆ°çš„TCPåŒ…ä¸­çš„æ¯ä¸ªå­—æ®µ<br><img src="https://pic.imgdb.cn/item/668baae2d9c307b7e9c8b2ce.png" alt="å›¾11"><br><img src="https://pic.imgdb.cn/item/668bab0fd9c307b7e9c8f9e1.png" alt="å›¾12"></p>
</li>
</ul></div><div class="tab-item-content" id="ç•Œé¢-4"><ul>
<li>æŠ¥æ–‡åŸå§‹å†…å®¹ã€‚<br><img src="https://pic.imgdb.cn/item/668babe7d9c307b7e9ca0a5e.png" alt="å›¾13"></li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>


<p class="p center log large">05.Wiresharkè¿‡æ»¤å™¨è®¾ç½®</p>
<ul>
<li>åˆå­¦è€…ä½¿ç”¨wiresharkæ—¶ï¼Œå°†ä¼šå¾—åˆ°å¤§é‡çš„å†—ä½™æ•°æ®åŒ…åˆ—è¡¨ï¼Œä»¥è‡³äºå¾ˆéš¾æ‰¾åˆ°è‡ªå·±éœ€è¦æŠ“å–çš„æ•°æ®åŒ…éƒ¨åˆ†ã€‚</li>
<li>wiresharkå·¥å…·ä¸­è‡ªå¸¦äº†ä¸¤ç§ç±»å‹çš„è¿‡æ»¤å™¨ï¼Œå­¦ä¼šä½¿ç”¨è¿™ä¸¤ç§è¿‡æ»¤å™¨ä¼šå¸®åŠ©æˆ‘ä»¬åœ¨å¤§é‡çš„æ•°æ®ä¸­è¿…é€Ÿæ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ã€‚</li>
</ul>
<div class="tabs" id="è¿‡æ»¤å™¨"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="è¿‡æ»¤å™¨-1">01.æŠ“åŒ…è¿‡æ»¤å™¨</button><button type="button" class="tab " data-href="è¿‡æ»¤å™¨-2">02.æ˜¾ç¤ºè¿‡æ»¤å™¨</button></ul><div class="tab-contents"><div class="tab-item-content active" id="è¿‡æ»¤å™¨-1"><ol>
<li>å…ˆè‡ªå®šä¹‰è¿‡æ»¤å™¨</li>
</ol>
<ul>
<li>æ•è·è¿‡æ»¤å™¨çš„èœå•æ è·¯å¾„ä¸º <strong>æ•è· â€“&gt; æ•è·è¿‡æ»¤å™¨</strong>ã€‚ç”¨äºåœ¨æŠ“å–æ•°æ®åŒ…å‰è®¾ç½®ã€‚<br><img src="https://pic.imgdb.cn/item/668baf85d9c307b7e9ced4e4.png" alt="å›¾14"></li>
</ul>
<ol start="2">
<li>ä½¿ç”¨è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨<br><img src="https://pic.imgdb.cn/item/668bb047d9c307b7e9cff4eb.png" alt="å›¾15"></li>
</ol>
<ul>
<li>ip host  120.232.145.185 è¡¨ç¤ºåªæ•è·ä¸»æœºIPä¸º 120.232.145.185 çš„æ•°æ®åŒ…ã€‚</li>
</ul></div><div class="tab-item-content" id="è¿‡æ»¤å™¨-2"><ul>
<li>æ˜¾ç¤ºè¿‡æ»¤å™¨æ˜¯ç”¨äºåœ¨æŠ“å–æ•°æ®åŒ…åè®¾ç½®è¿‡æ»¤æ¡ä»¶è¿›è¡Œè¿‡æ»¤æ•°æ®åŒ…ã€‚</li>
<li>é€šå¸¸æ˜¯åœ¨æŠ“å–æ•°æ®åŒ…æ—¶è®¾ç½®æ¡ä»¶ç›¸å¯¹å®½æ³›æˆ–è€…æ²¡æœ‰è®¾ç½®å¯¼è‡´æŠ“å–çš„æ•°æ®åŒ…å†…å®¹è¾ƒå¤šæ—¶ä½¿ç”¨æ˜¾ç¤ºè¿‡æ»¤å™¨è®¾ç½®æ¡ä»¶è¿‡æ»¤ä»¥æ–¹ä¾¿åˆ†æã€‚<br><img src="https://pic.imgdb.cn/item/668ba655d9c307b7e9c0600a.png" alt="Display Filters"></li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<p class="p center log large">06.Wiresharkè¿‡æ»¤å™¨è¡¨è¾¾å¼çš„è§„åˆ™</p>
<div class="tabs" id="è¯­æ³•"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="è¯­æ³•-1">01.æŠ“åŒ…è¿‡æ»¤å™¨è¯­æ³•å’Œå®ä¾‹</button><button type="button" class="tab " data-href="è¯­æ³•-2">02.æ˜¾ç¤ºè¿‡æ»¤å™¨è¯­æ³•å’Œå®ä¾‹</button><button type="button" class="tab " data-href="è¯­æ³•-3">03. å¸¸è§ç”¨æ˜¾ç¤ºè¿‡æ»¤éœ€æ±‚åŠå…¶å¯¹åº”è¡¨è¾¾å¼</button></ul><div class="tab-contents"><div class="tab-item-content active" id="è¯­æ³•-1"><ul>
<li><strong>åœ¨è¿‡æ»¤å™¨ä¸­é…ç½®çš„è¯­æ³•</strong></li>
<li>æŠ“åŒ…è¿‡æ»¤å™¨:</li>
</ul>
<ol>
<li>ç±»å‹Typeï¼ˆhostã€netã€portï¼‰</li>
<li>æ–¹å‘Dirï¼ˆsrcã€dstï¼‰</li>
<li>åè®®Protoï¼ˆetherã€ipã€tcpã€udpã€httpã€icmpã€ftpç­‰ï¼‰</li>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼ˆ&amp;&amp;ä¸ã€|| æˆ–ã€ï¼éï¼‰</li>
</ol>
<ul>
<li><p>åè®®è¿‡æ»¤:</p>
<blockquote>
<p>æ¯”è¾ƒç®€å•ï¼Œç›´æ¥åœ¨æŠ“åŒ…è¿‡æ»¤æ¡†ä¸­ç›´æ¥è¾“å…¥åè®®åå³å¯ã€‚<br>tcpï¼šåªæ˜¾ç¤ºTCPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨<br>httpï¼šåªæŸ¥çœ‹HTTPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨<br>icmpï¼šåªæ˜¾ç¤ºICMPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨</p>
</blockquote>
</li>
<li><p>IPè¿‡æ»¤:</p>
<blockquote>
<p>host 192.168.1.104<br>src host 192.168.1.104<br>dst host 192.168.1.104</p>
</blockquote>
</li>
<li><p>ç«¯å£è¿‡æ»¤:</p>
<blockquote>
<p>port 80<br>src port 80<br>dst port 80</p>
</blockquote>
</li>
<li><p>é€»è¾‘è¿ç®—ç¬¦&amp;&amp;ä¸ã€|| æˆ–ã€ï¼é</p>
<blockquote>
<p>src host 192.168.1.104 &amp;&amp; dst port 80  æŠ“å–ä¸»æœºåœ°å€ä¸º192.168.1.80ã€ç›®çš„ç«¯å£ä¸º80çš„æ•°æ®åŒ…<br>host 192.168.1.104 || host 192.168.1.102  æŠ“å–ä¸»æœºä¸º192.168.1.104æˆ–è€…192.168.1.102çš„æ•°æ®åŒ…<br>! broadcast ä¸æŠ“å–å¹¿æ’­æ•°æ®åŒ…</p>
</blockquote>
</li>
</ul></div><div class="tab-item-content" id="è¯­æ³•-2"><ul>
<li><strong>åœ¨ç•Œé¢ä¸­çš„æ˜¾ç¤ºè¿‡æ»¤å™¨ä¸­è¾“å…¥çš„è¯­æ³•</strong></li>
</ul>
<ol>
<li><p>æ¯”è¾ƒæ“ä½œç¬¦:</p>
<blockquote>
<p>== ç­‰äºã€ï¼= ä¸ç­‰äºã€&gt; å¤§äºã€&lt; å°äºã€&gt;= å¤§äºç­‰äºã€&lt;=å°äºç­‰äº</p>
</blockquote>
</li>
<li><p>åè®®è¿‡æ»¤:</p>
<blockquote>
<p>æ¯”è¾ƒç®€å•ï¼Œç›´æ¥åœ¨Filteræ¡†ä¸­ç›´æ¥è¾“å…¥åè®®åå³å¯ã€‚<br>æ³¨æ„ï¼šåè®®åç§°éœ€è¦è¾“å…¥å°å†™ã€‚<br>tcpï¼šåªæ˜¾ç¤ºTCPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨<br>httpï¼šåªæŸ¥çœ‹HTTPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨<br>icmpï¼šåªæ˜¾ç¤ºICMPåè®®çš„æ•°æ®åŒ…åˆ—è¡¨</p>
</blockquote>
</li>
<li><p>ipè¿‡æ»¤:</p>
<blockquote>
<p>ip.src ==112.53.42.42 æ˜¾ç¤ºæºåœ°å€ä¸º112.53.42.42çš„æ•°æ®åŒ…åˆ—è¡¨ã€‚<br>ip.dst==112.53.42.42, æ˜¾ç¤ºç›®æ ‡åœ°å€ä¸º112.53.42.42çš„æ•°æ®åŒ…åˆ—è¡¨ã€‚<br>ip.addr == 112.53.42.42 æ˜¾ç¤ºæºIPåœ°å€æˆ–ç›®æ ‡IPåœ°å€ä¸º112.53.42.42çš„æ•°æ®åŒ…åˆ—è¡¨ã€‚<br><img src="https://pic.imgdb.cn/item/668b64dad9c307b7e9502cfa.png" alt="è¿‡æ»¤ipåŒ…"></p>
</blockquote>
</li>
<li><p>ç«¯å£è¿‡æ»¤:</p>
<blockquote>
<p>tcp.port == 80,  æ˜¾ç¤ºæºä¸»æœºæˆ–è€…ç›®çš„ä¸»æœºç«¯å£ä¸º80çš„æ•°æ®åŒ…åˆ—è¡¨ã€‚<br>tcp.srcport == 80,  åªæ˜¾ç¤ºTCPåè®®çš„æºä¸»æœºç«¯å£ä¸º80çš„æ•°æ®åŒ…åˆ—è¡¨ã€‚<br>tcp.dstport == 80ï¼Œåªæ˜¾ç¤ºTCPåè®®çš„ç›®çš„ä¸»æœºç«¯å£ä¸º80çš„æ•°æ®åŒ…åˆ—è¡¨ã€‚<br><img src="https://pic.imgdb.cn/item/668bb724d9c307b7e9d93026.png" alt="å›¾16"></p>
</blockquote>
</li>
<li><p>httpæ¨¡å¼è¿‡æ»¤:</p>
<blockquote>
<p>http.request.method==â€GETâ€    #åªæ˜¾ç¤ºHTTP GETæ–¹æ³•çš„ã€‚<br><img src="https://pic.imgdb.cn/item/668bb7b6d9c307b7e9d9df88.png" alt="å›¾17"></p>
</blockquote>
</li>
<li><p>é€»è¾‘è¿ç®—ç¬¦ä¸º and/or/not:</p>
<blockquote>
<p>è¿‡æ»¤å¤šä¸ªæ¡ä»¶ç»„åˆæ—¶ï¼Œä½¿ç”¨and/orã€‚<br>æ¯”å¦‚è·å–IPåœ°å€ä¸º<strong>192.168.0.104</strong>çš„ICMPæ•°æ®åŒ…è¡¨è¾¾å¼ä¸º <strong>ip.addr == 192.168.0.104 and icmp</strong></p>
</blockquote>
</li>
<li><p>æŒ‰ç…§æ•°æ®åŒ…å†…å®¹è¿‡æ»¤:</p>
<blockquote>
<p>å‡è®¾æˆ‘è¦ä»¥ICMPå±‚ä¸­çš„å†…å®¹è¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥å•å‡»é€‰ä¸­ç•Œé¢ä¸­çš„ç æµï¼Œåœ¨ä¸‹æ–¹è¿›è¡Œé€‰ä¸­æ•°æ®ã€‚<br><img src="https://pic.imgdb.cn/item/668bba32d9c307b7e9de3653.png" alt="å›¾18"><br>é€‰ä¸­ååœ¨è¿‡æ»¤å™¨ä¸­æ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://pic.imgdb.cn/item/668bba90d9c307b7e9deaa34.png" alt="å›¾19"><br>åé¢æ¡ä»¶è¡¨è¾¾å¼å°±éœ€è¦è‡ªå·±å¡«å†™ã€‚<br>å¦‚ä¸‹æˆ‘æƒ³è¿‡æ»¤å‡ºdataæ•°æ®åŒ…ä¸­åŒ…å«â€abcdâ€å†…å®¹çš„æ•°æ®æµã€‚<br>å…³é”®è¯æ˜¯containsï¼Œå®Œæ•´æ¡ä»¶è¡¨è¾¾å¼ä¸ºdata contains â€œabcdâ€ã€‚<br><img src="https://pic.imgdb.cn/item/668bbafed9c307b7e9df3083.png" alt="å›¾20"></p>
</blockquote>
</li>
</ol></div><div class="tab-item-content" id="è¯­æ³•-3"><ol>
<li><p>æ•°æ®é“¾è·¯å±‚ï¼š</p>
<ul>
<li>ç­›é€‰macåœ°å€ä¸º04:f9:38:ad:13:26çš„æ•°æ®åŒ…:<ul>
<li>eth.src == 04:f9:38:ad:13:26</li>
</ul>
</li>
<li>ç­›é€‰æºmacåœ°å€ä¸º04:f9:38:ad:13:26çš„æ•°æ®åŒ…:<ul>
<li>eth.src == 04:f9:38:ad:13:26</li>
</ul>
</li>
</ul>
</li>
<li><p>ç½‘ç»œå±‚ï¼š</p>
<ul>
<li>ç­›é€‰ipåœ°å€ä¸º192.168.1.1çš„æ•°æ®åŒ…:<ul>
<li>ip.addr == 192.168.1.1</li>
</ul>
</li>
<li>ç­›é€‰192.168.1.0ç½‘æ®µçš„æ•°æ®:<ul>
<li>ip contains â€œ192.168.1â€</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¼ è¾“å±‚ï¼š</p>
<ul>
<li>ç­›é€‰ç«¯å£ä¸º80çš„æ•°æ®åŒ…:<ul>
<li>tcp.port == 80</li>
</ul>
</li>
<li>ç­›é€‰12345ç«¯å£å’Œ80ç«¯å£ä¹‹é—´çš„æ•°æ®åŒ…<ul>
<li>tcp.port == 12345 &amp;&amp; tcp.port == 80</li>
</ul>
</li>
<li>ç­›é€‰ä»12345ç«¯å£åˆ°80ç«¯å£çš„æ•°æ®åŒ…<ul>
<li>tcp.srcport == 12345 &amp;&amp; tcp.dstport == 80</li>
</ul>
</li>
</ul>
</li>
<li><p>åº”ç”¨å±‚ï¼š<br><strong>ç‰¹åˆ«è¯´æ˜:</strong> </p>
<blockquote>
<p>httpä¸­http.requestè¡¨ç¤ºè¯·æ±‚å¤´ä¸­çš„ç¬¬ä¸€è¡Œï¼ˆå¦‚GET index.jsp HTTP/1.1ï¼‰<br>http.responseè¡¨ç¤ºå“åº”å¤´ä¸­çš„ç¬¬ä¸€è¡Œï¼ˆå¦‚HTTP/1.1 200 OKï¼‰ï¼Œå…¶ä»–å¤´éƒ¨éƒ½ç”¨http.header_nameå½¢å¼ã€‚</p>
</blockquote>
<ul>
<li>ç­›é€‰urlä¸­åŒ…å«.phpçš„httpæ•°æ®åŒ…<ul>
<li>http.request.uri contains â€œ.phpâ€</li>
</ul>
</li>
<li>ç­›é€‰å†…å®¹åŒ…å«usernameçš„httpæ•°æ®åŒ…<ul>
<li>http contains â€œusernameâ€</li>
</ul>
</li>
</ul>
</li>
</ol></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<p class="p center log large">07.WiresharkæŠ“åŒ…åˆ†æTCPä¸‰æ¬¡æ¡æ‰‹</p>
<div class="tabs" id="tcpæ¡æ‰‹è¿‡ç¨‹"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="tcpæ¡æ‰‹è¿‡ç¨‹-1">01.TCPä¸‰æ¬¡æ¡æ‰‹è¿æ¥å»ºç«‹è¿‡ç¨‹</button><button type="button" class="tab " data-href="tcpæ¡æ‰‹è¿‡ç¨‹-2">02. æŠ“åŒ…è·å–è®¿é—®æŒ‡å®šæœåŠ¡ç«¯æ•°æ®åŒ…</button></ul><div class="tab-contents"><div class="tab-item-content active" id="tcpæ¡æ‰‹è¿‡ç¨‹-1"><blockquote>
<p>Step1ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªSYN=1ï¼ŒACK=0æ ‡å¿—çš„æ•°æ®åŒ…ç»™æœåŠ¡ç«¯ï¼Œè¯·æ±‚è¿›è¡Œè¿æ¥ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼›<br>Step2ï¼šæœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚å¹¶ä¸”å…è®¸è¿æ¥çš„è¯ï¼Œå°±ä¼šå‘é€ä¸€ä¸ªSYN=1ï¼ŒACK=1æ ‡å¿—çš„æ•°æ®åŒ…ç»™å‘é€ç«¯ï¼Œå‘Šè¯‰å®ƒï¼Œå¯ä»¥é€šè®¯äº†ï¼Œå¹¶ä¸”è®©å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªç¡®è®¤æ•°æ®åŒ…ï¼Œè¿™æ˜¯ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼›<br>Step3ï¼šæœåŠ¡ç«¯å‘é€ä¸€ä¸ªSYN=0ï¼ŒACK=1çš„æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ç«¯ï¼Œå‘Šè¯‰å®ƒè¿æ¥å·²è¢«ç¡®è®¤ï¼Œè¿™å°±æ˜¯ç¬¬ä¸‰æ¬¡æ¡æ‰‹ã€‚TCPè¿æ¥å»ºç«‹ï¼Œå¼€å§‹é€šè®¯ã€‚<br><img src="https://pic.imgdb.cn/item/668bbddcd9c307b7e9e2b3a3.png" alt="å›¾21"></p>
</blockquote></div><div class="tab-item-content" id="tcpæ¡æ‰‹è¿‡ç¨‹-2"><blockquote>
<p>Step1ï¼šå¯åŠ¨wiresharkæŠ“åŒ…ï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥<a href="http://www.baidu.com./">www.baidu.comã€‚</a><br>Step2ï¼šä½¿ç”¨ping <a href="http://www.baidu.comè·å–ç™¾åº¦çš„ip(120.232.145.144)./">www.baidu.comè·å–ç™¾åº¦çš„IPï¼ˆ120.232.145.144ï¼‰ã€‚</a><br>Step3ï¼šè¾“å…¥è¿‡æ»¤æ¡ä»¶è·å–å¾…åˆ†ææ•°æ®åŒ…åˆ—è¡¨ ip.addr == 120.232.145.144<br><img src="https://pic.imgdb.cn/item/668bbfc5d9c307b7e9e50d7b.png" alt="å›¾22"><br>å›¾ä¸­å¯ä»¥çœ‹åˆ°wiresharkæˆªè·åˆ°äº†ä¸‰æ¬¡æ¡æ‰‹çš„ä¸‰ä¸ªæ•°æ®åŒ…ã€‚<br>ç¬¬å››ä¸ªåŒ…æ‰æ˜¯HTTPSçš„(HTTP+TLS=HTTPS)ï¼Œ è¿™è¯´æ˜HTTPSçš„ç¡®æ˜¯ä½¿ç”¨TCPå»ºç«‹è¿æ¥çš„</p>
</blockquote>
<p><mark class="hl-label green">ç¬¬ä¸€æ¬¡æ¡æ‰‹æ•°æ®åŒ…</mark> </p>
<blockquote>
<p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªTCPï¼Œæ ‡å¿—ä½ä¸ºSYNï¼Œåºåˆ—å·ä¸º0ï¼Œ ä»£è¡¨å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥ã€‚<br><img src="https://pic.imgdb.cn/item/668c0d12d9c307b7e9721925.png" alt="å›¾23"><br>æ•°æ®åŒ…çš„å…³é”®å±æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>SYN ï¼šæ ‡å¿—ä½ï¼Œè¡¨ç¤ºè¯·æ±‚å»ºç«‹è¿æ¥</li>
<li>Seq = 0 ï¼šåˆå§‹å»ºç«‹è¿æ¥å€¼ä¸º0ï¼Œæ•°æ®åŒ…çš„ç›¸å¯¹åºåˆ—å·ä»0å¼€å§‹ï¼Œè¡¨ç¤ºå½“å‰è¿˜æ²¡æœ‰å‘é€æ•°æ®</li>
<li>Ack =0ï¼šåˆå§‹å»ºç«‹è¿æ¥å€¼ä¸º0ï¼Œå·²ç»æ”¶åˆ°åŒ…çš„æ•°é‡ï¼Œè¡¨ç¤ºå½“å‰æ²¡æœ‰æ¥æ”¶åˆ°æ•°æ®</li>
</ul>
</blockquote>
<p><mark class="hl-label green">ç¬¬äºŒæ¬¡æ¡æ‰‹çš„æ•°æ®åŒ…</mark> </p>
<blockquote>
<p>æœåŠ¡å™¨å‘å›ç¡®è®¤åŒ…, æ ‡å¿—ä½ä¸º SYN å’Œ ACKã€‚<br>å°†ç¡®è®¤åºå·(Acknowledgement Number)å­—æ®µ+1ï¼Œå³0+1=1ã€‚<br>Next Sequence Number: 1  ä¹Ÿ + 1<br><img src="https://pic.imgdb.cn/item/668c0e73d9c307b7e9758f9c.png" alt="å›¾24"><br>æ•°æ®åŒ…çš„å…³é”®å±æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li></li>
<li>Seq = 0 ï¼šåˆå§‹å»ºç«‹å€¼ä¸º0ï¼Œè¡¨ç¤ºå½“å‰è¿˜æ²¡æœ‰å‘é€æ•°æ®</li>
<li>Ack = 1ï¼šè¡¨ç¤ºå½“å‰ç«¯æˆåŠŸæ¥æ”¶çš„æ•°æ®ä½æ•°ï¼Œè™½ç„¶å®¢æˆ·ç«¯æ²¡æœ‰å‘é€ä»»ä½•æœ‰æ•ˆæ•°æ®ï¼Œç¡®è®¤å·è¿˜æ˜¯è¢«åŠ 1ï¼Œå› ä¸ºåŒ…å«SYNæˆ–FINæ ‡å¿—ä½ã€‚ï¼ˆå¹¶ä¸ä¼šå¯¹æœ‰æ•ˆæ•°æ®çš„è®¡æ•°äº§ç”Ÿå½±å“ï¼Œå› ä¸ºå«æœ‰SYNæˆ–FINæ ‡å¿—ä½çš„åŒ…å¹¶ä¸æºå¸¦æœ‰æ•ˆæ•°æ®ï¼‰</li>
</ul>
</blockquote>
<p><mark class="hl-label green">ç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„æ•°æ®åŒ…</mark> </p>
<blockquote>
<p>å®¢æˆ·ç«¯å†æ¬¡å‘é€ç¡®è®¤åŒ…(ACK) SYNæ ‡å¿—ä½ä¸º0ï¼ŒACKæ ‡å¿—ä½ä¸º1ã€‚<br>å¹¶ä¸”æŠŠæœåŠ¡å™¨å‘æ¥ACKçš„åºå·å­—æ®µ+1ï¼Œæ”¾åœ¨ç¡®å®šå­—æ®µä¸­å‘é€ç»™å¯¹æ–¹ï¼Œå¹¶ä¸”åœ¨Flagæ®µå†™ACKçš„+1<br><img src="https://pic.imgdb.cn/item/668c0f93d9c307b7e977a8b6.png" alt="å›¾25"><br>æ•°æ®åŒ…çš„å…³é”®å±æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>ACK ï¼šæ ‡å¿—ä½ï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°è®°å½•</li>
<li>Seq = 1 ï¼šè¡¨ç¤ºå½“å‰å·²ç»å‘é€1ä¸ªæ•°æ®</li>
<li>Ack = 1 : è¡¨ç¤ºå½“å‰ç«¯æˆåŠŸæ¥æ”¶çš„æ•°æ®ä½æ•°ï¼Œè™½ç„¶æœåŠ¡ç«¯æ²¡æœ‰å‘é€ä»»ä½•æœ‰æ•ˆæ•°æ®ï¼Œç¡®è®¤å·è¿˜æ˜¯è¢«åŠ 1ï¼Œå› ä¸ºåŒ…å«SYNæˆ–FINæ ‡å¿—ä½ï¼ˆå¹¶ä¸ä¼šå¯¹æœ‰æ•ˆæ•°æ®çš„è®¡æ•°äº§ç”Ÿå½±å“ï¼Œå› ä¸ºå«æœ‰SYNæˆ–FINæ ‡å¿—ä½çš„åŒ…å¹¶ä¸æºå¸¦æœ‰æ•ˆæ•°æ®)ã€‚<br><strong>å°±è¿™æ ·é€šè¿‡äº†TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹äº†è¿æ¥ã€‚</strong><br><strong>ä¸‹é¢å°±æ˜¯å¼€å§‹è¿›è¡Œæ•°æ®äº¤äº’äº†</strong></li>
</ul>
</blockquote></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div>

<p class="p center log large">08.Wiresharkåˆ†æå¸¸ç”¨æ“ä½œ</p>
<mark class="hl-label default">è°ƒæ•´æ•°æ®åŒ…åˆ—è¡¨ä¸­æ—¶é—´æˆ³æ˜¾ç¤ºæ ¼å¼</mark> 
<blockquote>
<p>è°ƒæ•´æ–¹æ³•ä¸º è§†å›¾ â€“&gt;æ—¶é—´æ˜¾ç¤ºæ ¼å¼ â€“&gt; æ—¥æœŸå’Œæ—¶é—´ã€‚è°ƒæ•´åæ ¼å¼å¦‚ä¸‹ï¼š<br><img src="https://pic.imgdb.cn/item/668c10ded9c307b7e97964f6.png" alt="å›¾26"></p>
</blockquote>
]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>wireshark,ç½‘ç»œæŠ“åŒ…</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€å¥½ç”¨çš„æ¯”å¯¹å·¥å…·-beyondcompare</title>
    <url>/looking/4d33b968.html</url>
    <content><![CDATA[<h2 id="beyondcompare"><a href="#beyondcompare" class="headerlink" title="beyondcompare"></a>beyondcompare</h2><p><img src="https://www.scootersoftware.com/bc_icon.png" alt="img"></p>
<blockquote>
<p>Beyond Compareæ˜¯ä¸€å¥—ç”±Scooter Softwareæ¨å‡ºçš„å†…å®¹æ¯”è¾ƒå·¥å…·è½¯ä»¶ã€‚é™¤äº†å¯ä»¥ä½œæ–‡ä»¶æ¯”è¾ƒä»¥å¤–ï¼Œè¿˜å¯ä»¥æ¯”å¯¹æ–‡ä»¶ç›®å½•ã€FTPç›®å½•åŠå‹ç¼©åŒ…æ¡ˆçš„å†…å®¹ç­‰ã€‚</p>
<p>å› ä¸ºè¿™äº›åŠŸèƒ½ï¼ŒBeyond Compareè¢«åº”ç”¨äºç‰ˆæœ¬æ§åˆ¶åŠèµ„æ–™åŒæ­¥çš„å·¥ä½œä¸Š</p>
<blockquote>
<p>è¿™æ˜¯ä¸€æ¬¾æµè¡Œçš„æ¯”å¯¹å·¥å…·,ä¸»è¦çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
</blockquote>
<ul>
<li>æ¯”è¾ƒæ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹</li>
<li>æ¯”è¾ƒExcelæ–‡ä»¶</li>
<li>æ¯”è¾ƒWordæ–‡ä»¶</li>
<li>å›¾ç‰‡æ¯”è¾ƒ</li>
<li>åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶å†…å®¹</li>
<li>åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶å¤¹</li>
</ul>
</blockquote>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><a href="https://www.scootersoftware.com/download">å®˜ç½‘ä¸‹è½½é“¾æ¥ï¼šbyendcompare4-download</a></p>
<ol>
<li>ä¸‹è½½å®‰è£…åŒ…<br><strong>æ³¨æ„</strong>ï¼šæŒ‰ç…§ç³»ç»Ÿç‰ˆæœ¬ä¸‹è½½å®‰è£…åŒ…</li>
<li>å®‰è£…<ul>
<li>è¿è¡Œå®‰è£…åŒ…ï¼Œé€‰æ‹©å®‰è£…ä½ç½®ï¼Œç‚¹å‡»å®‰è£…</li>
</ul>
</li>
<li>æ‰“å¼€å³å¯</li>
</ol>
<p><strong>æ³¨æ„</strong>ï¼šç”±äºè¿™æ˜¯å…è´¹ç‰ˆæœ¬çš„åªæœ‰30å¤©çš„è¯•ç”¨æœŸï¼Œæ‰€ä»¥éœ€è¦ä¸‹è¾¹çš„æ–¹æ³•æ¥é‡ç½®ä¸€ä¸‹è¯•ç”¨æœŸ</p>
<h2 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h2><p><strong>æ³¨æ„:æœ€æ–°ç‰ˆæœ¬å¥½åƒæ²¡æœ‰BCompare.iniè¿™ä¸ªæ–‡ä»¶</strong></p>
<blockquote>
<p>ä¿®æ”¹C:\Users\Administrator\AppData\Roaming\BCompare\BCompare.iniè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„æ—¶é—´æˆ³æ¥ä½¿è½¯ä»¶ä¸€ç›´å¤„äºè¯•ç”¨æœŸã€‚</p>
<p>BCompare.iniæ–‡ä»¶çš„å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[BCompare]</span><br><span class="line">InstallTime=1534816784</span><br><span class="line">LastLoading=1538200843</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>#å†™ä¸€ä¸ªè„šæœ¬å®ç°å¼€æœºæ‰§è¡Œä¿®æ”¹æ—¶é—´ï¼š<br>#æŠŠè„šæœ¬æ–‡ä»¶æ”¾åˆ°C:\Users\Administrator\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\è¿™ä¸ªç›®å½•ä¸‹å°±å°±å¯ä»¥å¼€æœºè‡ªå¯äº†ã€‚<br><strong>è¿™æ˜¯ä¸€ä¸ªpythonè„šæœ¬</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">import time  </span><br><span class="line">f = open(<span class="string">"C:\\Users\\Administrator\\AppData\\Roaming\\BCompare\\BCompare.ini"</span>,<span class="string">"r+"</span>)  </span><br><span class="line">f_content = f.readlines()  </span><br><span class="line">f.seek(0,0)  </span><br><span class="line">f.truncate()  </span><br><span class="line">t = str(int(time.time()))  </span><br><span class="line">f.write(f_content[0])  </span><br><span class="line">f.write(f_content[1][:12] + t + <span class="string">"\n"</span>)  </span><br><span class="line">f.write(f_content[2][:12] + t + <span class="string">"\n"</span>) </span><br><span class="line"></span><br><span class="line">f.close() </span><br></pre></td></tr></tbody></table></figure>


<h2 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h2><blockquote>
<p>ä¿®æ”¹C:\Program Files\Beyond Compare 4\BCUnrar.dll</p>
<p>è¿™ä¸ªæ–‡ä»¶é‡å‘½åæˆ–è€…ç›´æ¥åˆ é™¤ï¼Œåˆ™ä¼šæ–°å¢30å¤©è¯•ç”¨æœŸï¼Œå†æ¬¡æ‰“å¼€æç¤ºè¿˜æœ‰28å¤©è¯•ç”¨æœŸã€‚<br><strong>æ³¨æ„</strong>ï¼šä¹Ÿå¯ä»¥å†™ä¸€ä¸ªè„šæœ¬å°†è¿™ä¸ªæ–‡ä»¶é‡å‘½åæˆ–è€…ç›´æ¥åˆ é™¤</p>
</blockquote>
<h2 id="æ–¹æ³•ä¸‰ï¼šä¿®æ”¹æ³¨å†Œè¡¨"><a href="#æ–¹æ³•ä¸‰ï¼šä¿®æ”¹æ³¨å†Œè¡¨" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šä¿®æ”¹æ³¨å†Œè¡¨"></a>æ–¹æ³•ä¸‰ï¼šä¿®æ”¹æ³¨å†Œè¡¨</h2><blockquote>
<p>1ã€åœ¨æœç´¢æ ä¸­è¾“å…¥ regedit  ï¼Œæ‰“å¼€æ³¨å†Œè¡¨<br>2ã€ åˆ é™¤é¡¹ç›®ï¼šè®¡ç®—æœº\HKEY_CURRENT_USER\Software\ScooterSoftware\Beyond Compare 4\CacheId<br><strong>æ³¨ï¼š</strong>æ­¤æ–¹æ³•å†™ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œæ¯æ¬¡å¼€æœºçš„æ—¶å€™å»åˆ é™¤æ³¨å†Œè¡¨ä¸­çš„CacheIdï¼ŒåŒæ ·èƒ½è¾¾åˆ°ä¸€ç›´å¤„äºè¯•ç”¨æœŸçš„æ•ˆæœ,ç»“åˆæ–¹æ³•4çš„batæ–‡ä»¶å³å¯</p>
</blockquote>
<h2 id="æ–¹æ³•å››ï¼šæœ¬åœ°æ‰‹åŠ¨æ‰§è¡Œbatæ–‡ä»¶"><a href="#æ–¹æ³•å››ï¼šæœ¬åœ°æ‰‹åŠ¨æ‰§è¡Œbatæ–‡ä»¶" class="headerlink" title="æ–¹æ³•å››ï¼šæœ¬åœ°æ‰‹åŠ¨æ‰§è¡Œbatæ–‡ä»¶"></a>æ–¹æ³•å››ï¼šæœ¬åœ°æ‰‹åŠ¨æ‰§è¡Œbatæ–‡ä»¶</h2><blockquote>
<p>å°†ä¸€ä¸‹ä»£ç ä¿å­˜æˆtxtåï¼Œä¿®æ”¹åç¼€åä¸ºbat</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">reg delete "HKEY_CURRENT_USER\Software\Scooter Software\Beyond Compare 4" /v CacheID /f</span><br></pre></td></tr></tbody></table></figure>
<p>å½“beyongdè½¯ä»¶å‰©ä½™æ—¶é—´ä¸å¤šæ—¶å€™ï¼Œè¿è¡Œæ­¤batï¼Œé‡æ–°æ‰“å¼€è½¯ä»¶å³å¯å‰©ä½™æ—¶é—´ä¸ºä¸‰åå¤©</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">#è§£æä¸Šé¢çš„è¯­å¥ï¼š</span><br><span class="line">reg deleteï¼šè¿™æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºåˆ é™¤æ³¨å†Œè¡¨ä¸­çš„é”®å€¼å¯¹æˆ–é”®ã€‚</span><br><span class="line">"HKEY_CURRENT_USER\Software\Scooter Software\Beyond Compare 4"ï¼šè¿™æ˜¯æ³¨å†Œè¡¨è·¯å¾„ï¼ŒæŒ‡å®šäº†ä¸å½“å‰ç”¨æˆ·ç›¸å…³çš„Beyond Compare 4è½¯ä»¶çš„æ³¨å†Œè¡¨ä½ç½®ã€‚</span><br><span class="line">/v CacheIDï¼šè¿™æŒ‡å®šè¦åˆ é™¤HKEY_CURRENT_USER\Software\Scooter Software\Beyond Compare 4é”®ä¸­åä¸ºCacheIDçš„ç‰¹å®šæ³¨å†Œè¡¨æ•°å€¼ã€‚</span><br><span class="line">/fï¼šè¿™ä¸ªé€‰é¡¹å¼ºåˆ¶æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œè€Œä¸ä¼šæç¤ºç¡®è®¤ã€‚</span><br></pre></td></tr></tbody></table></figure>
<p><strong>è¿™æ¡å‘½ä»¤çš„ä½œç”¨æ˜¯åˆ é™¤æ³¨å†Œè¡¨è·¯å¾„ HKEY_CURRENT_USER\Software\Scooter Software\Beyond Compare 4 ä¸­åä¸º CacheID çš„æ³¨å†Œè¡¨æ•°å€¼ï¼ˆé”®å€¼å¯¹ï¼‰ã€‚</strong></p>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>æ¯”å¯¹å·¥å…·-beyondcompare</tag>
      </tags>
  </entry>
  <entry>
    <title>é›¶æˆæœ¬æ­å»ºä¸ªäººåšå®¢</title>
    <url>/looking/8f33bcf2.html</url>
    <content><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol>
<li>å®‰è£…nodejs</li>
<li>å®‰è£…hexo</li>
<li>å‘è¡¨æ–‡ç« </li>
<li>æ³¨å†Œgithub</li>
<li>ä¸‹è½½github Desktop</li>
<li>æ›´æ¢ä¸»é¢˜</li>
</ol>
<h2 id="å®‰è£…nodejs"><a href="#å®‰è£…nodejs" class="headerlink" title="å®‰è£…nodejs"></a>å®‰è£…nodejs</h2><h3 id="1-ä¸‹è½½nodejs"><a href="#1-ä¸‹è½½nodejs" class="headerlink" title="1. ä¸‹è½½nodejs"></a>1. ä¸‹è½½nodejs</h3><p>ç‚¹å‡»å»åˆ°å®˜ç½‘ï¼š<a href="https://nodejs.org/en">nodejs.org</a><br>#ä¸‹è½½LTSç‰ˆæœ¬<br><img src="/img/local/1.png" alt="ä¸‹è½½LTSç‰ˆæœ¬"></p>
<p>ä¸‹è½½åå®‰è£…ä¸‹ä¸€æ­¥ã€é€‰æ‹©å®‰è£…è·¯å¾„å³å¯<br>#å¦‚æ²¡æœ‰å…¶å®ƒéœ€æ±‚ç›´æ¥ä¸‹ä¸€æ­¥<br><img src="/img/local/2.png" alt="nodejså®‰è£…1"></p>
<h3 id="2-å®‰è£…hexo"><a href="#2-å®‰è£…hexo" class="headerlink" title="2. å®‰è£…hexo"></a>2. å®‰è£…hexo</h3><p>nodejså®‰è£…æˆåŠŸååœ¨cmdä¸­è¾“å…¥npméªŒè¯ä¸€ä¸‹ï¼šæŒ‰ Win+R é”®ã€å¼¹å‡ºå è¾“å…¥ cmd</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></tbody></table></figure>
<p><img src="/img/local/3.png" alt="cmd"></p>
<p>åˆ›å»ºworkspaceï¼šæ”¾ç½®hexoä¸‹è½½çš„nmpåŒ…<br>#F:\workspace ï¼šåœ¨æ­¤ç›®å½•ä¸‹æ‰“å¼€cmd ä¸‹è½½hexo<br>#æ³¨æ„ï¼šå®‰è£…ç›®å½•è¦ç¡®å®šï¼šå¯ä»¥åœ¨cmdä¸­è¾“å…¥ï¼š </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> F:\workspace</span><br></pre></td></tr></tbody></table></figure>
<p>#å»åˆ°è¯¥ç›®å½•ä¸‹<br>#å»ºè®®å¯ä»¥ä½¿ç”¨vscodeæ¥æ‰§è¡Œ-å¯é€‰<br>æŒ‰ç…§å®˜ç½‘æä¾›çš„ å‘½ä»¤æ‰§è¡Œå®‰è£…å¯åŠ¨hexoå³å¯ï¼šå‘½ä»¤å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></tbody></table></figure>
<p><img src="/img/local/4.png" alt="cmd install hexo"></p>
<p>è®¿é—®æœ¬åœ°æ­å»ºå¥½çš„blogã€æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:4000/">http://localhost:4000/</a><br><img src="/img/local/5.png" alt="http://localhost:4000/"></p>
<h2 id="å‘è¡¨æ–‡ç« "><a href="#å‘è¡¨æ–‡ç« " class="headerlink" title="å‘è¡¨æ–‡ç« "></a>å‘è¡¨æ–‡ç« </h2><p>ä½¿ç”¨vscodeæ‰“å¼€ ä¸Šé¢åˆ›å»ºå¥½çš„blogç›®å½•ï¼šå¦‚ä¸‹<br><img src="/img/local/6.png" alt="vscode open blog file"><br>ç¼–è¾‘æ–‡ç« ï¼šæ‰“å¼€source_posts ä¸‹çš„hello-world.md è¿›è¡Œä¿®æ”¹ã€æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/img/local/7.png" alt="blog page"><br>#æ³¨æ„:å¦‚æœåœ¨vscodeä¸­çš„ç»ˆç«¯æ— æ³•ä½¿ç”¨npmã€hexoç­‰å‘½ä»¤<br>#éœ€è¦å°†vscodeçš„å±æ€§é…ç½®ä¸º-ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ­¤ç¨‹åº(å‰ææ˜¯ä½ æ˜¯ç”¨çš„æ™®é€šç”¨æˆ·å®‰è£…çš„è¯ã€å¦‚æœæ˜¯ä½¿ç”¨Administratorçš„è¯å°±æ²¡å¿…è¦äº†):å¦‚ä¸‹å›¾<br><img src="/img/local/8.png" alt="add env_path for vscode"></p>
<p>æ–°å¢æ–‡ç« ï¼šåœ¨ç»ˆç«¯æˆ–cmdè¾“å…¥ï¼š<br>#ï¼ˆå…¶å®å°±æ˜¯åœ¨soruce\postsä¸‹æ–°å»ºäº†ä¸€ä¸ª.mdæ–‡ä»¶ï¼‰ï¼šå¦‚ä¸‹<br>#â€™é›¶æˆæœ¬æ­å»ºä¸ªäººåšå®¢â€™ æ˜¯æ–‡ç« å</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">hexo new é›¶æˆæœ¬æ­å»ºä¸ªäººåšå®¢</span><br></pre></td></tr></tbody></table></figure>
<p>å¯åŠ¨hexoæœåŠ¡ï¼š<br>#ï¼ˆå¦‚æœæ²¡æœ‰å…³æ‰ä¸Šä¸€ä¸ªæœåŠ¡å°±æ²¡å¿…è¦æ‰§è¡Œï¼‰<br>#å¯ä»¥çœ‹åˆ°ç½‘é¡µå‡ºäº†ç¬¬äºŒç¯‡æ–‡ç« <br><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œæ¨èä½¿ç”¨<strong>markdown</strong>è¯­æ³•<br>markdownå®˜ç½‘ï¼š<a href="https://markdown.com.cn/basic-syntax/">https://markdown.com.cn/basic-syntax/</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></tbody></table></figure>
<p><img src="/img/local/9.png" alt="write blog"><br><img src="/img/local/10.png" alt="write blog"></p>
<h2 id="æ³¨å†Œgithub"><a href="#æ³¨å†Œgithub" class="headerlink" title="æ³¨å†Œgithub"></a>æ³¨å†Œgithub</h2><p>ç‚¹å‡»å»åˆ°å®˜ç½‘ï¼š<a href="https://github.com/">github</a></p>
<ol>
<li>æ³¨å†Œgithubè´¦å·</li>
<li>åˆ›å»ºä¸€ä¸ªä»“åº“ï¼š<br><img src="/img/local/11.png" alt="create repo"><br>è‡ªå®šä¹‰è‡ªå·±çš„åšå®¢ç½‘å€ï¼šå¦‚ä¸‹å›¾<br>ç„¶åæ‹‰åˆ°æœ€ä¸‹é¢ç‚¹å‡»ï¼šcreate repository<br><img src="/img/local/13.png" alt="create repo"><br>åˆ›å»ºåä¼šè·³åˆ°è¿™ä¸ªç•Œé¢ï¼šå¯ä»¥ä¸ç”¨ç®¡ï¼ˆæˆ‘ä»¬ä¸ä½¿ç”¨è¿™é‡Œæä¾›çš„å‘½ä»¤ã€ä½¿ç”¨ä¸€ä¸ªå®¢æˆ·ç«¯æ¥å…‹éš†ä¸‹è½½æœ¬é¡¹ç›®ï¼‰<br><img src="/img/local/14.png" alt="create repo"></li>
</ol>
<h2 id="ä¸‹è½½github-Desktop"><a href="#ä¸‹è½½github-Desktop" class="headerlink" title="ä¸‹è½½github Desktop"></a>ä¸‹è½½github Desktop</h2><p>ç‚¹å‡»å»åˆ°å®˜ç½‘ï¼š<a href="https://desktop.github.com/">github desktop</a><br>ä¸‹è½½åå®‰è£…å³å¯<br><img src="/img/local/15.png" alt="download desktop"><br>æ‰“å¼€github desktopåç™»å½•ï¼š<br>#ä½¿ç”¨githubè´¦æˆ·ç™»å½•<br><img src="/img/local/16.png" alt="loggin"><br>å…‹éš†ä¸Šé¢githubåˆ›å»ºçš„é¡¹ç›®ï¼š<br>#å…‹éš†é¡¹ç›®åˆ°æŒ‡å®šç›®å½•ï¼šç‚¹å‡»Clone<br><img src="/img/local/17.png" alt="Clone"><br><img src="/img/local/18.png" alt="Clone"></p>
<p>å›åˆ°ç»ˆç«¯ã€å°†hexoé¡¹ç›®è¾“å‡º githubæ ¼å¼çš„é¡¹ç›®ç›®å½•æ¶æ„<br>#å…ˆç»ˆæ­¢hexo serverï¼šæŒ‰ </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">ctrl + c</span><br></pre></td></tr></tbody></table></figure>
<p>å†æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">hexo generate  è¾“å‡ºé¡¹ç›®</span><br></pre></td></tr></tbody></table></figure>
<p><img src="/img/local/19.png" alt="hexo generate"><br><img src="/img/local/20.png" alt="hexo generate"></p>
<p>å›åˆ° github Desktop<br><img src="/img/local/21.png" alt="github Desktop "></p>
<p>æäº¤åˆ°githubï¼š<br><img src="/img/local/22.png" alt="commit github"></p>
<p>ç­‰å¾…æ¨é€å®Œæˆåå†æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼š<br><a href="https://xiaoxin-top.github.io/">https://xiaoxin-top.github.io/</a><br>å³å¯æ‰“å¼€è‡ªå·±çš„åšå®¢å•¦<br><img src="/img/local/23.png" alt="open blog"></p>
<h2 id="æ›´æ¢ä¸»é¢˜"><a href="#æ›´æ¢ä¸»é¢˜" class="headerlink" title="æ›´æ¢ä¸»é¢˜"></a>æ›´æ¢ä¸»é¢˜</h2><p>å¦‚æœè§‰å¾—é»˜è®¤çš„ä¸»é¢˜ä¸ç¬¦åˆä½ çš„å®¡ç¾ã€å¯ä»¥å†å®˜ç½‘é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜<br>ä¸»é¢˜å®˜ç½‘ï¼š<a href="https://hexo.io/themes/">https://hexo.io/themes/</a><br>ç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ° å„ç§å„æ ·çš„ä¸»é¢˜ã€ç‚¹å‡»ä¸»é¢˜é‡Œé¢éƒ½å¸¦æœ‰éƒ¨ç½²çš„æ­¥éª¤<br><strong>æ³¨æ„ï¼š</strong>&gt; æ­å»ºå®Œæˆåï¼Œè®°å¾—ä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼Œå¦åˆ™ä¸»é¢˜å¯èƒ½ä¼šæ˜¾ç¤ºå¼‚å¸¸<br><strong>ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">theme: hexo-theme-cola  <span class="comment">#theme: ä¸»é¢˜åç§°</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä»¥ä¸Šå°±æ˜¯ä¸ªäººåšå®¢çš„æ­å»ºå•¦ã€æ›´å¤šä¸»é¢˜éœ€è¦ä¸ªäººå»æ¢ç´¢å•¦<br><img src="/img/local/24.png" alt="open blog"></p>
<h2 id="è¿™é‡Œæä¾›ä¸€ç§ç›´æ¥éƒ¨ç½²åˆ°githubçš„æ–¹æ¡ˆ"><a href="#è¿™é‡Œæä¾›ä¸€ç§ç›´æ¥éƒ¨ç½²åˆ°githubçš„æ–¹æ¡ˆ" class="headerlink" title="è¿™é‡Œæä¾›ä¸€ç§ç›´æ¥éƒ¨ç½²åˆ°githubçš„æ–¹æ¡ˆ"></a>è¿™é‡Œæä¾›ä¸€ç§ç›´æ¥éƒ¨ç½²åˆ°githubçš„æ–¹æ¡ˆ</h2><ol>
<li>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆæ³¨æ„æ˜¯æ ¹ç›®å½•ä¸‹çš„_config.ymlï¼‰ï¼š</li>
</ol>
<p>#åœ¨æœ€åæ·»åŠ githubé¡¹ç›®çš„é…ç½®ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/xiaoxin-top/xiaoxin-top.github.io.git   <span class="comment">#githubé¡¹ç›®åœ°å€ï¼šhttpså…‹éš†æˆ–æ˜¯SSH gitçš„åœ°å€</span></span><br><span class="line">  branch: main      <span class="comment">#åˆ†æ”¯ï¼šé»˜è®¤æ˜¯master</span></span><br><span class="line">  message: Update blog content  <span class="comment">#æäº¤ä¿¡æ¯ å¯ä¿®æ”¹</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>å®‰è£…hexo-deployer-gitæ’ä»¶ï¼š</li>
</ol>
<p>#åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></tbody></table></figure>
<ol start="3">
<li>è¿è¡Œhexo deployå‘½ä»¤ï¼š<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">hexo cl <span class="comment">#æ¸…ç†ç¼“å­˜</span></span><br><span class="line">hexo g  <span class="comment">#ç”Ÿæˆé™æ€æ–‡ä»¶</span></span><br><span class="line">hexo d  <span class="comment">#éƒ¨ç½²</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>å¹²è´§</category>
      </categories>
      <tags>
        <tag>ä¸ªäººåšå®¢</tag>
      </tags>
  </entry>
</search>
